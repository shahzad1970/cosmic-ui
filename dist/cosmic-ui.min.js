var vt="ui-theme-tokens",Dt=`
:root {
  /* ================================================================ */
  /*  Primitive palette (shade 50\u2013950)                                 */
  /*  Derived from the Tailwind CSS colour palette.                    */
  /* ================================================================ */

  /* ---- Gray ---- */
  --ui-gray-50:  #f9fafb;
  --ui-gray-100: #f3f4f6;
  --ui-gray-200: #e5e7eb;
  --ui-gray-300: #d1d5db;
  --ui-gray-400: #9ca3af;
  --ui-gray-500: #6b7280;
  --ui-gray-600: #4b5563;
  --ui-gray-700: #374151;
  --ui-gray-800: #1f2937;
  --ui-gray-900: #111827;
  --ui-gray-950: #030712;

  /* ---- Red ---- */
  --ui-red-50:  #fef2f2;
  --ui-red-100: #fee2e2;
  --ui-red-200: #fecaca;
  --ui-red-300: #fca5a5;
  --ui-red-400: #f87171;
  --ui-red-500: #ef4444;
  --ui-red-600: #dc2626;
  --ui-red-700: #b91c1c;
  --ui-red-800: #991b1b;
  --ui-red-900: #7f1d1d;
  --ui-red-950: #450a0a;

  /* ---- Orange ---- */
  --ui-orange-50:  #fff7ed;
  --ui-orange-100: #ffedd5;
  --ui-orange-200: #fed7aa;
  --ui-orange-300: #fdba74;
  --ui-orange-400: #fb923c;
  --ui-orange-500: #f97316;
  --ui-orange-600: #ea580c;
  --ui-orange-700: #c2410c;
  --ui-orange-800: #9a3412;
  --ui-orange-900: #7c2d12;
  --ui-orange-950: #431407;

  /* ---- Amber ---- */
  --ui-amber-50:  #fffbeb;
  --ui-amber-100: #fef3c7;
  --ui-amber-200: #fde68a;
  --ui-amber-300: #fcd34d;
  --ui-amber-400: #fbbf24;
  --ui-amber-500: #f59e0b;
  --ui-amber-600: #d97706;
  --ui-amber-700: #b45309;
  --ui-amber-800: #92400e;
  --ui-amber-900: #78350f;
  --ui-amber-950: #451a03;

  /* ---- Yellow ---- */
  --ui-yellow-50:  #fefce8;
  --ui-yellow-100: #fef9c3;
  --ui-yellow-200: #fef08a;
  --ui-yellow-300: #fde047;
  --ui-yellow-400: #facc15;
  --ui-yellow-500: #eab308;
  --ui-yellow-600: #ca8a04;
  --ui-yellow-700: #a16207;
  --ui-yellow-800: #854d0e;
  --ui-yellow-900: #713f12;
  --ui-yellow-950: #422006;

  /* ---- Lime ---- */
  --ui-lime-50:  #f7fee7;
  --ui-lime-100: #ecfccb;
  --ui-lime-200: #d9f99d;
  --ui-lime-300: #bef264;
  --ui-lime-400: #a3e635;
  --ui-lime-500: #84cc16;
  --ui-lime-600: #65a30d;
  --ui-lime-700: #4d7c0f;
  --ui-lime-800: #3f6212;
  --ui-lime-900: #365314;
  --ui-lime-950: #1a2e05;

  /* ---- Green ---- */
  --ui-green-50:  #f0fdf4;
  --ui-green-100: #dcfce7;
  --ui-green-200: #bbf7d0;
  --ui-green-300: #86efac;
  --ui-green-400: #4ade80;
  --ui-green-500: #22c55e;
  --ui-green-600: #16a34a;
  --ui-green-700: #15803d;
  --ui-green-800: #166534;
  --ui-green-900: #14532d;
  --ui-green-950: #052e16;

  /* ---- Emerald ---- */
  --ui-emerald-50:  #ecfdf5;
  --ui-emerald-100: #d1fae5;
  --ui-emerald-200: #a7f3d0;
  --ui-emerald-300: #6ee7b7;
  --ui-emerald-400: #34d399;
  --ui-emerald-500: #10b981;
  --ui-emerald-600: #059669;
  --ui-emerald-700: #047857;
  --ui-emerald-800: #065f46;
  --ui-emerald-900: #064e3b;
  --ui-emerald-950: #022c22;

  /* ---- Teal ---- */
  --ui-teal-50:  #f0fdfa;
  --ui-teal-100: #ccfbf1;
  --ui-teal-200: #99f6e4;
  --ui-teal-300: #5eead4;
  --ui-teal-400: #2dd4bf;
  --ui-teal-500: #14b8a6;
  --ui-teal-600: #0d9488;
  --ui-teal-700: #0f766e;
  --ui-teal-800: #115e59;
  --ui-teal-900: #134e4a;
  --ui-teal-950: #042f2e;

  /* ---- Cyan ---- */
  --ui-cyan-50:  #ecfeff;
  --ui-cyan-100: #cffafe;
  --ui-cyan-200: #a5f3fc;
  --ui-cyan-300: #67e8f9;
  --ui-cyan-400: #22d3ee;
  --ui-cyan-500: #06b6d4;
  --ui-cyan-600: #0891b2;
  --ui-cyan-700: #0e7490;
  --ui-cyan-800: #155e75;
  --ui-cyan-900: #164e63;
  --ui-cyan-950: #083344;

  /* ---- Sky ---- */
  --ui-sky-50:  #f0f9ff;
  --ui-sky-100: #e0f2fe;
  --ui-sky-200: #bae6fd;
  --ui-sky-300: #7dd3fc;
  --ui-sky-400: #38bdf8;
  --ui-sky-500: #0ea5e9;
  --ui-sky-600: #0284c7;
  --ui-sky-700: #0369a1;
  --ui-sky-800: #075985;
  --ui-sky-900: #0c4a6e;
  --ui-sky-950: #082f49;

  /* ---- Blue ---- */
  --ui-blue-50:  #eff6ff;
  --ui-blue-100: #dbeafe;
  --ui-blue-200: #bfdbfe;
  --ui-blue-300: #93c5fd;
  --ui-blue-400: #60a5fa;
  --ui-blue-500: #3b82f6;
  --ui-blue-600: #2563eb;
  --ui-blue-700: #1d4ed8;
  --ui-blue-800: #1e40af;
  --ui-blue-900: #1e3a8a;
  --ui-blue-950: #172554;

  /* ---- Indigo ---- */
  --ui-indigo-50:  #eef2ff;
  --ui-indigo-100: #e0e7ff;
  --ui-indigo-200: #c7d2fe;
  --ui-indigo-300: #a5b4fc;
  --ui-indigo-400: #818cf8;
  --ui-indigo-500: #6366f1;
  --ui-indigo-600: #4f46e5;
  --ui-indigo-700: #4338ca;
  --ui-indigo-800: #3730a3;
  --ui-indigo-900: #312e81;
  --ui-indigo-950: #1e1b4b;

  /* ---- Violet ---- */
  --ui-violet-50:  #f5f3ff;
  --ui-violet-100: #ede9fe;
  --ui-violet-200: #ddd6fe;
  --ui-violet-300: #c4b5fd;
  --ui-violet-400: #a78bfa;
  --ui-violet-500: #8b5cf6;
  --ui-violet-600: #7c3aed;
  --ui-violet-700: #6d28d9;
  --ui-violet-800: #5b21b6;
  --ui-violet-900: #4c1d95;
  --ui-violet-950: #2e1065;

  /* ---- Purple ---- */
  --ui-purple-50:  #faf5ff;
  --ui-purple-100: #f3e8ff;
  --ui-purple-200: #e9d5ff;
  --ui-purple-300: #d8b4fe;
  --ui-purple-400: #c084fc;
  --ui-purple-500: #a855f7;
  --ui-purple-600: #9333ea;
  --ui-purple-700: #7e22ce;
  --ui-purple-800: #6b21a8;
  --ui-purple-900: #581c87;
  --ui-purple-950: #3b0764;

  /* ---- Fuchsia ---- */
  --ui-fuchsia-50:  #fdf4ff;
  --ui-fuchsia-100: #fae8ff;
  --ui-fuchsia-200: #f5d0fe;
  --ui-fuchsia-300: #f0abfc;
  --ui-fuchsia-400: #e879f9;
  --ui-fuchsia-500: #d946ef;
  --ui-fuchsia-600: #c026d3;
  --ui-fuchsia-700: #a21caf;
  --ui-fuchsia-800: #86198f;
  --ui-fuchsia-900: #701a75;
  --ui-fuchsia-950: #4a044e;

  /* ---- Pink ---- */
  --ui-pink-50:  #fdf2f8;
  --ui-pink-100: #fce7f3;
  --ui-pink-200: #fbcfe8;
  --ui-pink-300: #f9a8d4;
  --ui-pink-400: #f472b6;
  --ui-pink-500: #ec4899;
  --ui-pink-600: #db2777;
  --ui-pink-700: #be185d;
  --ui-pink-800: #9d174d;
  --ui-pink-900: #831843;
  --ui-pink-950: #500724;

  /* ---- Rose ---- */
  --ui-rose-50:  #fff1f2;
  --ui-rose-100: #ffe4e6;
  --ui-rose-200: #fecdd3;
  --ui-rose-300: #fda4af;
  --ui-rose-400: #fb7185;
  --ui-rose-500: #f43f5e;
  --ui-rose-600: #e11d48;
  --ui-rose-700: #be123c;
  --ui-rose-800: #9f1239;
  --ui-rose-900: #881337;
  --ui-rose-950: #4c0519;

  /* ================================================================ */
  /*  Shared UI tokens                                                 */
  /* ================================================================ */

  --ui-font:            -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                        "Helvetica Neue", Helvetica, Arial, sans-serif;
  --ui-font-mono:       ui-monospace, SFMono-Regular, "SF Mono", Menlo,
                        Consolas, "Liberation Mono", monospace;
  --ui-focus-ring:      var(--ui-indigo-500);
  --ui-border-color:    var(--ui-gray-300);
  --ui-text-color:      var(--ui-gray-900);
  --ui-text-muted:      var(--ui-gray-500);
  --ui-bg:              #fff;
  --ui-bg-subtle:       var(--ui-gray-50);
  --ui-radius:          0.375em;
  --ui-button-radius:   var(--ui-radius);
}
`;function _t(){if(typeof document>"u"||document.getElementById(vt))return;let s=document.createElement("style");s.id=vt,s.textContent=Dt,document.head.prepend(s)}_t();var I=Object.freeze({"xx-small":.5625,"x-small":.625,small:.8125,medium:1,large:1.125,"x-large":1.5,"xx-large":2,"xxx-large":3});function d(s){if(!s)return;let e=s.trim().toLowerCase();return e in I?`${I[e]}em`:s}function qt(s){return s!=null&&s.trim().toLowerCase()in I}var Rt=Object.freeze(Object.keys(I)),D=/^([a-z]+)-(\d{2,3})$/;function n(s){if(!s)return;let e=s.trim().toLowerCase();return D.test(e)?`var(--ui-${e})`:s}function It(s){return s!=null&&D.test(s.trim().toLowerCase())}var E=[50,100,200,300,400,500,600,700,800,900,950];function C(s){if(!s)return;let t=s.trim().toLowerCase().match(D);if(!t)return;let[,i,r]=t,o=Number(r),a=E.indexOf(o);if(!(a===-1||a>=E.length-1))return`var(--ui-${i}-${E[a+1]})`}function T(s,e=1){if(!s)return;let i=s.trim().toLowerCase().match(D);if(!i)return;let[,r,o]=i,a=Number(o),l=E.indexOf(a);if(l===-1)return;let h=Math.max(0,l-e);return`var(--ui-${r}-${E[h]})`}function xt(s,e=1){if(!s)return;let i=s.trim().toLowerCase().match(D);if(!i)return;let[,r,o]=i,a=Number(o),l=E.indexOf(a);if(l===-1)return;let h=Math.min(E.length-1,l+e);return`var(--ui-${r}-${E[h]})`}var yt=Object.freeze({1:"0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06)",2:"0 4px 6px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.06)",3:"0 10px 15px rgba(0,0,0,0.1), 0 4px 6px rgba(0,0,0,0.05)",4:"0 20px 25px rgba(0,0,0,0.1), 0 8px 10px rgba(0,0,0,0.04)",5:"0 25px 50px rgba(0,0,0,0.15), 0 12px 24px rgba(0,0,0,0.08)"});function b(s){if(!s)return;let e=String(s).trim();return e in yt?yt[e]:s}var $=new Map,Tt=200;function kt(s){if(!s||typeof document>"u")return null;let e=s.trim().toLowerCase();if($.has(e))return $.get(e);let t=s;if(D.test(e)){let l=getComputedStyle(document.documentElement).getPropertyValue(`--ui-${e}`).trim();if(!l)return $.set(e,null),null;t=l}let i=document.createElement("span");i.style.color=t,i.style.display="none",document.body.appendChild(i);let r=getComputedStyle(i).color;i.remove();let o=r.match(/rgba?\(\s*(\d+),\s*(\d+),\s*(\d+)/),a=o?[Number(o[1]),Number(o[2]),Number(o[3])]:null;for(;$.size>=Tt;){let l=$.keys().next().value;$.delete(l)}return $.set(e,a),a}function wt([s,e,t]){let[i,r,o]=[s,e,t].map(a=>(a/=255,a<=.03928?a/12.92:((a+.055)/1.055)**2.4));return .2126*i+.7152*r+.0722*o}function p(s){let e=kt(s);return e?wt(e)>.179?"#000":"#fff":"#000"}var c=class extends HTMLElement{static properties={};static styles(){return":host { font-family: inherit; }"}static get observedAttributes(){return Object.entries(this.properties).filter(([,e])=>e.reflect!==!1).map(([e,t])=>t.attribute??M(e))}static get _attrMap(){if(!this.hasOwnProperty("__attrMap")){let e={};for(let[t,i]of Object.entries(this.properties)){let r=i.attribute??M(t);e[r]={propName:t,meta:i}}this.__attrMap=e}return this.__attrMap}constructor(){super(),this.attachShadow({mode:"open"}),this._initialised=!1;let e=this.constructor.properties;for(let[t,i]of Object.entries(e)){let r=i.attribute??M(t);Object.defineProperty(this,t,{get:()=>this[`_${t}`],set:o=>{let a=this[`_${t}`];this[`_${t}`]=Mt(o,i.type),i.reflect!==!1&&Ct(this,r,this[`_${t}`],i.type),this._initialised&&a!==this[`_${t}`]&&this._update(),t==="background"&&this._reflectBackgroundVars()},configurable:!0}),this[`_${t}`]=i.default??Bt(i.type)}}connectedCallback(){let e=this.constructor,t=e.styles();if(t){if(typeof CSSStyleSheet<"u"&&this.shadowRoot.adoptedStyleSheets!==void 0){if(!e.hasOwnProperty("__sheet")){let o=new CSSStyleSheet;o.replaceSync(t),e.__sheet=o}this.shadowRoot.adoptedStyleSheets=[e.__sheet]}else if(!this.shadowRoot.querySelector("style")){let o=document.createElement("style");o.textContent=t,this.shadowRoot.prepend(o)}}let i=e._attrMap;for(let[o,{propName:a,meta:l}]of Object.entries(i))this.hasAttribute(o)&&(this[`_${a}`]=St(this.getAttribute(o),l.type));let r=e.properties;for(let[o,a]of Object.entries(r)){if(a.reflect===!1)continue;let l=a.attribute??M(o);!this.hasAttribute(l)&&a.type===Boolean&&this[`_${o}`]&&Ct(this,l,!0,Boolean)}this._initialised=!0,"background"in r&&this._background&&this._reflectBackgroundVars(),this._update()}disconnectedCallback(){this._initialised=!1}attributeChangedCallback(e,t,i){if(t===i)return;let r=this.constructor._attrMap[e];r&&(this[`_${r.propName}`]=St(i,r.meta.type)),this._initialised&&this._update()}render(){return""}_update(){let e=this.render();if(typeof e=="string"){let t=[...this.shadowRoot.querySelectorAll("style")];this.shadowRoot.innerHTML=e;for(let i of t)this.shadowRoot.prepend(i)}else if(e instanceof DocumentFragment||e instanceof HTMLElement){let t=[...this.shadowRoot.querySelectorAll("style")];this.shadowRoot.replaceChildren(e);for(let i of t)this.shadowRoot.prepend(i)}}_setDynamicVars(e){if(!this.shadowRoot)return;let t=this.shadowRoot.getElementById("__dv"),i=Object.entries(e).filter(([,r])=>r!==void 0&&r!=="").map(([r,o])=>`${r}: ${o};`);if(i.length===0){t&&(t.textContent="");return}t||(t=document.createElement("style"),t.id="__dv",this.shadowRoot.prepend(t)),t.textContent=`:host { ${i.join(" ")} }`}emit(e,t={}){let i=new CustomEvent(e,{bubbles:!0,composed:!0,detail:t});return this.dispatchEvent(i),i}_reflectBackgroundVars(){let e=this._background;if(e){this.style.setProperty("--ui-background",n(e)),this.style.setProperty("--ui-background-token",e.trim().toLowerCase());let t=C(e);t?this.style.setProperty("--ui-background-hover",t):this.style.removeProperty("--ui-background-hover")}else this.style.removeProperty("--ui-background"),this.style.removeProperty("--ui-background-token"),this.style.removeProperty("--ui-background-hover")}};function M(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Mt(s,e){return e===Boolean?!!s:e===Number?Number(s):s==null?"":String(s)}function St(s,e){return e===Boolean?s!==null&&s!=="false":e===Number?s===null?0:Number(s):s??""}function Ct(s,e,t,i){i===Boolean?t?s.setAttribute(e,""):s.removeAttribute(e):t!=null&&t!==""?s.setAttribute(e,String(t)):s.removeAttribute(e)}function Bt(s){return s===Boolean?!1:s===Number?0:""}var B=class extends c{static properties={page:{type:Boolean,default:!1,reflect:!0},navOpen:{type:Boolean,default:!1,reflect:!0,attribute:"nav-open"},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      /* ============================================================ */
      /*  Application shell \u2014 CSS Grid layout                         */
      /*                                                               */
      /*  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           */
      /*  \u2502  banner                                        \u2502           */
      /*  \u2502  header                                        \u2502           */
      /*  \u2502  subheader                                     \u2502           */
      /*  \u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524           */
      /*  \u2502 nav-header   \u2502  main-header          \u2502 drawer  \u2502           */
      /*  \u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524         \u2502           */
      /*  \u2502 nav          \u2502  main                 \u2502         \u2502           */
      /*  \u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524         \u2502           */
      /*  \u2502 nav-footer   \u2502  main-footer          \u2502         \u2502           */
      /*  \u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524           */
      /*  \u2502  footer                                        \u2502           */
      /*  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           */
      /* ============================================================ */

      :host {
        display: grid;
        grid-template-columns: auto 1fr auto;
        grid-template-rows:
          auto            /* banner      */
          auto            /* header      */
          auto            /* subheader   */
          auto            /* nav-header / main-header */
          1fr             /* nav / main (fills remaining) */
          auto            /* nav-footer / main-footer */
          auto;           /* footer      */
        grid-template-areas:
          "banner       banner        banner"
          "header       header        header"
          "subheader    subheader     subheader"
          "nav-header   main-header   drawer"
          "nav          main          drawer"
          "nav-footer   main-footer   drawer"
          "footer       footer        footer";
        height: 100dvh;
        overflow-y: auto;

        /* Base typography & colours from theme tokens */
        font-family: var(--ui-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif);
        font-size: var(--_size, 1rem);
        line-height: 1.5;
        color: var(--_color, var(--ui-text-color, #111827));
        background: var(--_bg, var(--ui-bg, #fff));

        /* Smooth text rendering */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;

        /* Prevent horizontal overflow */
        overflow-x: hidden;
        box-sizing: border-box;
      }

      /* Page mode \u2014 normal scrolling document instead of fixed app shell. */
      :host([page]) {
        height: auto;
        min-height: 100dvh;
        overflow-y: visible;
      }

      /* ---- Grid area assignments ---- */
      ::slotted(ui-app-banner)      { grid-area: banner; }
      ::slotted(ui-app-header)      { grid-area: header; }
      ::slotted(ui-app-subheader)   { grid-area: subheader; }
      ::slotted(ui-app-drawer)      { grid-area: drawer; }
      ::slotted(ui-app-main-header) { grid-area: main-header; }
      ::slotted(ui-app-main)        { grid-area: main; }
      ::slotted(ui-app-main-footer) { grid-area: main-footer; }
      ::slotted(ui-app-nav-header)  { grid-area: nav-header; }
      ::slotted(ui-app-nav)         { grid-area: nav; }
      ::slotted(ui-app-nav-footer)  { grid-area: nav-footer; }
      ::slotted(ui-app-footer)      { grid-area: footer; }

      /* When drawer/nav aren't present, main area should span full width.
         This is handled naturally by CSS Grid \u2014 empty columns collapse to 0. */

      /* ---- Nav is hidden by default; toggle via nav-open attribute ---- */
      ::slotted(ui-app-nav),
      ::slotted(ui-app-nav-header),
      ::slotted(ui-app-nav-footer) {
        display: none;
      }

      :host([nav-open]) ::slotted(ui-app-nav),
      :host([nav-open]) ::slotted(ui-app-nav-header),
      :host([nav-open]) ::slotted(ui-app-nav-footer) {
        display: block;
      }

      /* ============================================================ */
      /*  Responsive \u2014 collapse to single-column on small screens     */
      /* ============================================================ */
      @media (max-width: 768px) {
        :host {
          grid-template-columns: 1fr;
          grid-template-rows:
            auto   /* banner      */
            auto   /* header      */
            auto   /* subheader   */
            auto   /* main-header */
            1fr    /* main        */
            auto   /* main-footer */
            auto;  /* footer      */
          grid-template-areas:
            "banner"
            "header"
            "subheader"
            "main-header"
            "main"
            "main-footer"
            "footer";
        }

        /* Hide side panels on mobile by default */
        ::slotted(ui-app-nav),
        ::slotted(ui-app-nav-header),
        ::slotted(ui-app-nav-footer),
        ::slotted(ui-app-drawer) {
          display: none;
        }

        /* When nav-open is toggled on mobile, show nav as full-width panel */
        :host([nav-open]) {
          grid-template-rows:
            auto   /* banner      */
            auto   /* header      */
            auto   /* subheader   */
            auto   /* nav-header  */
            1fr    /* nav         */
            auto   /* nav-footer  */
            auto;  /* footer      */
          grid-template-areas:
            "banner"
            "header"
            "subheader"
            "nav-header"
            "nav"
            "nav-footer"
            "footer";
        }

        /* Hide main content when nav is open on mobile */
        :host([nav-open]) ::slotted(ui-app-main),
        :host([nav-open]) ::slotted(ui-app-main-header),
        :host([nav-open]) ::slotted(ui-app-main-footer),
        :host([nav-open]) ::slotted(ui-app-drawer) {
          display: none;
        }
      }
    `}connectedCallback(){super.connectedCallback(),this._injectGlobalReset(),this._applyDynamicStyles()}_onPropertyChanged(e,t,i){(e==="background"||e==="color"||e==="size")&&this._applyDynamicStyles()}_applyDynamicStyles(){let e={};this.background&&(e["--_bg"]=n(this.background)),this.color&&(e["--_color"]=n(this.color)),this.size&&(e["--_size"]=d(this.size)),this._setDynamicVars(e)}disconnectedCallback(){if(super.disconnectedCallback(),typeof document<"u"&&!document.querySelector("ui-app")){let e=document.getElementById("ui-app-reset");e&&e.remove()}}render(){return"<slot></slot>"}_injectGlobalReset(){if(typeof document>"u"||document.getElementById("ui-app-reset"))return;if(!document.querySelector('meta[name="viewport"]')){let t=document.createElement("meta");t.name="viewport",t.content="width=device-width, initial-scale=1.0",document.head.appendChild(t)}let e=document.createElement("style");e.id="ui-app-reset",e.textContent=`
      *, *::before, *::after {
        box-sizing: border-box;
      }

      html {
        /* Prevent iOS text-size inflation */
        -webkit-text-size-adjust: 100%;
        text-size-adjust: 100%;
      }

      body {
        margin: 0;
        padding: 0;
      }

      img, picture, video, canvas, svg {
        display: block;
        max-width: 100%;
      }

      input, button, textarea, select {
        font: inherit;
      }

      p, h1, h2, h3, h4, h5, h6 {
        overflow-wrap: break-word;
      }
    `,document.head.appendChild(e)}};customElements.define("ui-app",B);var P=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: .5em;
        padding: 0.75em 1.5em;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        font-size: var(--_size, inherit);
        font-weight: 500;
        box-sizing: border-box;
        box-shadow: var(--_elevation, none);
      }

      @media (max-width: 768px) {
        :host { padding: 0.625em 1em; }
      }
    `}connectedCallback(){super.connectedCallback(),this.setAttribute("role","banner")}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=b(this.elevation);if(t&&(e["--_elevation"]=t),this.size){let i=d(this.size);i&&(e["--_size"]=i)}this._setDynamicVars(e)}_update(){this._applyColors(),super._update()}render(){return"<slot></slot>"}};customElements.define("ui-app-banner",P);var O=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        align-items: center;
        gap: 1em;
        padding: 0.75em 1.5em;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        font-size: var(--_size, 1.25em);
        font-weight: 600;
        min-height: 3em;
        box-sizing: border-box;
        border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
        box-shadow: var(--_elevation, none);
      }

      @media (max-width: 768px) {
        :host { padding: 0.625em 1em; font-size: var(--_size, 1.125em); }
      }
    `}connectedCallback(){super.connectedCallback(),this.setAttribute("role","heading"),this.setAttribute("aria-level","1")}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=b(this.elevation);if(t&&(e["--_elevation"]=t),this.size){let i=d(this.size);i&&(e["--_size"]=i)}this._setDynamicVars(e)}_update(){this._applyColors(),super._update()}render(){return"<slot></slot>"}};customElements.define("ui-app-header",O);var H=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        align-items: center;
        gap: 1em;
        padding: 0.5em 1.5em;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        font-size: var(--_size, 0.875em);
        font-weight: 500;
        min-height: 2.5em;
        box-sizing: border-box;
        border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
        box-shadow: var(--_elevation, none);
      }

      @media (max-width: 768px) {
        :host {
          padding: 0.5em 1em;
          flex-wrap: wrap;
        }
      }
    `}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=b(this.elevation);if(t&&(e["--_elevation"]=t),this.size){let i=d(this.size);i&&(e["--_size"]=i)}this._setDynamicVars(e)}_update(){this._applyColors(),super._update()}render(){return"<slot></slot>"}};customElements.define("ui-app-subheader",H);var j=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},width:{type:String,default:"16rem",reflect:!0},elevation:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},open:{type:Boolean,default:!0,reflect:!0}};static styles(){return`
      :host {
        display: flex;
        flex-direction: column;
        width: var(--_width, 16rem);
        min-height: 100%;
        padding: 1em;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        overflow-y: auto;
        border-left: 1px solid var(--ui-border-color, #e5e7eb);
        box-shadow: var(--_elevation, none);
        box-sizing: border-box;
      }

      :host(:not([open])) {
        display: none;
      }

      @media (max-width: 768px) {
        :host { border-left: none; width: 100%; }
      }
    `}_applyStyles(){let e={};this.width&&(e["--_width"]=this.width),this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=b(this.elevation);if(t&&(e["--_elevation"]=t),this.size){let i=d(this.size);i&&(e["--_size"]=i)}this._setDynamicVars(e)}_update(){this._applyStyles(),super._update()}render(){return"<slot></slot>"}};customElements.define("ui-app-drawer",j);var F=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        align-items: center;
        gap: 1em;
        padding: 0.75em 1.5em;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        font-size: var(--_size, 1.125em);
        font-weight: 600;
        min-height: 2.75em;
        box-sizing: border-box;
        border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
        box-shadow: var(--_elevation, none);
      }

      @media (max-width: 768px) {
        :host { padding: 0.625em 1em; font-size: var(--_size, 1em); }
      }
    `}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=b(this.elevation);if(t&&(e["--_elevation"]=t),this.size){let i=d(this.size);i&&(e["--_size"]=i)}this._setDynamicVars(e)}_update(){this._applyColors(),super._update()}render(){return"<slot></slot>"}};customElements.define("ui-app-main-header",F);var V=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: block;
        padding: 1.5em;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        font-size: var(--_size, inherit);
        overflow-y: auto;
        min-height: 100%;
        box-sizing: border-box;
        box-shadow: var(--_elevation, none);
      }

      @media (max-width: 768px) {
        :host { padding: 1em; }
      }
    `}connectedCallback(){super.connectedCallback(),this.setAttribute("role","main")}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=b(this.elevation);if(t&&(e["--_elevation"]=t),this.size){let i=d(this.size);i&&(e["--_size"]=i)}this._setDynamicVars(e)}_update(){this._applyColors(),super._update()}render(){return"<slot></slot>"}};customElements.define("ui-app-main",V);var N=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        align-items: center;
        gap: 1em;
        padding: 0.5em 1.5em;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        font-size: var(--_size, 0.875em);
        min-height: 2.25em;
        box-sizing: border-box;
        border-top: 1px solid var(--ui-border-color, #e5e7eb);
        box-shadow: var(--_elevation, none);
      }

      @media (max-width: 768px) {
        :host { padding: 0.5em 1em; }
      }
    `}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=b(this.elevation);if(t&&(e["--_elevation"]=t),this.size){let i=d(this.size);i&&(e["--_size"]=i)}this._setDynamicVars(e)}_update(){this._applyColors(),super._update()}render(){return"<slot></slot>"}};customElements.define("ui-app-main-footer",N);var U=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        align-items: center;
        gap: 1em;
        padding: 0.75em 1em;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        font-size: var(--_size, 0.875em);
        font-weight: 600;
        min-height: 2.75em;
        box-sizing: border-box;
        border-right: 1px solid var(--ui-border-color, #e5e7eb);
        border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
        box-shadow: var(--_elevation, none);
      }

      @media (max-width: 768px) {
        :host { border-right: none; }
      }
    `}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=b(this.elevation);if(t&&(e["--_elevation"]=t),this.size){let i=d(this.size);i&&(e["--_size"]=i)}this._setDynamicVars(e)}_update(){this._applyColors(),super._update()}render(){return"<slot></slot>"}};customElements.define("ui-app-nav-header",U);var K=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},width:{type:String,default:"16rem",reflect:!0},elevation:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},channel:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        flex-direction: column;
        width: var(--_width, 16rem);
        min-height: 100%;
        padding: 1em;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        font-size: var(--_size, inherit);
        overflow-y: auto;
        border-right: 1px solid var(--ui-border-color, #e5e7eb);
        box-shadow: var(--_elevation, none);
        box-sizing: border-box;
      }

      @media (max-width: 768px) {
        :host { border-right: none; width: 100%; }
      }
    `}connectedCallback(){super.connectedCallback(),this.setAttribute("role","complementary"),this._onChannelEvent=()=>this._toggleNav(),this.channel&&document.addEventListener(this.channel,this._onChannelEvent)}disconnectedCallback(){super.disconnectedCallback(),this.channel&&document.removeEventListener(this.channel,this._onChannelEvent)}_onPropertyChanged(e,t,i){e==="channel"&&(t&&document.removeEventListener(t,this._onChannelEvent),i&&document.addEventListener(i,this._onChannelEvent))}_toggleNav(){let e=this.closest("ui-app");e&&(e.hasAttribute("nav-open")?e.removeAttribute("nav-open"):e.setAttribute("nav-open",""))}_applyStyles(){let e={};this.width&&(e["--_width"]=this.width),this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=b(this.elevation);if(t&&(e["--_elevation"]=t),this.size){let i=d(this.size);i&&(e["--_size"]=i)}this._setDynamicVars(e)}_update(){this._applyStyles(),super._update()}render(){return"<slot></slot>"}};customElements.define("ui-app-nav",K);var Y=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        align-items: center;
        gap: 1em;
        padding: 0.5em 1em;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        font-size: var(--_size, 0.8125em);
        min-height: 2.25em;
        box-sizing: border-box;
        border-right: 1px solid var(--ui-border-color, #e5e7eb);
        border-top: 1px solid var(--ui-border-color, #e5e7eb);
        box-shadow: var(--_elevation, none);
      }

      @media (max-width: 768px) {
        :host { border-right: none; }
      }
    `}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=b(this.elevation);if(t&&(e["--_elevation"]=t),this.size){let i=d(this.size);i&&(e["--_size"]=i)}this._setDynamicVars(e)}_update(){this._applyColors(),super._update()}render(){return"<slot></slot>"}};customElements.define("ui-app-nav-footer",Y);var W=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        align-items: center;
        gap: 1em;
        padding: 0.75em 1.5em;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        font-size: var(--_size, 0.875em);
        min-height: 2.5em;
        box-sizing: border-box;
        box-shadow: var(--_elevation, none);
      }

      @media (max-width: 768px) {
        :host { padding: 0.625em 1em; }
      }
    `}connectedCallback(){super.connectedCallback(),this.setAttribute("role","contentinfo")}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=b(this.elevation);if(t&&(e["--_elevation"]=t),this.size){let i=d(this.size);i&&(e["--_size"]=i)}this._setDynamicVars(e)}_update(){this._applyColors(),super._update()}render(){return"<slot></slot>"}};customElements.define("ui-app-footer",W);var G=class s extends c{static properties={src:{type:String,default:"",reflect:!0},initials:{type:String,default:"",reflect:!0},alt:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},circle:{type:Boolean,default:!0,reflect:!0},square:{type:Boolean,default:!1,reflect:!0},status:{type:String,default:"",reflect:!0},statusColor:{type:String,default:"",reflect:!0,attribute:"status-color"}};static _statusColors={online:"#22c55e",offline:"#9ca3af",busy:"#ef4444",away:"#f59e0b"};static styles(){return`
      :host {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        width: 2.5em;
        height: 2.5em;
        border-radius: 50%;
        overflow: visible;
        box-sizing: border-box;
        vertical-align: middle;
        background: var(--_bg, inherit);
        color: var(--_fg, inherit);
        font-weight: 600;
        font-size: var(--_size, 1em);
        user-select: none;
        flex-shrink: 0;
      }
      :host([square]) {
        border-radius: var(--ui-radius, 0.375em);
      }

      .inner {
        width: 100%;
        height: 100%;
        border-radius: inherit;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .initials {
        font-size: 0.4em;
        line-height: 1;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .fallback {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
      }
      .fallback svg {
        width: 60%;
        height: 60%;
        fill: currentColor;
        opacity: 0.7;
      }

      .status-dot {
        position: absolute;
        bottom: 0;
        right: 0;
        width: 0.65em;
        height: 0.65em;
        border-radius: 50%;
        border: 0.12em solid var(--ui-bg, #fff);
        box-sizing: border-box;
        background: var(--_status-color, #9ca3af);
      }
    `}render(){let e;if(this.src){let i=r=>(r||"").replace(/&/g,"&amp;").replace(/"/g,"&quot;");e=`<img src="${i(this.src)}" alt="${i(this.alt||this.initials)}" />`}else this.initials?e=`<span class="initials">${this._esc(this.initials)}</span>`:e=`<span class="fallback"><slot>
        <svg viewBox="0 0 24 24"><path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v1.2c0 .7.5 1.2 1.2 1.2h16.8c.7 0 1.2-.5 1.2-1.2v-1.2c0-3.2-6.4-4.8-9.6-4.8z"/></svg>
      </slot></span>`;let t=this.status?'<span class="status-dot" part="status"></span>':"";return`<div class="inner" part="inner">${e}</div>${t}`}_esc(e){return(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;")}connectedCallback(){super.connectedCallback(),this.hasAttribute("role")||this.setAttribute("role","img"),this.hasAttribute("aria-label")||this.setAttribute("aria-label",this.alt||this.initials||"avatar"),this._applyStyles()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyStyles()}_applyStyles(){let e={},t=d(this.size);if(t&&(e["--_size"]=t),this.background&&(e["--_bg"]=n(this.background)||this.background),this.color?e["--_fg"]=n(this.color)||this.color:this.background&&(e["--_fg"]=p(this.background)),this.status){let i=this.statusColor?n(this.statusColor)||this.statusColor:s._statusColors[this.status]||"#9ca3af";e["--_status-color"]=i}this._setDynamicVars(e)}};customElements.define("ui-avatar",G);var X=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},pill:{type:Boolean,default:!1,reflect:!0},outline:{type:Boolean,default:!1,reflect:!0},circle:{type:Boolean,default:!1,reflect:!0},pulse:{type:Boolean,default:!1,reflect:!0},bounce:{type:Boolean,default:!1,reflect:!0},shake:{type:Boolean,default:!1,reflect:!0},ping:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        line-height: 1;
        white-space: nowrap;
        vertical-align: middle;
        box-sizing: border-box;

        padding: 0.25em 0.55em;
        border-radius: var(--ui-radius, 0.25em);
        border: 0.1em solid transparent;

        background: var(--_bg, inherit);
        color: var(--_fg, inherit);
        border-color: var(--_border, transparent);

        transition: background 0.15s ease, color 0.15s ease, border-color 0.15s ease;
      }

      :host([pill]) {
        border-radius: 9999px;
      }

      :host([circle]) {
        border-radius: 50%;
        padding: 0.25em;
        min-width: 1.6em;
        min-height: 1.6em;
      }

      /* Outlined variant */
      :host([outline]) {
        background: transparent;
      }

      /* Pulse animation \u2014 glow radiates outward */
      @keyframes ui-badge-pulse {
        0%   { box-shadow: 0 0 0 0 var(--_pulse-color); }
        70%  { box-shadow: 0 0 0 0.55em transparent; }
        100% { box-shadow: 0 0 0 0 transparent; }
      }

      :host([pulse]) {
        animation: ui-badge-pulse 1.5s ease-in-out infinite;
      }

      /* Bounce animation \u2014 gentle vertical hop */
      @keyframes ui-badge-bounce {
        0%, 100% { transform: translateY(0); }
        30%      { transform: translateY(-0.35em); }
        50%      { transform: translateY(0.1em); }
        70%      { transform: translateY(-0.15em); }
      }

      :host([bounce]) {
        animation: ui-badge-bounce 1s ease-in-out infinite;
      }

      /* Shake animation \u2014 quick horizontal wiggle */
      @keyframes ui-badge-shake {
        0%, 100% { transform: translateX(0); }
        15%      { transform: translateX(-0.2em); }
        30%      { transform: translateX(0.2em); }
        45%      { transform: translateX(-0.15em); }
        60%      { transform: translateX(0.15em); }
        75%      { transform: translateX(-0.05em); }
      }

      :host([shake]) {
        animation: ui-badge-shake 0.6s ease-in-out infinite;
      }

      /* Ping animation \u2014 expanding ring beacon */
      :host([ping]) {
        position: relative;
        overflow: visible;
      }

      slot {
        display: inline;
      }

      /* Ping ring \u2014 rendered as a sibling span to avoid ::after limitations */
      .ping-ring {
        display: none;
        position: absolute;
        inset: 0;
        border-radius: inherit;
        background: var(--_bg);
        opacity: 0.75;
        animation: ui-badge-ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite;
        pointer-events: none;
      }

      :host([ping]) .ping-ring {
        display: block;
      }

      @keyframes ui-badge-ping {
        0%   { transform: scale(1); opacity: 0.75; }
        75%, 100% { transform: scale(1.8); opacity: 0; }
      }
    `}render(){return'<span class="ping-ring"></span><slot></slot>'}connectedCallback(){super.connectedCallback(),this._applyStyles()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyStyles()}_applyStyles(){let e={},t=this.outline;if(this.background){let r=n(this.background);e["--_bg"]=t?"transparent":r,e["--_border"]=t?r:"transparent",e["--_pulse-color"]=r,this.color?e["--_fg"]=n(this.color):t?e["--_fg"]=r:e["--_fg"]=p(this.background)}else this.color&&(e["--_fg"]=n(this.color));let i=d(this.size);i&&(e["font-size"]=i),this._setDynamicVars(e)}};customElements.define("ui-badge",X);var J=class extends c{static properties={separator:{type:String,default:"/",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 0.4em;
        padding: 0.5em 0;
        background: var(--_bg, transparent);
        color: var(--_color, inherit);
        line-height: 1.5;
        box-sizing: border-box;
      }

      ::slotted(ui-breadcrumb-item:not(:last-child))::after {
        /* Separator injected via item component */
      }
    `}connectedCallback(){super.connectedCallback(),this.setAttribute("role","navigation"),this.setAttribute("aria-label","Breadcrumb"),this._applySeparator(),this._slotObserver=new MutationObserver(()=>this._applySeparator()),this._slotObserver.observe(this,{childList:!0})}disconnectedCallback(){super.disconnectedCallback(),this._slotObserver&&(this._slotObserver.disconnect(),this._slotObserver=null)}_update(){this._applyStyles(),this._applySeparator(),super._update()}_applyStyles(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}_applySeparator(){let e=this.querySelectorAll("ui-breadcrumb-item"),t=this.separator||"/";e.forEach((i,r)=>{i._separator=r<e.length-1?t:"",i._updateSeparator&&i._updateSeparator()})}render(){return"<slot></slot>"}};customElements.define("ui-breadcrumb",J);var Z=class extends c{static properties={href:{type:String,default:"",reflect:!0},target:{type:String,default:"",reflect:!0},active:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: inline-flex;
        align-items: center;
        gap: 0.4em;
        white-space: nowrap;
      }

      a {
        color: var(--_link-color, var(--ui-blue-600, #2563eb));
        text-decoration: none;
        cursor: pointer;
      }

      a:hover {
        text-decoration: underline;
      }

      .label {
        color: inherit;
      }

      :host([active]) .label {
        font-weight: 600;
        color: var(--ui-text-color, #111827);
      }

      .sep {
        color: var(--ui-text-muted, #9ca3af);
        user-select: none;
        pointer-events: none;
      }
    `}connectedCallback(){super.connectedCallback(),this.active&&this.setAttribute("aria-current","page")}_update(){this.active?this.setAttribute("aria-current","page"):this.removeAttribute("aria-current"),super._update()}_updateSeparator(){let e=this.shadowRoot?.querySelector(".sep");e&&(e.textContent=this._separator||"")}render(){let e=this._separator||"";if(this.href&&!this.active){let t=this.target?` target="${this.target}"`:"";return`<a href="${this.href}"${t}><slot></slot></a>${e?`<span class="sep">${e}</span>`:""}`}return`<span class="label"><slot></slot></span>${e?`<span class="sep">${e}</span>`:""}`}};customElements.define("ui-breadcrumb-item",Z);var Q=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},pill:{type:Boolean,default:!1,reflect:!0},circle:{type:Boolean,default:!1,reflect:!0},outline:{type:Boolean,default:!1,reflect:!0},flat:{type:Boolean,default:!1,reflect:!0},link:{type:Boolean,default:!1,reflect:!0},plain:{type:Boolean,default:!1,reflect:!0},href:{type:String,default:"",reflect:!0},target:{type:String,default:"",reflect:!0},channel:{type:String,default:"",reflect:!0},type:{type:String,default:"button",reflect:!0}};static styles(){return`
      :host {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5em;
        cursor: pointer;
        font-family: inherit;
        font-weight: 500;
        border-radius: var(--ui-button-radius, 0.375em);
        transition: background-color 0.15s ease, box-shadow 0.15s ease, transform 0.1s ease, filter 0.15s ease;
        box-sizing: border-box;
        white-space: nowrap;
        user-select: none;
        line-height: 1;
        padding: 0.5em 1em;
        text-decoration: none;
        background: var(--_bg, transparent);
        color: var(--_color, inherit);
        -webkit-tap-highlight-color: transparent;
      }

      :host(:hover) {
        background: var(--_bg-hover, var(--_bg, transparent));
        filter: var(--_hover-filter, brightness(0.9));
      }

      :host(:focus-visible) {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: 0.125em;
      }

      :host(:active:not([disabled])) {
        transform: scale(0.97);
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.5;
      }

      /* ---- Size ---- */
      /* font-size is set dynamically on :host via resolveSize(). */

      /* ---- Pill ---- */
      :host([pill]) {
        border-radius: 9999px;
      }

      /* ---- Circle ---- */
      :host([circle]) {
        padding: 0.5em;
        border-radius: 50%;
        aspect-ratio: 1;
        justify-content: center;
      }

      /* ---- Outline ---- */
      :host([outline]) {
        background: transparent;
        border: 0.1em solid var(--_outline-color, currentColor);
        color: var(--_outline-color, currentColor);
      }
      :host([outline]:hover) {
        background: var(--_bg, transparent);
        color: var(--_color, inherit);
        filter: none;
      }

      /* ---- Flat (ghost) ---- */
      :host([flat]) {
        position: relative;
        background: transparent;
        color: var(--_text-btn-color, inherit);
      }
      :host([flat])::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: inherit;
        background: var(--_bg, currentColor);
        opacity: 0;
        transition: opacity 0.15s ease;
        z-index: 0;
      }
      :host([flat]:hover) {
        background: transparent;
        filter: none;
      }
      :host([flat]:hover)::before {
        opacity: 0.1;
      }
      ::slotted(*) {
        position: relative;
        z-index: 1;
      }

      /* ---- Link ---- */
      :host([link]) {
        background: transparent;
        color: var(--_link-color, inherit);
        padding: 0;
        text-decoration: none;
        border-radius: 0;
      }
      :host([link]:hover) {
        background: transparent;
        text-decoration: underline;
        filter: none;
      }

      /* ---- Plain (no effects) ---- */
      :host([plain]) {
        background: transparent;
        color: inherit;
        padding: 0;
        border: none;
        border-radius: 0;
        filter: none;
        transform: none;
        transition: none;
      }
      :host([plain]:hover),
      :host([plain]:active) {
        background: transparent;
        filter: none;
        transform: none;
      }
    `}constructor(){super(),this._onClick=this._onClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this._onClick),this.addEventListener("keydown",this._onKeyDown),this.hasAttribute("role")||this.setAttribute("role","button"),this._updateDisabledState()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this._onClick),this.removeEventListener("keydown",this._onKeyDown)}_applyStyles(){let e={"--_bg":"","--_bg-hover":"","--_hover-filter":"","--_color":"","--_outline-color":"","--_text-btn-color":"","--_link-color":""},t=d(this.size);t&&(e["font-size"]=t);let i=n(this.background);if(i){e["--_bg"]=i;let o=C(this.background);o?e["--_bg-hover"]=o:e["--_hover-filter"]="brightness(0.9)"}else getComputedStyle(this).getPropertyValue("--ui-background").trim()&&(e["--_bg"]="var(--ui-background)",e["--_bg-hover"]="var(--ui-background-hover, var(--ui-background))",e["--_hover-filter"]="none");if(this.outline||this.flat||this.link){let o=this.hasAttribute("background");if(o){let a=n(this.color||this.background);e["--_outline-color"]=a,e["--_text-btn-color"]=a,e["--_link-color"]=a}else if(this.color){let a=n(this.color);e["--_outline-color"]=a,e["--_text-btn-color"]=a,e["--_link-color"]=a}else e["--_text-btn-color"]="inherit",e["--_link-color"]="inherit",e["--_outline-color"]="currentColor";this.color?e["--_color"]=n(this.color):o&&this.background&&(e["--_color"]=p(this.background))}else this.color?e["--_color"]=n(this.color):this.background&&(e["--_color"]=p(this.background));this._setDynamicVars(e)}_updateDisabledState(){this.disabled?(this.removeAttribute("tabindex"),this.setAttribute("aria-disabled","true")):(this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.removeAttribute("aria-disabled"))}_update(){this._applyStyles(),this._updateDisabledState(),super._update()}render(){return"<slot></slot>"}_onClick(e){if(this.disabled){e.preventDefault(),e.stopImmediatePropagation();return}this.href?this.channel?document.dispatchEvent(new CustomEvent(this.channel,{bubbles:!1,detail:{src:this.href,button:this}})):(this.target||"_self")==="_blank"?window.open(this.href,"_blank","noopener"):window.location.href=this.href:this.channel&&document.dispatchEvent(new CustomEvent(this.channel,{bubbles:!1,detail:{button:this}})),this.emit("ui-click")}_onKeyDown(e){this.disabled||(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this.click())}};customElements.define("ui-button",Q);var ee=class extends c{static properties={size:{type:String,default:"",reflect:!0},vertical:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: inline-flex;
        flex-direction: row;
        box-sizing: border-box;
      }

      :host([vertical]) {
        flex-direction: column;
      }

      /* \u2500\u2500 Horizontal: merge radii \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      ::slotted(ui-button) {
        --ui-button-radius: 0;
        margin: 0;
      }

      /* First child keeps left radii */
      ::slotted(ui-button:first-child) {
        --ui-button-radius: 0.375em 0 0 0.375em;
      }

      /* Last child keeps right radii */
      ::slotted(ui-button:last-child) {
        --ui-button-radius: 0 0.375em 0.375em 0;
      }

      /* Solo child \u2014 full radii */
      ::slotted(ui-button:only-child) {
        --ui-button-radius: 0.375em;
      }

      /* Negative margin to overlap outline borders */
      ::slotted(ui-button:not(:first-child)) {
        margin-left: -1px;
      }

      /* Hovered / focused item on top so border isn't clipped */
      ::slotted(ui-button:hover),
      ::slotted(ui-button:focus-within) {
        z-index: 1;
      }

      /* \u2500\u2500 Vertical: override directions \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      :host([vertical]) ::slotted(ui-button) {
        --ui-button-radius: 0;
        margin: 0;
      }

      :host([vertical]) ::slotted(ui-button:first-child) {
        --ui-button-radius: 0.375em 0.375em 0 0;
      }

      :host([vertical]) ::slotted(ui-button:last-child) {
        --ui-button-radius: 0 0 0.375em 0.375em;
      }

      :host([vertical]) ::slotted(ui-button:only-child) {
        --ui-button-radius: 0.375em;
      }

      :host([vertical]) ::slotted(ui-button:not(:first-child)) {
        margin-left: 0;
        margin-top: -1px;
      }
    `}connectedCallback(){super.connectedCallback(),this.setAttribute("role","group")}_update(){this._applyStyles(),super._update()}_applyStyles(){let e={},t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}render(){return"<slot></slot>"}};customElements.define("ui-button-group",ee);var te=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},dismissible:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.6;
        box-sizing: border-box;

        padding: 1em 1.25em;
        border-radius: var(--ui-radius, 0.25em);

        background: var(--_bg, inherit);
        color: var(--_fg, inherit);
        box-shadow: var(--_elevation, none);

        position: relative;
      }

      :host([elevation]) {
        border: 1px solid var(--ui-border-color, #e5e7eb);
      }

      /* Dismiss button */
      button {
        display: none;
        position: absolute;
        top: 0.5em;
        right: 0.5em;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1em;
        line-height: 1;
        width: 1.6em;
        height: 1.6em;
        padding: 0;
        border-radius: 50%;
        color: var(--_fg, inherit);
        opacity: 0.5;
        transition: opacity 0.15s ease, background 0.15s ease;
      }

      button:hover {
        opacity: 1;
        background: rgba(0, 0, 0, 0.08);
      }

      button:active {
        background: rgba(0, 0, 0, 0.15);
      }

      button:focus-visible {
        opacity: 1;
        background: rgba(0, 0, 0, 0.08);
        outline: 2px solid var(--ui-focus-ring, #3b82f6);
        outline-offset: 1px;
      }

      :host([dismissible]) button {
        display: block;
      }

      :host([dismissible]) {
        padding-right: 2.5em;
      }

      slot {
        display: block;
      }
    `}render(){return'<button part="dismiss" aria-label="Dismiss">\u2715</button><slot></slot>'}connectedCallback(){super.connectedCallback(),this.setAttribute("role","status")}_update(){super._update(),this._attachListeners(),this._applyStyles()}_attachListeners(){let e=this.shadowRoot.querySelector("button");e&&e.addEventListener("click",()=>{this.emit("ui-dismiss"),this.remove()})}_applyStyles(){let e={};this.background&&(e["--_bg"]=n(this.background)),this.color?e["--_fg"]=n(this.color):this.background&&(e["--_fg"]=p(this.background));let t=d(this.size);t&&(e["font-size"]=t);let i=b(this.elevation);i&&(e["--_elevation"]=i),this._setDynamicVars(e)}};customElements.define("ui-callout",te);var ie=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},outline:{type:Boolean,default:!1,reflect:!0},flat:{type:Boolean,default:!1,reflect:!0},clickable:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: grid;
        grid-template-rows: auto auto 1fr auto;
        grid-template-areas:
          "header"
          "media"
          "body"
          "footer";
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        border-radius: var(--ui-radius, 0.5em);
        box-shadow: var(--_elevation, 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06));
        overflow: hidden;
        box-sizing: border-box;
        line-height: 1.5;
      }

      /* Elevation \u2014 adds border alongside shadow */
      :host([elevation]) {
        border: 1px solid var(--ui-border-color, #e5e7eb);
      }

      /* Outline style \u2014 border, no shadow */
      :host([outline]) {
        box-shadow: none;
        border: 1px solid var(--ui-border-color, #e5e7eb);
      }

      /* Flat style \u2014 no shadow, no border */
      :host([flat]) {
        box-shadow: none;
        border: none;
      }

      /* Clickable \u2014 interactive lift */
      :host([clickable]) {
        cursor: pointer;
        transition: box-shadow 0.2s ease, transform 0.2s ease;
      }

      :host([clickable]:hover) {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }

      :host([clickable]:active) {
        transform: translateY(0);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      :host([clickable][outline]:hover) {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      /* Grid area assignments */
      ::slotted(ui-card-header) { grid-area: header; }
      ::slotted(ui-card-media)  { grid-area: media; }
      ::slotted(ui-card-body)   { grid-area: body; }
      ::slotted(ui-card-footer) { grid-area: footer; }
    `}connectedCallback(){super.connectedCallback(),this.setAttribute("role","article"),this._applyStyles(),this.clickable&&(this.setAttribute("tabindex","0"),this._onClick=()=>this.emit("ui-click"),this._onKeyDown=e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this.emit("ui-click"))},this.addEventListener("click",this._onClick),this.addEventListener("keydown",this._onKeyDown))}disconnectedCallback(){super.disconnectedCallback(),this._onClick&&this.removeEventListener("click",this._onClick),this._onKeyDown&&this.removeEventListener("keydown",this._onKeyDown)}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyStyles()}_applyStyles(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=d(this.size);t&&(e["font-size"]=t);let i=b(this.elevation);i&&(e["--_elevation"]=i),this._setDynamicVars(e)}render(){return"<slot></slot>"}};customElements.define("ui-card",ie);var re=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},border:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: flex;
        align-items: center;
        gap: 0.75em;
        padding: 1em 1.25em;
        font-weight: 600;
        font-size: 1.1em;
        background: var(--_bg, transparent);
        color: var(--_color, inherit);
        box-sizing: border-box;
      }

      :host([border]) {
        border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
      }
    `}connectedCallback(){super.connectedCallback(),this._applyColors()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyColors()}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}render(){return"<slot></slot>"}};customElements.define("ui-card-header",re);var oe=class extends c{static properties={height:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: block;
        overflow: hidden;
        line-height: 0;
        box-sizing: border-box;
      }

      ::slotted(img),
      ::slotted(video),
      ::slotted(picture) {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    `}connectedCallback(){super.connectedCallback(),this._applyHeight()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyHeight()}_applyHeight(){let e={};this.height&&(e.height=this.height),this._setDynamicVars(e)}render(){return"<slot></slot>"}};customElements.define("ui-card-media",oe);var se=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: block;
        padding: 1em 1.25em;
        background: var(--_bg, transparent);
        color: var(--_color, inherit);
        box-sizing: border-box;
      }
    `}connectedCallback(){super.connectedCallback(),this._applyColors()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyColors()}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}render(){return"<slot></slot>"}};customElements.define("ui-card-body",se);var ae=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        align-items: center;
        gap: 0.5em;
        padding: 0.75em 1.25em;
        border-top: 1px solid var(--ui-border-color, #e5e7eb);
        background: var(--_bg, transparent);
        color: var(--_color, inherit);
        box-sizing: border-box;
      }
    `}connectedCallback(){super.connectedCallback(),this._applyColors()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyColors()}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}render(){return"<slot></slot>"}};customElements.define("ui-card-footer",ae);var Pt="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js",ne=class s extends c{static properties={height:{type:String,default:"8em",reflect:!0},src:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},noAnimate:{type:Boolean,default:!1,reflect:!0,attribute:"no-animate"}};static styles(){return`
      :host {
        display: block;
        height: var(--_height, 8em);
        background: var(--_bg, transparent);
        color: var(--_fg, inherit);
        border-radius: var(--ui-radius, 0.375em);
        overflow: hidden;
      }

      .frame {
        position: relative;
        width: 100%;
        height: 100%;
      }

      canvas {
        display: block;
        width: 100% !important;
        height: 100% !important;
      }

      .overlay {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: inherit;
        font-size: 0.85em;
        color: var(--_fg, var(--ui-text-muted, #6b7280));
        pointer-events: none;
      }
      .overlay.hidden { display: none; }

      .error-text { color: var(--ui-red-500, #ef4444); }

      /* simple spinner */
      .spinner {
        width: 1.5em;
        height: 1.5em;
        border: 2px solid var(--ui-border-color, #d1d5db);
        border-top-color: var(--ui-indigo-500, #6366f1);
        border-radius: 50%;
        animation: _spin 0.6s linear infinite;
      }
      @keyframes _spin { to { transform: rotate(360deg); } }

      .empty {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        font-family: inherit;
        font-size: 0.9em;
        color: var(--_fg, var(--ui-text-muted, #6b7280));
        opacity: 0.6;
      }
    `}static _chartJsPromise=null;constructor(){super(),this._config=null,this._chart=null,this._loadedSrc="",this._configFromSrc=null,this._srcRequestId=0,this._refreshSeq=0,this._refreshTimer=null}set config(e){this._config=e&&typeof e=="object"?e:null,this._initialised&&this._scheduleRefresh()}get config(){return this._config}get chart(){return this._chart}connectedCallback(){super.connectedCallback()}disconnectedCallback(){clearTimeout(this._refreshTimer),this._destroyChart(),super.disconnectedCallback()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),e==="src"&&t!==i&&(this._loadedSrc="",this._configFromSrc=null)}_update(){if(this._chart&&this.shadowRoot?.querySelector("canvas")){this._applyStyles(),this._scheduleRefresh();return}super._update(),this._applyStyles(),this._scheduleRefresh()}_applyStyles(){let e={};e["--_height"]=this._height||"8em",this.background&&(e["--_bg"]=n(this.background)),this.color&&(e["--_fg"]=n(this.color));let t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}_scheduleRefresh(){clearTimeout(this._refreshTimer);let e=this._chart?200:0;this._refreshTimer=setTimeout(()=>this._doRefresh(),e)}async _doRefresh(){let e=++this._refreshSeq,t=this.shadowRoot?.querySelector("canvas");if(!t)return this._src||this._config?(super._update(),this._applyStyles(),this._doRefresh()):void 0;this._setOverlay("loading");try{let i=await this._resolveConfig();if(e!==this._refreshSeq)return;if(!i){this._destroyChart(),this._setOverlay("empty");return}if(await s._loadChartJs(),e!==this._refreshSeq)return;if(this._noAnimate&&(i.options=i.options||{},i.options.animation=!1),this._chart&&this._chart.config.type===i.type)this._chart.data=i.data,this._chart.options=i.options||{},this._chart.update();else{this._destroyChart();let r=document.createElement("canvas");r.setAttribute("part","canvas"),t.replaceWith(r),t=r;let o=t.getContext("2d");if(!o)return;this._chart=new window.Chart(o,i)}this._setOverlay("ready"),this.emit("ui-load")}catch(i){if(e!==this._refreshSeq)return;this._destroyChart(),this._setOverlay("error"),this.emit("ui-error",{message:i.message||"Chart render failed"}),console.warn("[ui-chart] Chart render failed:",i)}}async _resolveConfig(){let e=await this._loadConfigFromSrc();return e?this._normalizeConfig(e):this._config?this._normalizeConfig(this._config):null}async _loadConfigFromSrc(){let e=(this._src||"").trim();if(!e)return null;if(this._loadedSrc===e&&this._configFromSrc)return this._configFromSrc;let t=++this._srcRequestId,i=await fetch(e,{cache:"no-cache"});if(!i.ok)throw new Error(`Failed to load chart config: ${e} (${i.status})`);let r=await i.json();return t!==this._srcRequestId?null:(this._loadedSrc=e,this._configFromSrc=r,r)}_deepClone(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(i=>this._deepClone(i));let t={};for(let i of Object.keys(e))t[i]=typeof e[i]=="function"?e[i]:this._deepClone(e[i]);return t}_normalizeConfig(e){let t=this._deepClone(e),i=t.options||{};return i.responsive=i.responsive??!0,i.maintainAspectRatio=i.maintainAspectRatio??!1,{...t,type:t.type||"line",data:t.data||{},options:i}}_destroyChart(){this._chart&&(this._chart.destroy(),this._chart=null)}_setOverlay(e){let t=this.shadowRoot?.querySelector(".overlay-loading"),i=this.shadowRoot?.querySelector(".overlay-error");t&&t.classList.toggle("hidden",e!=="loading"),i&&i.classList.toggle("hidden",e!=="error")}static _loadChartJs(){return window.Chart?Promise.resolve(window.Chart):(s._chartJsPromise||(s._chartJsPromise=new Promise((e,t)=>{let i=document.querySelector("script[data-ui-chartjs]");if(i){if(i.dataset.loaded==="true")return e(window.Chart);i.addEventListener("load",()=>e(window.Chart)),i.addEventListener("error",t);return}let r=document.createElement("script");r.src=Pt,r.async=!0,r.dataset.uiChartjs="true",r.addEventListener("load",()=>{r.dataset.loaded="true",e(window.Chart)}),r.addEventListener("error",()=>{s._chartJsPromise=null,t(new Error("Chart.js CDN load failed"))}),document.head.appendChild(r)})),s._chartJsPromise)}render(){return this._src||this._config?`
      <div class="frame">
        <canvas part="canvas"></canvas>
        <div class="overlay overlay-loading" part="loading"><div class="spinner"></div></div>
        <div class="overlay overlay-error hidden" part="error"><span class="error-text">Chart failed to load.</span></div>
      </div>
    `:'<div class="empty">Provide src or config.</div>'}};customElements.define("ui-chart",ne);var Ot="1.9.4",Lt=`https://cdn.jsdelivr.net/npm/leaflet@${Ot}/dist`,Ht=`${Lt}/leaflet.css`,jt=`${Lt}/leaflet.js`,zt="https://tile.openstreetmap.org/{z}/{x}/{y}.png",Et="https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}{r}.png",Ft='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',Vt="https://nominatim.openstreetmap.org/search",le=class s extends c{static properties={height:{type:String,default:"20em",reflect:!0},lat:{type:Number,default:0,reflect:!0},lng:{type:Number,default:0,reflect:!0},zoom:{type:Number,default:2,reflect:!0},src:{type:String,default:"",reflect:!0},dark:{type:Boolean,default:!1,reflect:!0},noZoom:{type:Boolean,default:!1,reflect:!0,attribute:"no-zoom"}};static styles(){return`
      :host {
        display: block;
        height: var(--_height, 20em);
      }

      .frame {
        position: relative;
        width: 100%;
        height: 100%;
        border-radius: var(--ui-radius, 0.375em);
        overflow: hidden;
        border: 1px solid var(--ui-border-color, #d1d5db);
      }

      .map-container {
        width: 100%;
        height: 100%;
      }

      .overlay {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: inherit;
        font-size: 0.85em;
        color: var(--ui-text-muted, #6b7280);
        background: var(--ui-bg, #fff);
        pointer-events: none;
        z-index: 1000;
      }
      .overlay.hidden { display: none; }
      .error-text { color: var(--ui-red-500, #ef4444); }

      .spinner {
        width: 1.5em;
        height: 1.5em;
        border: 2px solid var(--ui-border-color, #d1d5db);
        border-top-color: var(--ui-indigo-500, #6366f1);
        border-radius: 50%;
        animation: _spin 0.6s linear infinite;
      }
      @keyframes _spin { to { transform: rotate(360deg); } }
    `}static _leafletPromise=null;static _leafletCssText=null;static _geocodeCache=new Map;constructor(){super(),this._config=null,this._map=null,this._markers=[],this._lines=[],this._tileLayer=null,this._loadedSrc="",this._configFromSrc=null,this._srcRequestId=0,this._initSeq=0,this._refreshTimer=null}set config(e){this._config=e&&typeof e=="object"?e:null,this._initialised&&this._scheduleRefresh()}get config(){return this._config}connectedCallback(){super.connectedCallback()}disconnectedCallback(){clearTimeout(this._refreshTimer),this._initSeq++,this._destroyMap(),super.disconnectedCallback()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),e==="src"&&t!==i&&(this._loadedSrc="",this._configFromSrc=null)}_update(){if(this._map){this._applyHeight(),this._scheduleRefresh();return}super._update(),this._applyHeight(),this._scheduleRefresh()}_applyHeight(){this._setDynamicVars({"--_height":this._height||"20em"})}_scheduleRefresh(){clearTimeout(this._refreshTimer);let e=this._map?150:0;this._refreshTimer=setTimeout(()=>this._doRefresh(),e)}async _doRefresh(){let e=++this._initSeq,t=this.shadowRoot?.querySelector(".map-container");if(t){this._setOverlay("loading");try{let[i]=await Promise.all([s._loadLeaflet(),this._injectLeafletCss()]);if(e!==this._initSeq)return;let r=await this._resolveConfig();if(e!==this._initSeq)return;let o=r.center,a=r.zoom;if(this._map)this._map.setView(o,a),this._updateTiles(i),await this._updateMarkers(i,r.markers,r.icon),await this._updateLines(i,r.lines),this._map.invalidateSize();else{let l=i.map(t,{center:o,zoom:a,scrollWheelZoom:!this._noZoom,attributionControl:!0});this._map=l,this._addTiles(i),await this._updateMarkers(i,r.markers,r.icon),await this._updateLines(i,r.lines)}this._noZoom?this._map.scrollWheelZoom.disable():this._map.scrollWheelZoom.enable(),this._setOverlay("ready")}catch(i){if(e!==this._initSeq)return;this._setOverlay("error"),console.warn("[ui-map] Map render failed:",i)}}}async _resolveConfig(){let t=await this._loadConfigFromSrc()||this._config||{},i=t.center;if(typeof i=="string"){let r=await s._geocode(i);i=r?[r.lat,r.lng]:[this._lat||0,this._lng||0]}else i=i||[this._lat||0,this._lng||0];return{center:i,zoom:t.zoom??this._zoom??2,icon:t.icon||null,markers:t.markers||[],lines:t.lines||[]}}async _loadConfigFromSrc(){let e=(this._src||"").trim();if(!e)return null;if(this._loadedSrc===e&&this._configFromSrc)return this._configFromSrc;let t=++this._srcRequestId,i=await fetch(e,{cache:"no-cache"});if(!i.ok)throw new Error(`Failed to load map config: ${e} (${i.status})`);let r=await i.json();return t!==this._srcRequestId?null:(this._loadedSrc=e,this._configFromSrc=r,r)}_addTiles(e){let t=this._dark?Et:zt;this._tileLayer=e.tileLayer(t,{attribution:Ft,maxZoom:19}).addTo(this._map),this._currentTileUrl=t}_updateTiles(e){let t=this._dark?Et:zt;this._currentTileUrl!==t&&(this._tileLayer&&this._map.removeLayer(this._tileLayer),this._addTiles(e))}async _updateMarkers(e,t,i){for(let r of this._markers)this._map.removeLayer(r);if(this._markers=[],!(!t||!t.length))for(let r of t){let o=r.lat??r[0],a=r.lng??r[1];if(o==null||a==null){let f=r.address||r[2];if(!f)continue;let m=await s._geocode(f);if(!m)continue;o=m.lat,a=m.lng}let l=r.icon||i,h={};l&&(h.icon=s._buildIcon(e,l));let u=e.marker([o,a],h).addTo(this._map);r.popup&&u.bindPopup(String(r.popup)),this._markers.push(u)}}async _updateLines(e,t){for(let i of this._lines)this._map.removeLayer(i);if(this._lines=[],!(!t||!t.length))for(let i of t){let r=i.points||i;if(!Array.isArray(r)||!r.length)continue;let a=(await Promise.all(r.map(h=>s._resolvePoint(h)))).filter(h=>h!=null);if(a.length<2)continue;let l=e.polyline(a,{color:i.color||"var(--ui-indigo-500, #6366f1)",weight:i.weight??3,opacity:i.opacity??1,dashArray:i.dash||null}).addTo(this._map);this._lines.push(l)}}static _buildIcon(e,t){if(!t)return;let i=typeof t=="string"?t:t.url;if(!i)return;let r=typeof t=="object"&&t.size||[25,41],o=typeof t=="object"&&t.anchor||[Math.round(r[0]/2),r[1]],a=typeof t=="object"&&t.popupAnchor||[0,-r[1]];return e.icon({iconUrl:i,iconSize:r,iconAnchor:o,popupAnchor:a})}static async _resolvePoint(e){if(Array.isArray(e))return e;if(typeof e=="string"){let t=await s._geocode(e);return t?[t.lat,t.lng]:null}if(e&&typeof e=="object"){if(e.lat!=null&&e.lng!=null)return[e.lat,e.lng];if(e.address){let t=await s._geocode(e.address);return t?[t.lat,t.lng]:null}}return null}static async _geocode(e){if(!e||typeof e!="string")return null;let t=e.trim().toLowerCase();if(s._geocodeCache.has(t))return s._geocodeCache.get(t);try{let i=`${Vt}?format=json&limit=1&q=${encodeURIComponent(e)}`,r=await fetch(i);if(!r.ok)return null;let o=await r.json();if(!o.length)return s._geocodeCache.set(t,null),null;let a={lat:parseFloat(o[0].lat),lng:parseFloat(o[0].lon)};return s._geocodeCache.set(t,a),a}catch(i){return console.warn("[ui-map] Geocode failed for:",e,i),null}}_destroyMap(){this._map&&(this._map.remove(),this._map=null,this._tileLayer=null,this._markers=[],this._lines=[],this._currentTileUrl="")}_setOverlay(e){let t=this.shadowRoot?.querySelector(".overlay-loading"),i=this.shadowRoot?.querySelector(".overlay-error");t&&t.classList.toggle("hidden",e!=="loading"),i&&i.classList.toggle("hidden",e!=="error")}async _injectLeafletCss(){if(this.shadowRoot.getElementById("__leaflet-css"))return;if(!s._leafletCssText){let t=await fetch(Ht);if(!t.ok)throw new Error(`Leaflet CSS fetch failed: ${t.status}`);s._leafletCssText=await t.text()}let e=document.createElement("style");e.id="__leaflet-css",e.textContent=s._leafletCssText,this.shadowRoot.prepend(e)}static _loadLeaflet(){return window.L?Promise.resolve(window.L):(s._leafletPromise||(s._leafletPromise=new Promise((e,t)=>{let i=document.querySelector("script[data-ui-leaflet]");if(i){if(i.dataset.loaded==="true")return e(window.L);i.addEventListener("load",()=>e(window.L)),i.addEventListener("error",t);return}let r=document.createElement("script");r.src=jt,r.async=!0,r.dataset.uiLeaflet="true",r.addEventListener("load",()=>{r.dataset.loaded="true",e(window.L)}),r.addEventListener("error",()=>{s._leafletPromise=null,t(new Error("Leaflet CDN load failed"))}),document.head.appendChild(r)})),s._leafletPromise)}render(){return`
      <div class="frame" part="frame">
        <div class="map-container" part="map"></div>
        <div class="overlay overlay-loading" part="loading"><div class="spinner"></div></div>
        <div class="overlay overlay-error hidden" part="error"><span class="error-text">Map failed to load.</span></div>
      </div>
    `}};customElements.define("ui-map",le);var ce=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},autoplay:{type:Number,default:0,reflect:!0},loop:{type:Boolean,default:!1,reflect:!0},navigation:{type:Boolean,default:!0,reflect:!0},indicators:{type:Boolean,default:!0,reflect:!0}};static styles(){return`
      :host {
        display: block;
        position: relative;
        background: var(--_bg, transparent);
        color: var(--_color, inherit);
        border-radius: var(--ui-radius, 0.5em);
        box-shadow: var(--_elevation, none);
        box-sizing: border-box;
        user-select: none;
        --_arrow-size: 2.2em;
      }

      /* \u2500\u2500 Viewport \u2014 clips off-screen slides without hiding shadow/controls */
      .viewport {
        overflow: hidden;
        border-radius: inherit;
        position: relative;
      }

      /* \u2500\u2500 Track \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .track {
        display: flex;
        transition: transform 0.4s ease;
        will-change: transform;
        height: 100%;
      }

      ::slotted(ui-carousel-slide) {
        flex: 0 0 100%;
        min-width: 0;
        box-sizing: border-box;
      }

      /* \u2500\u2500 Arrows \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        z-index: 2;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: var(--_arrow-size);
        height: var(--_arrow-size);
        border: none;
        border-radius: 50%;
        background: rgba(0, 0, 0, 0.45);
        color: #fff;
        font-size: 1em;
        cursor: pointer;
        transition: background 0.15s ease, opacity 0.15s ease;
        padding: 0;
        line-height: 1;
        opacity: 0.85;
      }

      .arrow:hover { background: rgba(0, 0, 0, 0.65); opacity: 1; }
      .arrow:focus-visible {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: 0.125em;
      }
      .arrow[disabled] {
        opacity: 0.25;
        pointer-events: none;
      }

      .arrow--prev { left: 0.5em; }
      .arrow--next { right: 0.5em; }

      .arrow svg {
        width: 1em;
        height: 1em;
        fill: none;
        stroke: currentColor;
        stroke-width: 2.5;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      /* \u2500\u2500 Indicators \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .dots {
        position: absolute;
        bottom: 0.6em;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 0.4em;
        z-index: 2;
      }

      .dot {
        width: 0.55em;
        height: 0.55em;
        border-radius: 50%;
        border: none;
        padding: 0;
        cursor: pointer;
        background: rgba(255, 255, 255, 0.5);
        transition: background 0.2s ease, transform 0.2s ease;
      }

      .dot:hover { background: rgba(255, 255, 255, 0.8); }
      .dot:focus-visible {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: 0.1em;
      }
      .dot[aria-current="true"] {
        background: #fff;
        transform: scale(1.25);
      }

      /* Hide controls via attribute */
      :host(:not([navigation])) .arrow { display: none; }
      :host(:not([indicators])) .dots  { display: none; }
    `}constructor(){super(),this._index=0,this._onKey=this._onKey.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this)}connectedCallback(){super.connectedCallback(),this.setAttribute("role","region"),this.setAttribute("aria-roledescription","carousel"),this.setAttribute("tabindex","0"),this._applyStyles(),this.addEventListener("keydown",this._onKey),this.addEventListener("pointerdown",this._onPointerDown),this._onEnter=()=>this._pauseAutoplay(),this._onLeave=()=>this._startAutoplay(),this.addEventListener("mouseenter",this._onEnter),this.addEventListener("mouseleave",this._onLeave),this._observer=new MutationObserver(()=>this._onSlidesChange()),this._observer.observe(this,{childList:!0}),requestAnimationFrame(()=>{this._onSlidesChange(),this._startAutoplay()})}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keydown",this._onKey),this.removeEventListener("pointerdown",this._onPointerDown),this.removeEventListener("mouseenter",this._onEnter),this.removeEventListener("mouseleave",this._onLeave),this._stopAutoplay(),this._observer&&(this._observer.disconnect(),this._observer=null)}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&(this._applyStyles(),e==="autoplay"&&(this._stopAutoplay(),this._startAutoplay()))}get count(){return this._slides().length}get index(){return this._index}goTo(e){let t=this._slides();if(!t.length)return;let i=e;this.loop?i=(i%t.length+t.length)%t.length:i=Math.max(0,Math.min(i,t.length-1)),i!==this._index&&(this._index=i,this._move(),this.emit("ui-slide-change",{index:this._index}))}next(){this.goTo(this._index+1)}prev(){this.goTo(this._index-1)}_slides(){return[...this.querySelectorAll("ui-carousel-slide")]}_applyStyles(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=d(this.size);t&&(e["font-size"]=t);let i=b(this.elevation);i&&(e["--_elevation"]=i),this._setDynamicVars(e)}_move(){let e=this.shadowRoot?.querySelector(".track");e&&(e.style.transform=`translateX(-${this._index*100}%)`),this._updateControls()}_updateControls(){let e=this.shadowRoot;if(!e)return;let t=this._slides(),i=e.querySelector(".arrow--prev"),r=e.querySelector(".arrow--next");i&&(i.disabled=!this.loop&&this._index===0),r&&(r.disabled=!this.loop&&this._index>=t.length-1),e.querySelectorAll(".dot").forEach((o,a)=>{o.setAttribute("aria-current",a===this._index?"true":"false")})}_onSlidesChange(){let e=this._slides();e.forEach((i,r)=>{i.setAttribute("role","tabpanel"),i.setAttribute("aria-roledescription","slide"),i.setAttribute("aria-label",`Slide ${r+1} of ${e.length}`)});let t=this.shadowRoot?.querySelector(".dots");t&&(t.innerHTML=e.map((i,r)=>`<button class="dot" aria-label="Go to slide ${r+1}" aria-current="${r===this._index?"true":"false"}"></button>`).join(""),t.querySelectorAll(".dot").forEach((i,r)=>{i.addEventListener("click",()=>this.goTo(r))})),this._index>=e.length&&(this._index=Math.max(0,e.length-1)),this._move()}_startAutoplay(){this._stopAutoplay(),this.autoplay>0&&(this._autoTimer=setInterval(()=>this.next(),this.autoplay))}_stopAutoplay(){this._autoTimer&&(clearInterval(this._autoTimer),this._autoTimer=null)}_pauseAutoplay(){this._stopAutoplay()}_onKey(e){e.key==="ArrowRight"?(e.preventDefault(),this.next()):e.key==="ArrowLeft"&&(e.preventDefault(),this.prev())}_onPointerDown(e){e.button!==0||e.composedPath().some(i=>i.classList&&(i.classList.contains("arrow")||i.classList.contains("dot")))||(this._swipeX=e.clientX,this._swiping=!0,this.addEventListener("pointermove",this._onPointerMove),this.addEventListener("pointerup",this._onPointerUp),this.addEventListener("pointercancel",this._onPointerUp),this.setPointerCapture(e.pointerId))}_onPointerMove(e){this._swiping&&(this._swipeDelta=e.clientX-this._swipeX)}_onPointerUp(e){if(!this._swiping)return;this._swiping=!1,this.removeEventListener("pointermove",this._onPointerMove),this.removeEventListener("pointerup",this._onPointerUp),this.removeEventListener("pointercancel",this._onPointerUp),this.releasePointerCapture(e.pointerId);let t=50;this._swipeDelta>t?this.prev():this._swipeDelta<-t&&this.next(),this._swipeDelta=0}render(){return`
      <div class="viewport">
        <div class="track"><slot></slot></div>
        <button class="arrow arrow--prev" aria-label="Previous slide"><svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg></button>
        <button class="arrow arrow--next" aria-label="Next slide"><svg viewBox="0 0 24 24"><polyline points="9 6 15 12 9 18"/></svg></button>
        <div class="dots" role="tablist" aria-label="Slides"></div>
      </div>
    `}_update(){super._update();let e=this.shadowRoot;if(!e)return;let t=e.querySelector(".arrow--prev"),i=e.querySelector(".arrow--next");t&&t.addEventListener("click",()=>this.prev()),i&&i.addEventListener("click",()=>this.next()),this._onSlidesChange()}};customElements.define("ui-carousel",ce);var de=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},image:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2em;
        background-color: var(--_bg, transparent);
        background-image: var(--_bg-image, none);
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        color: var(--_color, inherit);
        box-sizing: border-box;
        min-height: 12em;
      }
    `}connectedCallback(){super.connectedCallback(),this._applyColors()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyColors()}_applyColors(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color)),this.image&&(e["--_bg-image"]=`url(${this.image})`,!this.color&&!this.background&&(e["--_color"]="#fff")),this._setDynamicVars(e)}render(){return"<slot></slot>"}};customElements.define("ui-carousel-slide",de);var he=class extends c{static properties={summary:{type:String,default:"Details",reflect:!0},open:{type:Boolean,default:!1,reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},outline:{type:Boolean,default:!1,reflect:!0},flat:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        border-radius: var(--ui-radius, 0.5em);
        border: 1px solid var(--ui-border-color, #e5e7eb);
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
        box-shadow: var(--_elevation, none);
        overflow: hidden;
        box-sizing: border-box;
        line-height: 1.5;
      }

      :host([flat]) {
        border: none;
        box-shadow: none;
      }

      /* \u2500\u2500 Native details reset \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      details {
        margin: 0;
      }

      /* \u2500\u2500 Summary (clickable header) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      summary {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.5em;
        padding: 0.75em 1em;
        cursor: pointer;
        font-weight: 600;
        user-select: none;
        list-style: none;             /* remove default marker */
        transition: background 0.15s ease;
      }

      /* Remove default marker across browsers */
      summary::-webkit-details-marker { display: none; }
      summary::marker { display: none; content: ''; }

      summary:hover {
        background: rgba(0, 0, 0, 0.04);
      }

      summary:focus-visible {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: -0.125em;
      }

      /* \u2500\u2500 Chevron icon \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .chevron {
        flex-shrink: 0;
        width: 1em;
        height: 1em;
        transition: transform 0.25s ease;
      }

      .chevron svg {
        display: block;
        width: 100%;
        height: 100%;
        fill: none;
        stroke: currentColor;
        stroke-width: 2.5;
        stroke-linecap: round;
        stroke-linejoin: round;
        opacity: 0.55;
      }

      details[open] .chevron {
        transform: rotate(180deg);
      }

      /* \u2500\u2500 Content area \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .content {
        padding: 0 1em 1em;
        overflow: hidden;
      }

      /* \u2500\u2500 Animation \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .content-inner {
        /* Used as animation wrapper */
      }
    `}connectedCallback(){super.connectedCallback(),this._applyStyles()}attributeChangedCallback(e,t,i){if(super.attributeChangedCallback(e,t,i),!!this._initialised&&(this._applyStyles(),e==="open")){let r=this.shadowRoot?.querySelector("details");r&&(r.open=this.open)}}_applyStyles(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=d(this.size);t&&(e["font-size"]=t);let i=b(this.elevation);i&&(e["--_elevation"]=i),this._setDynamicVars(e)}_update(){super._update();let e=this.shadowRoot?.querySelector("details");e&&(this._toggleHandler&&e.removeEventListener("toggle",this._toggleHandler),this._toggleHandler=()=>{let t=e.open;t&&!this.hasAttribute("open")?this.setAttribute("open",""):!t&&this.hasAttribute("open")&&this.removeAttribute("open"),this.emit("ui-toggle",{open:t})},e.addEventListener("toggle",this._toggleHandler))}render(){let e='<svg viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"/></svg>',t=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return`
      <details${this.open?" open":""}>
        <summary>
          <span>${t(this.summary)}</span>
          <span class="chevron">${e}</span>
        </summary>
        <div class="content">
          <div class="content-inner">
            <slot></slot>
          </div>
        </div>
      </details>
    `}};customElements.define("ui-details",he);var ue=class s extends c{static properties={open:{type:Boolean,default:!1,reflect:!0},modal:{type:Boolean,default:!0,reflect:!0},width:{type:String,default:"",reflect:!0},maxHeight:{type:String,default:"",reflect:!0,attribute:"max-height"},size:{type:String,default:"",reflect:!0},padding:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},persistent:{type:Boolean,default:!1,reflect:!0},noHeader:{type:Boolean,default:!1,reflect:!0,attribute:"no-header"},label:{type:String,default:"",reflect:!0}};static _sizeMap={small:"360px",medium:"500px",large:"700px","x-large":"900px"};static styles(){return`
      :host {
        display: contents;
      }

      .backdrop {
        display: none;
        position: fixed;
        inset: 0;
        z-index: 9998;
        background: rgba(0,0,0,0.45);
        opacity: 0;
        transition: opacity 0.2s ease;
      }
      .backdrop.visible {
        display: block;
        opacity: 1;
      }

      .panel {
        display: none;
        position: fixed;
        z-index: 9999;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.95);
        background: var(--_bg, var(--ui-bg, #fff));
        border-radius: var(--ui-radius, 0.5em);
        box-shadow: var(--_elevation, 0 25px 50px rgba(0,0,0,0.15), 0 12px 24px rgba(0,0,0,0.08));
        box-sizing: border-box;
        max-width: 95vw;
        max-height: var(--_max-h, 85vh);
        width: var(--_width, min(90vw, 500px));
        opacity: 0;
        transition: opacity 0.2s ease, transform 0.2s ease;
        outline: none;
        overflow: hidden;
        flex-direction: column;
      }
      .panel.visible {
        display: flex;
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }

      :host([size="full"]) .panel.visible {
        width: 100vw;
        height: 100vh;
        max-width: 100vw;
        max-height: 100vh;
        border-radius: 0;
      }

      .header {
        display: flex;
        align-items: center;
        padding: 1em 1.25em;
        border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
        gap: 0.5em;
        flex-shrink: 0;
      }
      .header-title {
        flex: 1;
        font-weight: 600;
        font-size: 1.1em;
        margin: 0;
        line-height: 1.3;
      }
      .close-btn {
        all: unset;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 2em;
        height: 2em;
        border-radius: var(--ui-radius, 0.375em);
        color: var(--ui-text-muted, #6b7280);
        transition: background 0.15s ease, color 0.15s ease;
        font-size: 1em;
        flex-shrink: 0;
      }
      .close-btn:hover {
        background: var(--ui-bg-subtle, #f3f4f6);
        color: var(--ui-text-color, #111827);
      }
      .close-btn:focus-visible {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: 0.125em;
      }
      .close-btn svg { width: 1em; height: 1em; }

      .body {
        padding: var(--_padding, 1.25em);
        overflow-y: auto;
        flex: 1 1 auto;
      }
    `}constructor(){super(),this._onBackdropClick=this._onBackdropClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onCloseClick=this._onCloseClick.bind(this)}render(){let e=this.noHeader?"":`
      <div class="header" part="header">
        <span class="header-title">${this._esc(this.label)}</span>
        <button class="close-btn" aria-label="Close">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>`;return`
      <div class="backdrop${this.open?" visible":""}" part="backdrop"></div>
      <div class="panel${this.open?" visible":""}" role="dialog" aria-modal="${this.modal}" aria-label="${this._esc(this.label)}" tabindex="-1" part="panel">
        ${e}
        <div class="body" part="body"><slot></slot></div>
      </div>
    `}_esc(e){return String(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}connectedCallback(){super.connectedCallback(),this.open&&this._onOpen()}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this._onKeyDown)}_attachListeners(){let e=this.shadowRoot.querySelector(".backdrop"),t=this.shadowRoot.querySelector(".close-btn");e&&e.addEventListener("click",this._onBackdropClick),t&&t.addEventListener("click",this._onCloseClick)}_applyStyles(){let e={};if(this.size&&this.size!=="full"){let i=s._sizeMap[this.size];i&&(e["--_width"]=i)}else this.width&&(e["--_width"]=this.width);this.maxHeight&&(e["--_max-h"]=this.maxHeight),this.padding&&(e["--_padding"]=this.padding),this.background&&(e["--_bg"]=n(this.background)||this.background);let t=b(this.elevation);t&&(e["--_elevation"]=t),this._setDynamicVars(e)}show(){this.open=!0}showModal(){this.modal=!0,this.open=!0}hide(e="api"){this._requestClose(e)}_update(){let e=this.shadowRoot?.querySelector(".panel.visible");super._update(),this._attachListeners(),this._applyStyles();let t=this.open;t&&!e&&this._onOpen(),!t&&e&&this._onClose("property")}_onOpen(){document.addEventListener("keydown",this._onKeyDown),requestAnimationFrame(()=>{let e=this.shadowRoot.querySelector(".panel");e&&e.focus()}),this.emit("ui-open")}_onClose(e){document.removeEventListener("keydown",this._onKeyDown),this.emit("ui-close",{reason:e})}_requestClose(e){if(this.persistent){this.emit("ui-request-close",{reason:e});let t=this.shadowRoot.querySelector(".panel");t&&(t.style.animation="none",t.offsetHeight,t.style.animation="shake 0.3s ease",setTimeout(()=>t.style.animation="",350));return}this.open=!1}_onBackdropClick(){this._requestClose("backdrop")}_onCloseClick(){this._requestClose("close-button")}_onKeyDown(e){e.key==="Escape"&&(e.stopPropagation(),this._requestClose("escape"))}};customElements.define("ui-dialog",ue);var pe=class extends c{static properties={label:{type:String,default:"",reflect:!0},vertical:{type:Boolean,default:!1,reflect:!0},color:{type:String,default:"",reflect:!0},thickness:{type:String,default:"",reflect:!0},spacing:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},variant:{type:String,default:"solid",reflect:!0}};static styles(){return`
      :host {
        display: block;
        box-sizing: border-box;
      }

      /* \u2500\u2500 Horizontal (default) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      :host(:not([vertical])) {
        width: 100%;
        margin: var(--_spacing, 1em) 0;
      }

      :host(:not([vertical])) .line {
        display: flex;
        align-items: center;
        gap: 0.75em;
      }

      :host(:not([vertical])) .line::before,
      :host(:not([vertical])) .line::after {
        content: '';
        flex: 1;
        border-top: var(--_thickness, 1px) var(--_variant, solid) var(--_color, var(--ui-border-color, #e5e7eb));
      }

      /* Hide ::after when there is no label (single line via ::before) */
      :host(:not([vertical]):not([label])) .line::after,
      :host(:not([vertical])[label=""]) .line::after {
        display: none;
      }

      /* \u2500\u2500 Vertical \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      :host([vertical]) {
        display: inline-block;
        width: auto;
        align-self: stretch;
        margin: 0 var(--_spacing, 1em);
      }

      :host([vertical]) .line {
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 100%;
        gap: 0.5em;
      }

      :host([vertical]) .line::before,
      :host([vertical]) .line::after {
        content: '';
        flex: 1;
        border-left: var(--_thickness, 1px) var(--_variant, solid) var(--_color, var(--ui-border-color, #e5e7eb));
      }

      :host([vertical]:not([label])) .line::after,
      :host([vertical][label=""]) .line::after {
        display: none;
      }

      /* \u2500\u2500 Label \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .label {
        color: var(--ui-text-muted, #6b7280);
        font-size: 0.8em;
        font-weight: 500;
        white-space: nowrap;
        user-select: none;
        line-height: 1;
      }

      :host([vertical]) .label {
        writing-mode: vertical-lr;
        transform: rotate(180deg);
      }
    `}connectedCallback(){super.connectedCallback(),this.setAttribute("role","separator"),this._applyStyles()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&(this._applyStyles(),e==="vertical"&&this.setAttribute("aria-orientation",this.vertical?"vertical":"horizontal"))}_applyStyles(){let e={};this.color&&(e["--_color"]=n(this.color)),this.thickness&&(e["--_thickness"]=d(this.thickness)||this.thickness),this.spacing&&(e["--_spacing"]=d(this.spacing)||this.spacing),this.variant&&this.variant!=="solid"&&(e["--_variant"]=this.variant);let t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e),this.setAttribute("aria-orientation",this.vertical?"vertical":"horizontal")}render(){return`<div class="line">${this.label&&this.label.length>0?`<span class="label">${(i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))(this.label)}</span>`:""}</div>`}};customElements.define("ui-divider",pe);var fe=class extends c{static properties={background:{type:String,default:"gray-200",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"medium",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},pill:{type:Boolean,default:!1,reflect:!0},outline:{type:Boolean,default:!1,reflect:!0},flat:{type:Boolean,default:!1,reflect:!0},elevation:{type:String,default:"",reflect:!0},placement:{type:String,default:"bottom-start",reflect:!0}};static styles(){return`
      :host {
        display: inline-block;
        position: relative;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.5;
      }

      /* ---- Trigger button ---- */
      .trigger {
        all: unset;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5em;
        cursor: pointer;
        font-family: inherit;
        font-weight: 500;
        border-radius: var(--ui-button-radius, 0.375em);
        transition: background-color 0.15s ease, box-shadow 0.15s ease,
                    transform 0.1s ease, filter 0.15s ease;
        box-sizing: border-box;
        white-space: nowrap;
        user-select: none;
        line-height: 1;
        padding: 0.5em 1em;
        background: var(--_bg);
        color: var(--_color, inherit);
      }

      .trigger:hover {
        background: var(--_bg-hover, var(--_bg));
        filter: var(--_hover-filter, none);
      }

      .trigger:focus-visible {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: 0.125em;
      }

      .trigger:active:not([disabled]) {
        transform: scale(0.97);
      }

      /* ---- Pill ---- */
      :host([pill]) .trigger { border-radius: 9999px; }

      /* ---- Outline ---- */
      :host([outline]) .trigger {
        background: transparent;
        border: 0.1em solid var(--_outline-color, var(--_bg));
        color: var(--_outline-color, var(--_bg));
      }
      :host([outline]) .trigger:hover {
        background: var(--_bg);
        color: var(--_color, inherit);
        filter: none;
      }

      /* ---- Flat (ghost) ---- */
      :host([flat]) .trigger {
        position: relative;
        background: transparent;
        color: var(--_text-btn-color, var(--_bg));
      }
      :host([flat]) .trigger::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: inherit;
        background: var(--_bg);
        opacity: 0;
        transition: opacity 0.15s ease;
        z-index: 0;
      }
      :host([flat]) .trigger:hover {
        background: transparent;
        filter: none;
      }
      :host([flat]) .trigger:hover::before { opacity: 0.1; }
      :host([flat]) .trigger > * {
        position: relative;
        z-index: 1;
      }

      /* ---- Caret ---- */
      .caret {
        display: inline-block;
        width: 0; height: 0;
        border-left: 0.3em solid transparent;
        border-right: 0.3em solid transparent;
        border-top: 0.35em solid currentColor;
        margin-left: 0.25em;
        transition: transform 0.2s ease;
      }
      :host([aria-expanded="true"]) .caret {
        transform: rotate(180deg);
      }

      /* ---- Menu panel ---- */
      .menu {
        display: none;
        position: absolute;
        z-index: 1000;
        min-width: 100%;
        background: var(--_menu-bg, var(--ui-bg, #fff));
        border: 1px solid var(--ui-border-color, rgba(0, 0, 0, 0.1));
        border-radius: var(--ui-radius, 0.375em);
        box-shadow: var(--_elevation, 0 4px 6px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.06));
        padding: 0.25em 0;
        flex-direction: column;
        box-sizing: border-box;
      }
      .menu.open { display: flex; }

      /* Placement */
      .menu.bottom-start { top: calc(100% + 0.25em); left: 0; }
      .menu.bottom-end   { top: calc(100% + 0.25em); right: 0; }
      .menu.top-start    { bottom: calc(100% + 0.25em); left: 0; }
      .menu.top-end      { bottom: calc(100% + 0.25em); right: 0; }

      /* Slotted menu items */
      ::slotted(ui-dropdown-item) { display: block; }
    `}constructor(){super(),this._open=!1,this._onTriggerClick=this._onTriggerClick.bind(this),this._onDocumentClick=this._onDocumentClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onItemSelect=this._onItemSelect.bind(this)}connectedCallback(){super.connectedCallback(),this.setAttribute("role","button"),this.setAttribute("aria-haspopup","true"),this.setAttribute("aria-expanded","false"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.addEventListener("keydown",this._onKeyDown),this.addEventListener("ui-click",this._onItemSelect),this._assignSlots(),this._observeSlot()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keydown",this._onKeyDown),this.removeEventListener("ui-click",this._onItemSelect),document.removeEventListener("click",this._onDocumentClick),this._slotObserver&&(this._slotObserver.disconnect(),this._slotObserver=null)}render(){let e=this.placement||"bottom-start";return`
      <button
        class="trigger"
        ${this.disabled?'disabled aria-disabled="true"':""}
        part="trigger"
      >
        <slot name="trigger"></slot>
        <span class="caret"></span>
      </button>
      <div class="menu ${e}" part="menu" role="menu">
        <slot></slot>
      </div>
    `}_assignSlots(){for(let e of[...this.childNodes])if(e.nodeType===1)e.tagName!=="UI-DROPDOWN-ITEM"&&e.setAttribute("slot","trigger");else if(e.nodeType===3&&e.textContent.trim()){let t=document.createElement("span");t.setAttribute("slot","trigger"),t.textContent=e.textContent,this.replaceChild(t,e)}this._styleMenuItems()}_observeSlot(){this._slotObserver=new MutationObserver(()=>this._assignSlots()),this._slotObserver.observe(this,{childList:!0})}_styleMenuItems(){for(let e of this.querySelectorAll(":scope > ui-dropdown-item"))e.hasAttribute("role")||e.setAttribute("role","menuitem"),e.hasAttribute("tabindex")||e.setAttribute("tabindex","-1")}open(){if(this._open||this.disabled)return;this._open=!0,this.setAttribute("aria-expanded","true");let e=this.shadowRoot.querySelector(".menu");e&&e.classList.add("open"),requestAnimationFrame(()=>{document.addEventListener("click",this._onDocumentClick)}),this.emit("ui-open")}close(){if(!this._open)return;this._open=!1,this.setAttribute("aria-expanded","false");let e=this.shadowRoot.querySelector(".menu");e&&e.classList.remove("open");for(let t of this.querySelectorAll("ui-dropdown-item[data-submenu-open]"))t.closeSubmenu();document.removeEventListener("click",this._onDocumentClick),this.emit("ui-close")}toggle(){this._open?this.close():this.open()}_applyStyles(){let e={"--_bg":"","--_bg-hover":"","--_hover-filter":"","--_color":"","--_outline-color":"","--_text-btn-color":"","--_menu-bg":"","--_menu-color":"","--_menu-hover":""},t=d(this.size)||"";t&&(e["font-size"]=t);let i=n(this.background);if(i){e["--_bg"]=i;let a=C(this.background);a?e["--_bg-hover"]=a:e["--_hover-filter"]="brightness(0.9)"}if(this.outline||this.flat){let a=n(this.color||this.background);e["--_outline-color"]=a,e["--_text-btn-color"]=a,this.color?e["--_color"]=n(this.color):this.background&&(e["--_color"]=p(this.background)),e["--_menu-color"]=a}else this.color?e["--_color"]=n(this.color):this.background&&(e["--_color"]=p(this.background)),i&&(e["--_menu-bg"]=i,e["--_menu-color"]=p(this.background),e["--_menu-hover"]="rgba(255, 255, 255, 0.15)");let o=b(this.elevation);o&&(e["--_elevation"]=o),this._setDynamicVars(e)}_update(){if(this._applyStyles(),super._update(),this._attachTriggerListener(),this._open){let e=this.shadowRoot.querySelector(".menu");e&&e.classList.add("open")}}_attachTriggerListener(){let e=this.shadowRoot.querySelector(".trigger");e&&(e.removeEventListener("click",this._onTriggerClick),e.addEventListener("click",this._onTriggerClick))}_onTriggerClick(e){if(this.disabled){e.preventDefault();return}this.toggle()}_onItemSelect(e){let t=e.target;!(t instanceof HTMLElement)||t.tagName!=="UI-DROPDOWN-ITEM"||(e.stopPropagation(),this.emit("ui-select",{item:t,value:t.value||""}),this.close())}_onDocumentClick(e){this.contains(e.target)||this.close()}_onKeyDown(e){let t=[...this.querySelectorAll(":scope > ui-dropdown-item:not([disabled])")];if(t.length)switch(e.key){case"Enter":case" ":e.target===this&&(e.preventDefault(),this.toggle());break;case"Escape":this._open&&(e.preventDefault(),this.close(),this.focus());break;case"ArrowDown":{e.preventDefault(),this._open||this.open();let i=t.indexOf(e.target);t[(i+1)%t.length].focus();break}case"ArrowUp":{e.preventDefault(),this._open||this.open();let i=t.indexOf(e.target);t[(i-1+t.length)%t.length].focus();break}case"Home":this._open&&(e.preventDefault(),t[0].focus());break;case"End":this._open&&(e.preventDefault(),t[t.length-1].focus());break}}};customElements.define("ui-dropdown",fe);var me=class extends c{static properties={value:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},href:{type:String,default:"",reflect:!0},target:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: block;
        position: relative;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.45;
      }

      /* ---- Clickable row ---- */
      .item {
        all: unset;
        display: flex;
        align-items: center;
        gap: 0.5em;
        width: 100%;
        box-sizing: border-box;
        padding: 0.45em 0.75em;
        cursor: pointer;
        font-family: inherit;
        font-size: inherit;
        line-height: 1.4;
        color: var(--_menu-color, var(--ui-text-color, inherit));
        text-decoration: none;
        transition: background-color 0.12s ease;
      }

      .item:hover,
      :host([data-submenu-open]) .item {
        background: var(--_menu-hover, var(--ui-bg-subtle, rgba(0, 0, 0, 0.06)));
      }

      .item:focus-visible {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: -0.125em;
      }

      /* ---- Submenu caret (hidden unless host has sub-items) ---- */
      .caret {
        margin-left: auto;
        font-size: 0.7em;
        opacity: 0.5;
        display: none;
        flex-shrink: 0;
      }

      :host([data-has-submenu]) .caret {
        display: inline;
      }

      /* ---- Submenu flyout panel ---- */
      .submenu {
        display: none;
        position: absolute;
        left: 100%;
        top: 0;
        z-index: 1000;
        min-width: 10em;
        background: var(--_menu-bg, var(--ui-bg, #fff));
        border: 1px solid var(--ui-border-color, rgba(0, 0, 0, 0.1));
        border-radius: var(--ui-radius, 0.375em);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        padding: 0.25em 0;
        flex-direction: column;
        box-sizing: border-box;
      }

      :host([data-submenu-open]) .submenu {
        display: flex;
      }
    `}constructor(){super(),this._onClick=this._onClick.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._closeTimer=null,this._childObserver=null}connectedCallback(){super.connectedCallback(),this.setAttribute("role","menuitem"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),this.addEventListener("click",this._onClick),this.addEventListener("mouseenter",this._onMouseEnter),this.addEventListener("mouseleave",this._onMouseLeave),this.addEventListener("keydown",this._onKeyDown),this._assignSlots(),this._observeChildren()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this._onClick),this.removeEventListener("mouseenter",this._onMouseEnter),this.removeEventListener("mouseleave",this._onMouseLeave),this.removeEventListener("keydown",this._onKeyDown),clearTimeout(this._closeTimer),this._childObserver&&(this._childObserver.disconnect(),this._childObserver=null)}render(){let e=this.href,t=e?"a":"div",i=o=>o.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),r=e?` href="${i(this.href)}"${this.target?` target="${i(this.target)}"`:""}`:"";return`
      <${t} class="item"${r}${this.disabled?' aria-disabled="true"':""} part="item">
        <slot></slot>
        <span class="caret" aria-hidden="true">\u25B8</span>
      </${t}>
      <div class="submenu" role="menu" part="submenu">
        <slot name="submenu"></slot>
      </div>
    `}_assignSlots(){let e=!1;for(let t of this.children)t.tagName==="UI-DROPDOWN-ITEM"&&(t.getAttribute("slot")!=="submenu"&&t.setAttribute("slot","submenu"),t.hasAttribute("role")||t.setAttribute("role","menuitem"),t.hasAttribute("tabindex")||t.setAttribute("tabindex","-1"),e=!0);e?this.hasAttribute("data-has-submenu")||(this.setAttribute("data-has-submenu",""),this.setAttribute("aria-haspopup","true")):(this.removeAttribute("data-has-submenu"),this.removeAttribute("aria-haspopup"))}_observeChildren(){this._childObserver=new MutationObserver(()=>this._assignSlots()),this._childObserver.observe(this,{childList:!0})}get _hasSubmenu(){return this.hasAttribute("data-has-submenu")}openSubmenu(){clearTimeout(this._closeTimer),this.setAttribute("data-submenu-open",""),this.setAttribute("aria-expanded","true")}closeSubmenu(){clearTimeout(this._closeTimer),this.removeAttribute("data-submenu-open"),this.removeAttribute("aria-expanded");for(let e of this.querySelectorAll("ui-dropdown-item[data-submenu-open]"))e.closeSubmenu()}toggleSubmenu(){this.hasAttribute("data-submenu-open")?this.closeSubmenu():this.openSubmenu()}_onClick(e){if(this.disabled){e.preventDefault();return}let t=e.target.closest("ui-dropdown-item");t&&t!==this||(this._hasSubmenu?this.toggleSubmenu():this.emit("ui-click"))}_onMouseEnter(){!this._hasSubmenu||this.disabled||(clearTimeout(this._closeTimer),this.openSubmenu())}_onMouseLeave(){this._hasSubmenu&&(this._closeTimer=setTimeout(()=>this.closeSubmenu(),150))}_onKeyDown(e){if(!this._hasSubmenu)return;let t=[...this.querySelectorAll(":scope > ui-dropdown-item:not([disabled])")];if(t.length)switch(e.key){case"ArrowRight":e.preventDefault(),e.stopPropagation(),this.openSubmenu(),t[0]?.focus();break;case"ArrowLeft":t.includes(e.target)&&(e.preventDefault(),e.stopPropagation(),this.closeSubmenu(),this.focus());break;case"ArrowDown":if(t.includes(e.target)){e.preventDefault(),e.stopPropagation();let i=t.indexOf(e.target);t[(i+1)%t.length].focus()}break;case"ArrowUp":if(t.includes(e.target)){e.preventDefault(),e.stopPropagation();let i=t.indexOf(e.target);t[(i-1+t.length)%t.length].focus()}break;case"Escape":this.hasAttribute("data-submenu-open")&&(e.preventDefault(),e.stopPropagation(),this.closeSubmenu(),this.focus());break}}};customElements.define("ui-dropdown-item",me);var L=class s extends c{static _cache=new Map;static _pending=new Map;static _sets=new Map;static _defaultSet="lucide";static _moduleBase=(()=>{try{return new URL(".",import.meta.url).href}catch{return""}})();static registerSet(e,{basePath:t}={}){t&&!t.endsWith("/")&&(t+="/"),this._sets.set(e,{basePath:t??""})}static useSet(e){if(!this._sets.has(e)){console.warn(`[ui-icon] Unknown set "${e}". Register it first via UIIcon.registerSet().`);return}this._defaultSet=e}static register(e,t,i){let r=i??this._defaultSet;this._cache.set(`${r}/${e}`,t)}static async _fetchIcon(e,t){let i=`${e}/${t}`;if(this._cache.has(i))return this._cache.get(i);if(this._pending.has(i))return this._pending.get(i);let r=this._sets.get(e);if(!r||!r.basePath)return console.warn(`[ui-icon] No basePath for set "${e}".`),"";let o=`${r.basePath}${t}.svg`,a=fetch(o).then(l=>{if(!l.ok)throw new Error(`${l.status} ${l.statusText}`);return l.text()}).then(l=>(this._cache.set(i,l),this._pending.delete(i),l)).catch(l=>(console.warn(`[ui-icon] Failed to load "${e}/${t}": ${l.message}`),this._pending.delete(i),""));return this._pending.set(i,a),a}static clearCache(e){if(e)for(let t of this._cache.keys())t.startsWith(e+"/")&&this._cache.delete(t);else this._cache.clear()}static properties={src:{type:String,default:"",reflect:!0},set:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},spin:{type:Boolean,default:!1,reflect:!0},stroke:{type:Number,default:0,reflect:!0}};static styles(){return`
      :host {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        vertical-align: middle;
        line-height: 0;
        color: var(--_color, currentColor);
        font-size: var(--_size, 1em);
      }

      svg {
        width: 1em;
        height: 1em;
        display: block;
      }

      :host([spin]) svg {
        animation: ui-icon-spin 1s linear infinite;
      }

      @keyframes ui-icon-spin {
        from { transform: rotate(0deg); }
        to   { transform: rotate(360deg); }
      }

      slot {
        display: none !important;
      }
    `}render(){return"<slot></slot>"}get name(){return this.textContent.trim()}connectedCallback(){super.connectedCallback(),this._onSlotChange=()=>this._updateIcon(),this.shadowRoot.querySelector("slot")?.addEventListener("slotchange",this._onSlotChange),this._updateIcon()}disconnectedCallback(){super.disconnectedCallback(),this.shadowRoot.querySelector("slot")?.removeEventListener("slotchange",this._onSlotChange)}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._updateIcon()}async _updateIcon(){if(!this.shadowRoot)return;if(this.src){let l=this.src,h=`__src__/${l}`;if(s._cache.has(h)){this._renderSVG(s._cache.get(h));return}let u=await this._fetchSrc(l,h);if(this.src!==l)return;this._renderSVG(u);return}let t=this.name;if(!t){this._clearSVG();return}let i=this.set||s._defaultSet,r=`${i}/${t}`;if(s._cache.has(r)){this._renderSVG(s._cache.get(r));return}let o=await s._fetchIcon(i,t),a=this.set||s._defaultSet;this.name!==t||a!==i||this._renderSVG(o)}async _fetchSrc(e,t){if(s._pending.has(t))return s._pending.get(t);let i=fetch(e).then(r=>{if(!r.ok)throw new Error(`${r.status} ${r.statusText}`);return r.text()}).then(r=>(s._cache.set(t,r),s._pending.delete(t),r)).catch(r=>(console.warn(`[ui-icon] Failed to load src "${e}": ${r.message}`),s._pending.delete(t),""));return s._pending.set(t,i),i}_clearSVG(){let e=this.shadowRoot?.querySelector("svg");e&&e.remove()}_renderSVG(e){if(this._clearSVG(),!e)return;let t=this.shadowRoot,i=document.createElement("template");i.innerHTML=e;let r=i.content.querySelector("svg");if(!r)return;this.stroke&&r.setAttribute("stroke-width",String(this.stroke)),this.label?(r.setAttribute("role","img"),r.setAttribute("aria-label",this.label),r.removeAttribute("aria-hidden")):r.setAttribute("aria-hidden","true"),t.appendChild(r);let o={};if(this.color?o["--_color"]=n(this.color):o["--_color"]="currentColor",this.size){let a=d(this.size);a&&(o["--_size"]=a)}this._setDynamicVars(o)}};L.registerSet("lucide",{basePath:L._moduleBase+"sets/lucide/"});L.registerSet("heroicons",{basePath:L._moduleBase+"sets/heroicons/"});customElements.define("ui-icon",L);var q=new Map,be=class extends c{static properties={src:{type:String,default:"",reflect:!0},mode:{type:String,default:"replace",reflect:!0},channel:{type:String,default:"",reflect:!0},base:{type:String,default:"",reflect:!0},lazy:{type:Boolean,default:!1,reflect:!0},nocache:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
      }
    `}render(){return"<slot></slot>"}connectedCallback(){super.connectedCallback(),this._observer=null,this._loaded=!1,this._channelHandler=null,this._setupChannel(),this._startLoad()}disconnectedCallback(){super.disconnectedCallback(),this._teardownObserver(),this._teardownChannel()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),e==="src"&&this._initialised&&t!==i&&(this._loaded=!1,this._startLoad()),e==="channel"&&this._initialised&&(this._teardownChannel(),this._setupChannel())}_setupChannel(){this.channel&&(this._activeChannel=this.channel,this._channelHandler=e=>{let t=e.detail?.src;t&&this.setAttribute("src",this.base?this.base+t:t)},document.addEventListener(this._activeChannel,this._channelHandler))}_teardownChannel(){this._channelHandler&&this._activeChannel&&(document.removeEventListener(this._activeChannel,this._channelHandler),this._channelHandler=null,this._activeChannel=null)}_startLoad(){this.src&&(this.lazy&&typeof IntersectionObserver<"u"?this._setupObserver():this._fetchContent())}_setupObserver(){this._teardownObserver(),this._observer=new IntersectionObserver(e=>{for(let t of e)if(t.isIntersecting){this._teardownObserver(),this._fetchContent();break}},{rootMargin:"200px"}),this._observer.observe(this)}_teardownObserver(){this._observer&&(this._observer.disconnect(),this._observer=null)}async _fetchContent(){let e=this.src;if(e){this._setContainerClass("loading");try{let t;!this.nocache&&q.has(e)?t=q.get(e):(t=fetch(e).then(r=>{if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return r.text()}),this.nocache||q.set(e,t));let i=await t;if(this.src!==e)return;this._inject(i),this._loaded=!0,this._setContainerClass("loaded"),this.emit("ui-load",{src:e,html:i})}catch(t){q.delete(e),this._setContainerClass("error"),this.emit("ui-error",{src:e,error:t})}}}_inject(e){let t=document.createRange().createContextualFragment(e);switch(this.mode){case"append":this.appendChild(t);break;case"prepend":this.prepend(t);break;default:this.innerHTML="",this.appendChild(t);break}}_setContainerClass(e){this.classList.remove("loading","loaded","error"),e&&this.classList.add(e)}reload(){q.delete(this.src),this._loaded=!1,this._fetchContent()}static clearCache(){q.clear()}};customElements.define("ui-include",be);var ge=class extends c{static properties={type:{type:String,default:"text",reflect:!0},value:{type:String,default:"",reflect:!0},placeholder:{type:String,default:"",reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},prefix:{type:String,default:"",reflect:!0},suffix:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},readonly:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0},clearable:{type:Boolean,default:!1,reflect:!0},toggleable:{type:Boolean,default:!1,reflect:!0},pattern:{type:String,default:"",reflect:!0},minlength:{type:Number,default:0,reflect:!0},maxlength:{type:Number,default:0,reflect:!0},min:{type:Number,default:0,reflect:!0},max:{type:Number,default:0,reflect:!0},step:{type:Number,default:0,reflect:!0},autocomplete:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
      }

      :host([disabled]) {
        opacity: 0.5;
        pointer-events: none;
      }

      /* \u2500\u2500 Label \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: block; }

      .label .required-mark {
        color: var(--ui-red-500, #ef4444);
        margin-left: 0.15em;
      }

      /* \u2500\u2500 Input wrapper \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .wrapper {
        display: flex;
        align-items: center;
        gap: 0.4em;
        width: 100%;
        box-sizing: border-box;
        padding: 0.5em 0.65em;
        border: 1px solid var(--_border, var(--ui-border-color, #d1d5db));
        border-radius: var(--ui-radius, 0.375em);
        background: var(--_bg, var(--ui-bg, #fff));
        color: var(--_color, var(--ui-text-color, #111827));
        transition: border-color 0.15s ease, box-shadow 0.15s ease;
        cursor: text;
      }

      .wrapper:hover {
        border-color: var(--_border-hover, #9ca3af);
      }

      .wrapper.focused {
        border-color: var(--_focus-border, var(--ui-focus-ring, #6366f1));
        box-shadow: 0 0 0 0.15em var(--_focus-ring, rgba(99, 102, 241, 0.25));
      }

      /* Error state */
      :host([error]) .wrapper {
        border-color: var(--ui-red-500, #ef4444);
      }
      :host([error]) .wrapper.focused {
        border-color: var(--ui-red-500, #ef4444);
        box-shadow: 0 0 0 0.15em rgba(239, 68, 68, 0.25);
      }

      /* \u2500\u2500 Native input \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .input {
        all: unset;
        flex: 1;
        min-width: 0;
        font-family: inherit;
        font-size: inherit;
        color: inherit;
        line-height: 1.5;
      }

      .input::placeholder {
        color: var(--ui-text-muted, #9ca3af);
      }

      /* Hide native spin buttons on number inputs */
      .input[type="number"]::-webkit-inner-spin-button,
      .input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      .input[type="number"] { -moz-appearance: textfield; }

      /* Hide native search cancel */
      .input[type="search"]::-webkit-search-cancel-button {
        -webkit-appearance: none;
      }

      /* \u2500\u2500 Prefix / Suffix \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .prefix, .suffix {
        flex-shrink: 0;
        color: var(--ui-text-muted, #9ca3af);
        font-size: 0.9em;
        line-height: 1;
        display: none;
        user-select: none;
      }
      :host([prefix]) .prefix { display: flex; align-items: center; }
      :host([suffix]) .suffix { display: flex; align-items: center; }

      /* \u2500\u2500 Action buttons (clear, toggle) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .action-btn {
        all: unset;
        display: none;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        width: 1.25em;
        height: 1.25em;
        cursor: pointer;
        color: var(--ui-text-muted, #9ca3af);
        border-radius: 50%;
        transition: color 0.15s ease, background-color 0.15s ease;
      }
      .action-btn:hover {
        color: var(--ui-text-color, #374151);
        background: var(--ui-bg-subtle, rgba(0, 0, 0, 0.06));
      }
      .action-btn svg {
        width: 0.85em;
        height: 0.85em;
        fill: none;
        stroke: currentColor;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      :host([clearable]) .clear-btn.has-value { display: inline-flex; }
      :host([toggleable]) .toggle-btn         { display: inline-flex; }

      /* \u2500\u2500 Help / Error text \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .help, .error-msg {
        display: none;
        font-size: 0.8em;
        margin-top: 0.3em;
      }
      .help {
        color: var(--ui-text-muted, #6b7280);
      }
      .error-msg {
        color: var(--ui-red-500, #ef4444);
      }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none;  }

      /* \u2500\u2500 Slotted content \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      ::slotted(*) {
        flex-shrink: 0;
      }
    `}constructor(){super(),this._passwordVisible=!1,this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onClear=this._onClear.bind(this),this._onToggle=this._onToggle.bind(this),this._onWrapperClick=this._onWrapperClick.bind(this)}connectedCallback(){super.connectedCallback(),this._attachListeners()}disconnectedCallback(){super.disconnectedCallback()}render(){let e=h=>h.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;"),t=this.type==="password"&&this._passwordVisible?"text":this.type,i=[];i.push(`type="${e(t)}"`),i.push('class="input"'),i.push('part="input"'),this.value&&i.push(`value="${e(this.value)}"`),this.placeholder&&i.push(`placeholder="${e(this.placeholder)}"`),this.name&&i.push(`name="${e(this.name)}"`),this.disabled&&i.push("disabled"),this.readonly&&i.push("readonly"),this.required&&i.push("required"),this.pattern&&i.push(`pattern="${e(this.pattern)}"`),this.minlength&&i.push(`minlength="${this.minlength}"`),this.maxlength&&i.push(`maxlength="${this.maxlength}"`),this.min&&i.push(`min="${this.min}"`),this.max&&i.push(`max="${this.max}"`),this.step&&i.push(`step="${this.step}"`),this.autocomplete&&i.push(`autocomplete="${e(this.autocomplete)}"`),this.error&&i.push('aria-invalid="true"'),this.label&&i.push(`aria-label="${e(this.label)}"`);let r=this.value.length>0;return`
      <label class="label" part="label">
        ${e(this.label)}<span class="required-mark" aria-hidden="true">${this.required?" *":""}</span>
      </label>
      <div class="wrapper" part="wrapper">
        <span class="prefix" part="prefix">${e(this.prefix)}</span>
        <slot></slot>
        <input ${i.join(" ")} />
        <button type="button" class="clear-btn action-btn${r?" has-value":""}" aria-label="Clear" tabindex="-1">
          <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
        <button type="button" class="toggle-btn action-btn" aria-label="${this._passwordVisible?"Hide password":"Show password"}" tabindex="-1">
          ${this._passwordVisible?'<svg viewBox="0 0 24 24"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>':'<svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>'}
        </button>
        <span class="suffix" part="suffix">${e(this.suffix)}</span>
      </div>
      <div class="help" part="help">${e(this.help)}</div>
      <div class="error-msg" part="error">${e(this.error)}</div>
    `}_attachListeners(){let e=this.shadowRoot.querySelector(".input"),t=this.shadowRoot.querySelector(".wrapper"),i=this.shadowRoot.querySelector(".clear-btn"),r=this.shadowRoot.querySelector(".toggle-btn");e&&(e.addEventListener("input",this._onInput),e.addEventListener("change",this._onChange),e.addEventListener("focus",this._onFocus),e.addEventListener("blur",this._onBlur)),t&&t.addEventListener("click",this._onWrapperClick),i&&i.addEventListener("click",this._onClear),r&&r.addEventListener("click",this._onToggle)}_update(){this._applyStyles(),super._update(),this._attachListeners(),this._syncInputValue()}_syncInputValue(){let e=this.shadowRoot.querySelector(".input");e&&e.value!==this.value&&(e.value=this.value)}_applyStyles(){let e={},t=d(this.size);if(t&&(e["font-size"]=t),this.background){let i=n(this.background);i&&(e["--_bg"]=i)}if(this.color){let i=n(this.color);i&&(e["--_color"]=i)}this._setDynamicVars(e)}_onInput(e){this._value=e.target.value;let t=this.shadowRoot.querySelector(".clear-btn");t&&t.classList.toggle("has-value",this._value.length>0),this.emit("ui-input",{value:this._value})}_onChange(e){this.value=e.target.value,this.emit("ui-change",{value:this.value})}_onFocus(){let e=this.shadowRoot.querySelector(".wrapper");e&&e.classList.add("focused"),this.emit("ui-focus")}_onBlur(){let e=this.shadowRoot.querySelector(".wrapper");e&&e.classList.remove("focused"),this.emit("ui-blur")}_onClear(e){e.stopPropagation(),this.value="";let t=this.shadowRoot.querySelector(".input");t&&(t.value="",t.focus());let i=this.shadowRoot.querySelector(".clear-btn");i&&i.classList.remove("has-value"),this.emit("ui-clear"),this.emit("ui-input",{value:""})}_onToggle(e){e.stopPropagation(),this._passwordVisible=!this._passwordVisible;let t=this.shadowRoot.querySelector(".input"),i=t?t.value:this.value;this._update();let r=this.shadowRoot.querySelector(".input");r&&(r.value=i,r.focus())}_onWrapperClick(){let e=this.shadowRoot.querySelector(".input");e&&!this.disabled&&!this.readonly&&e.focus()}focus(){let e=this.shadowRoot?.querySelector(".input");e&&e.focus()}blur(){let e=this.shadowRoot?.querySelector(".input");e&&e.blur()}selectAll(){let e=this.shadowRoot?.querySelector(".input");e&&e.select()}clear(){this.value="";let e=this.shadowRoot?.querySelector(".input");e&&(e.value="");let t=this.shadowRoot?.querySelector(".clear-btn");t&&t.classList.remove("has-value"),this.emit("ui-clear")}checkValidity(){let e=this.shadowRoot?.querySelector(".input");return e?e.checkValidity():!0}get validationMessage(){let e=this.shadowRoot?.querySelector(".input");return e?e.validationMessage:""}};customElements.define("ui-input",ge);var A="https://cdn.jsdelivr.net/npm/codemirror@5.65.15",Nt=`${A}/lib/codemirror.css`,Ut=`${A}/lib/codemirror.js`,Kt=`${A}/mode/javascript/javascript.js`,Yt=`${A}/mode/css/css.js`,Wt=`${A}/mode/xml/xml.js`,Gt=`${A}/mode/htmlmixed/htmlmixed.js`,Xt=`${A}/addon/display/placeholder.js`,ve=class s extends c{static properties={value:{type:String,default:"",reflect:!1},language:{type:String,default:"json",reflect:!0},height:{type:String,default:"12em",reflect:!0},size:{type:String,default:"",reflect:!0},dark:{type:Boolean,default:!0,reflect:!0},label:{type:String,default:"",reflect:!0},placeholder:{type:String,default:"",reflect:!0},lineNumbers:{type:Boolean,default:!0,reflect:!0,attribute:"line-numbers"},wrap:{type:Boolean,default:!1,reflect:!0},readonly:{type:Boolean,default:!1,reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},tabSize:{type:Number,default:2,reflect:!0,attribute:"tab-size"}};static _cmPromise=null;static _cmCssText=null;static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
      }
      :host([disabled]) {
        opacity: 0.5;
        pointer-events: none;
      }

      /* \u2500\u2500 Label \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: block; }

      .frame {
        position: relative;
        height: var(--_height, 12em);
        width: 100%;
        box-sizing: border-box;
        border: 1px solid var(--_border, var(--ui-border-color, #d1d5db));
        border-radius: var(--ui-radius, 0.375em);
        overflow: hidden;
        background: var(--_bg, var(--ui-bg, #fff));
        color: var(--_color, var(--ui-text-color, #111827));
      }
      :host([height="auto"]) .frame {
        height: auto;
      }
      :host(:focus-within) .frame {
        border-color: var(--ui-indigo-500, #6366f1);
        box-shadow: var(--ui-focus-ring, 0 0 0 3px rgba(99,102,241,.25));
      }

      /* \u2500\u2500 Dark theme \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      :host([dark]) .frame {
        --_bg: #1e1e2e;
        --_color: #cdd6f4;
        --_border: #45475a;
      }
      :host([dark]) .label {
        color: #cdd6f4;
      }
      :host([dark]) .loading {
        background: #1e1e2e;
        color: #6c7086;
      }
      :host([dark]) .error {
        background: #1e1e2e;
      }
      :host([dark]) .CodeMirror-gutters {
        border-right-color: #45475a;
      }
      :host([dark]) .CodeMirror pre.CodeMirror-placeholder {
        color: #6c7086;
      }
      /* Syntax tokens \u2014 dark */
      :host([dark]) .cm-s-default .cm-keyword   { color: #cba6f7; }
      :host([dark]) .cm-s-default .cm-atom      { color: #fab387; }
      :host([dark]) .cm-s-default .cm-number    { color: #fab387; }
      :host([dark]) .cm-s-default .cm-def       { color: #89b4fa; }
      :host([dark]) .cm-s-default .cm-variable  { color: #cdd6f4; }
      :host([dark]) .cm-s-default .cm-variable-2 { color: #89dceb; }
      :host([dark]) .cm-s-default .cm-variable-3 { color: #a6e3a1; }
      :host([dark]) .cm-s-default .cm-type      { color: #a6e3a1; }
      :host([dark]) .cm-s-default .cm-property  { color: #89b4fa; }
      :host([dark]) .cm-s-default .cm-operator  { color: #89dceb; }
      :host([dark]) .cm-s-default .cm-string    { color: #a6e3a1; }
      :host([dark]) .cm-s-default .cm-string-2  { color: #f9e2af; }
      :host([dark]) .cm-s-default .cm-comment   { color: #6c7086; font-style: italic; }
      :host([dark]) .cm-s-default .cm-tag       { color: #f38ba8; }
      :host([dark]) .cm-s-default .cm-attribute { color: #f9e2af; }
      :host([dark]) .cm-s-default .cm-bracket   { color: #9399b2; }
      :host([dark]) .cm-s-default .cm-meta      { color: #f9e2af; }
      :host([dark]) .cm-s-default .cm-qualifier { color: #89dceb; }
      :host([dark]) .cm-s-default .cm-builtin   { color: #f38ba8; }
      :host([dark]) .cm-s-default .cm-link      { color: #89b4fa; text-decoration: underline; }
      :host([dark]) .CodeMirror-cursor {
        border-left-color: #cdd6f4;
      }
      :host([dark]) .CodeMirror-selected,
      :host([dark]) .CodeMirror-focused .CodeMirror-selected {
        background: rgba(137,180,250,0.2);
      }
      :host([dark]) .CodeMirror-activeline-background {
        background: rgba(205,214,244,0.06);
      }
      :host([dark]) .CodeMirror-linenumber {
        color: #585b70;
      }
      :host([dark]) .CodeMirror-matchingbracket {
        color: #a6e3a1 !important;
        outline: 1px solid rgba(166,227,161,0.3);
      }

      .textarea {
        width: 100%;
        height: 100%;
        border: 0;
        margin: 0;
        padding: 0.75em;
        font-family: var(--ui-font-mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);
        font-size: 0.9em;
        line-height: 1.5;
        color: inherit;
        background: transparent;
        resize: none;
        box-sizing: border-box;
        outline: none;
        white-space: pre;
        overflow: auto;
      }

      /* CodeMirror overrides (supplement the injected codemirror.css) */
      .CodeMirror {
        height: 100%;
        font-family: var(--ui-font-mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);
        font-size: inherit;
        color: inherit;
        background: transparent;
        border-radius: inherit;
      }
      :host([height="auto"]) .CodeMirror {
        height: auto;
      }
      .CodeMirror-gutters {
        background: inherit;
        border-right-color: var(--ui-border-color, #d1d5db);
      }
      .CodeMirror pre.CodeMirror-placeholder {
        color: var(--ui-text-muted, #9ca3af);
      }

      .loading,
      .error {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: inherit;
        font-size: 0.85em;
        color: var(--ui-text-muted, #6b7280);
        background: var(--ui-bg, #fff);
        pointer-events: none;
      }
      .error { color: var(--ui-red-500, #ef4444); }
      .hidden { display: none; }
    `}constructor(){super(),this._editor=null,this._initSeq=0,this._textContentValue=null}connectedCallback(){if(!this._value&&this.textContent.trim()){this._textContentValue=this.textContent;let e=this._textContentValue.split(`
`);for(;e.length&&!e[0].trim();)e.shift();for(;e.length&&!e[e.length-1].trim();)e.pop();let t=e.reduce((i,r)=>{if(!r.trim())return i;let o=r.match(/^(\s*)/);return Math.min(i,o?o[1].length:0)},1/0);t>0&&t<1/0?this._textContentValue=e.map(i=>i.slice(t)).join(`
`):this._textContentValue=e.join(`
`),this._value=this._textContentValue,this.textContent=""}super.connectedCallback()}disconnectedCallback(){this._initSeq++,this._destroyEditor(),super.disconnectedCallback()}_update(){if(this._editor){this._sync();return}super._update(),this._applyDynamicVars(),this._bootstrap()}_sync(){let e=this._editor;e.getValue()!==(this._value||"")&&e.setValue(this._value||""),e.setOption("mode",this._resolveMode()),e.setOption("lineNumbers",!!this._lineNumbers),e.setOption("lineWrapping",!!this._wrap),e.setOption("readOnly",!!this._readonly);let t=this._tabSize||2;e.setOption("tabSize",t),e.setOption("indentUnit",t),e.setOption("placeholder",this._placeholder||""),this._applyDynamicVars(),this._height==="auto"||e.setSize("100%",this._height||"12em"),e.refresh()}_applyDynamicVars(){let e={};this._height&&(e["--_height"]=this._height);let t=d(this._size);t&&(e["font-size"]=t),this._setDynamicVars(e)}async _bootstrap(){let e=++this._initSeq,t=this.shadowRoot?.querySelector(".textarea");if(t){this._setStatus("loading");try{let[i]=await Promise.all([s._loadCodeMirror(),this._injectCmCss()]);if(e!==this._initSeq)return;let r=this._tabSize||2;this._editor=i.fromTextArea(t,{lineNumbers:!!this._lineNumbers,mode:this._resolveMode(),tabSize:r,indentUnit:r,indentWithTabs:!1,lineWrapping:!!this._wrap,readOnly:!!this._readonly,placeholder:this._placeholder||"",viewportMargin:1/0}),this._editor.setValue(this._value||""),this._height==="auto"||this._editor.setSize("100%",this._height||"12em"),this._editor.on("change",()=>{let a=this._editor.getValue();a!==this._value&&(this._value=a,this.emit("ui-input",{value:a}))}),this._editor.on("blur",()=>{this._value=this._editor.getValue(),this.emit("ui-change",{value:this._value}),this.emit("ui-blur")}),this._editor.on("focus",()=>this.emit("ui-focus")),this._setStatus("ready")}catch(i){if(e!==this._initSeq)return;this._setStatus("error"),console.warn("[ui-input-code] CodeMirror failed to load",i)}}}_destroyEditor(){this._editor&&(this._editor.toTextArea(),this._editor=null)}async _injectCmCss(){if(this.shadowRoot.getElementById("__cm-css"))return;if(!s._cmCssText){let t=await fetch(Nt);if(!t.ok)throw new Error(`CodeMirror CSS fetch failed: ${t.status}`);s._cmCssText=await t.text()}let e=document.createElement("style");e.id="__cm-css",e.textContent=s._cmCssText,this.shadowRoot.prepend(e)}_setStatus(e){let t=this.shadowRoot?.querySelector(".loading"),i=this.shadowRoot?.querySelector(".error");!t||!i||(t.classList.toggle("hidden",e!=="loading"),i.classList.toggle("hidden",e!=="error"))}_resolveMode(){let e=(this._language||"json").trim().toLowerCase();return e==="json"?{name:"javascript",json:!0}:e==="js"||e==="javascript"?"javascript":e==="css"?"css":e==="html"||e==="htmlmixed"?"htmlmixed":e==="xml"?"xml":e}static _loadCodeMirror(){return window.CodeMirror?Promise.resolve(window.CodeMirror):(s._cmPromise||(s._cmPromise=(async()=>{let e=t=>new Promise((i,r)=>{let o=document.querySelector(`script[data-ui-cm="${t}"]`);if(o){if(o.dataset.loaded==="true")return i();o.addEventListener("load",i),o.addEventListener("error",r);return}let a=document.createElement("script");a.src=t,a.async=!0,a.dataset.uiCm=t,a.addEventListener("load",()=>{a.dataset.loaded="true",i()}),a.addEventListener("error",r),document.head.appendChild(a)});try{return await e(Ut),await Promise.all([e(Kt),e(Yt),e(Wt),e(Xt)]),await e(Gt),window.CodeMirror}catch(t){throw s._cmPromise=null,t}})()),s._cmPromise)}render(){let e=o=>o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;"),t=this._label?`<div class="label" part="label">${e(this._label)}</div>`:'<div class="label" part="label"></div>',i=this._placeholder?` placeholder="${e(this._placeholder)}"`:"",r=this._readonly?" readonly":"";return`
      ${t}
      <div class="frame" part="frame">
        <textarea class="textarea" part="textarea"${i}${r}>${e(this._value||"")}</textarea>
        <div class="loading" part="loading">Loading editor\u2026</div>
        <div class="error hidden" part="error">Editor failed to load.</div>
      </div>
    `}};customElements.define("ui-input-code",ve);var _e=class extends c{static properties={value:{type:String,default:"",reflect:!0},placeholder:{type:String,default:"",reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},rows:{type:Number,default:3,reflect:!0},minlength:{type:Number,default:0,reflect:!0},maxlength:{type:Number,default:0,reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},readonly:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0},autoresize:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: block; }
      .label .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }

      .textarea {
        display: block;
        width: 100%;
        box-sizing: border-box;
        padding: 0.5em 0.65em;
        border: 1px solid var(--_border, var(--ui-border-color, #d1d5db));
        border-radius: var(--ui-radius, 0.375em);
        background: var(--_bg, var(--ui-bg, #fff));
        color: var(--_color, var(--ui-text-color, #111827));
        font-family: inherit;
        font-size: inherit;
        line-height: 1.5;
        resize: vertical;
        transition: border-color 0.15s ease, box-shadow 0.15s ease;
      }
      :host([autoresize]) .textarea { resize: none; overflow: hidden; }
      .textarea:hover { border-color: var(--_border-hover, #9ca3af); }
      .textarea:focus {
        outline: none;
        border-color: var(--_focus-border, var(--ui-focus-ring, #6366f1));
        box-shadow: 0 0 0 0.15em var(--_focus-ring, rgba(99, 102, 241, 0.25));
      }
      .textarea::placeholder { color: var(--ui-text-muted, #9ca3af); }

      :host([error]) .textarea { border-color: var(--ui-red-500, #ef4444); }
      :host([error]) .textarea:focus {
        border-color: var(--ui-red-500, #ef4444);
        box-shadow: 0 0 0 0.15em rgba(239, 68, 68, 0.25);
      }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.3em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }
    `}constructor(){super(),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}connectedCallback(){super.connectedCallback(),this._attachListeners()}render(){let e=i=>i.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;"),t=[];return t.push('class="textarea"'),t.push('part="textarea"'),this.placeholder&&t.push(`placeholder="${e(this.placeholder)}"`),this.name&&t.push(`name="${e(this.name)}"`),this.rows&&t.push(`rows="${this.rows}"`),this.disabled&&t.push("disabled"),this.readonly&&t.push("readonly"),this.required&&t.push("required"),this.minlength&&t.push(`minlength="${this.minlength}"`),this.maxlength&&t.push(`maxlength="${this.maxlength}"`),this.error&&t.push('aria-invalid="true"'),this.label&&t.push(`aria-label="${e(this.label)}"`),`
      <label class="label" part="label">
        ${e(this.label)}<span class="req" aria-hidden="true">${this.required?" *":""}</span>
      </label>
      <textarea ${t.join(" ")}>${e(this.value)}</textarea>
      <div class="help" part="help">${e(this.help)}</div>
      <div class="error-msg" part="error">${e(this.error)}</div>
    `}_attachListeners(){let e=this.shadowRoot.querySelector(".textarea");e&&(e.addEventListener("input",this._onInput),e.addEventListener("change",this._onChange),e.addEventListener("focus",this._onFocus),e.addEventListener("blur",this._onBlur))}_update(){this._applyStyles(),super._update(),this._attachListeners(),this._syncValue()}_syncValue(){let e=this.shadowRoot.querySelector(".textarea");e&&e.value!==this.value&&(e.value=this.value)}_applyStyles(){let e={},t=d(this.size);if(t&&(e["font-size"]=t),this.background){let i=n(this.background);i&&(e["--_bg"]=i)}if(this.color){let i=n(this.color);i&&(e["--_color"]=i)}this._setDynamicVars(e)}_autoResize(){if(!this.autoresize)return;let e=this.shadowRoot.querySelector(".textarea");e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")}_onInput(e){this.value=e.target.value,this._autoResize(),this.emit("ui-input",{value:this.value})}_onChange(e){this.value=e.target.value,this.emit("ui-change",{value:this.value})}_onFocus(){this.emit("ui-focus")}_onBlur(){this.emit("ui-blur")}focus(){this.shadowRoot?.querySelector(".textarea")?.focus()}blur(){this.shadowRoot?.querySelector(".textarea")?.blur()}selectAll(){this.shadowRoot?.querySelector(".textarea")?.select()}};customElements.define("ui-input-textarea",_e);var ye=class extends c{static properties={checked:{type:Boolean,default:!1,reflect:!0},indeterminate:{type:Boolean,default:!1,reflect:!0},value:{type:String,default:"",reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: inline-block;
        line-height: 1.5;
        cursor: pointer;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .container {
        display: flex;
        align-items: center;
        gap: 0.5em;
        cursor: pointer;
      }

      .box {
        flex-shrink: 0;
        width: 0.95em;
        height: 0.95em;
        border: 0.12em solid var(--ui-border-color, #9ca3af);
        border-radius: 0.2em;
        background: var(--ui-bg, #fff);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.15s ease, border-color 0.15s ease;
        position: relative;
        overflow: hidden;
        line-height: 0;
      }

      :host([checked]) .box,
      :host([indeterminate]) .box {
        background: var(--_accent, var(--ui-indigo-500, #6366f1));
        border-color: var(--_accent, var(--ui-indigo-500, #6366f1));
      }

      .box svg {
        width: 0.62em;
        height: 0.62em;
        fill: none;
        stroke: #fff;
        stroke-width: 3;
        stroke-linecap: round;
        stroke-linejoin: round;
        opacity: 0;
        display: block;
        position: absolute;
        inset: 0;
        margin: auto;
        pointer-events: none;
      }
      :host([checked]) .box .check       { opacity: 1; }
      :host([indeterminate]) .box .dash   { opacity: 1; }
      :host([indeterminate]) .box .check  { opacity: 0; }

      .container:hover .box {
        border-color: var(--_accent, var(--ui-indigo-500, #6366f1));
      }

      .container:focus-within .box {
        box-shadow: 0 0 0 0.15em var(--_focus-ring, rgba(99, 102, 241, 0.25));
      }

      .hidden-input {
        position: absolute;
        width: 1px; height: 1px;
        overflow: hidden;
        clip: rect(0,0,0,0);
        white-space: nowrap;
        border: 0;
        padding: 0;
        margin: -1px;
      }

      .text { flex: 1; }
      .label-text {
        color: var(--ui-text-color, #374151);
        font-size: 1em;
      }
      .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.1em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }
      :host([error]) .box { border-color: var(--ui-red-500, #ef4444); }
    `}constructor(){super(),this._onClick=this._onClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this)}connectedCallback(){super.connectedCallback(),this.setAttribute("role","checkbox"),this.setAttribute("aria-checked",this.checked?"true":"false"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.addEventListener("click",this._onClick),this.addEventListener("keydown",this._onKeyDown)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this._onClick),this.removeEventListener("keydown",this._onKeyDown)}render(){let e=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;");return`
      <label class="container" part="container">
        <span class="box" part="box">
          <svg class="check" viewBox="0 0 24 24"><polyline points="4 12 10 18 20 6"/></svg>
          <svg class="dash" viewBox="0 0 24 24"><line x1="6" y1="12" x2="18" y2="12"/></svg>
        </span>
        <span class="text">
          <span class="label-text">${e(this.label)}<span class="req">${this.required?" *":""}</span></span>
          <div class="help" part="help">${e(this.help)}</div>
          <div class="error-msg" part="error">${e(this.error)}</div>
        </span>
      </label>
    `}_update(){this._applyStyles(),super._update(),this.setAttribute("aria-checked",this.indeterminate?"mixed":this.checked?"true":"false")}_applyStyles(){let e={},t=d(this.size);if(t&&(e["font-size"]=t),this.background){let i=n(this.background);i&&(e["--_accent"]=i)}this._setDynamicVars(e)}_toggle(){this.disabled||(this.indeterminate=!1,this.checked=!this.checked,this.setAttribute("aria-checked",this.checked?"true":"false"),this.emit("ui-change",{checked:this.checked,value:this.value}))}_onClick(e){e.preventDefault(),this._toggle()}_onKeyDown(e){(e.key===" "||e.key==="Enter")&&(e.preventDefault(),this._toggle())}};customElements.define("ui-input-checkbox",ye);var xe=class extends c{static properties={checked:{type:Boolean,default:!1,reflect:!0},value:{type:String,default:"",reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: inline-block;
        line-height: 1.5;
        cursor: pointer;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .container {
        display: flex;
        align-items: center;
        gap: 0.6em;
        cursor: pointer;
      }

      .track {
        position: relative;
        flex-shrink: 0;
        width: 2.5em;
        height: 1.4em;
        border-radius: 9999px;
        background: var(--ui-border-color, #d1d5db);
        transition: background-color 0.2s ease;
      }
      :host([checked]) .track {
        background: var(--_accent, var(--ui-indigo-500, #6366f1));
      }

      .thumb {
        position: absolute;
        top: 0.15em;
        left: 0.15em;
        width: 1.1em;
        height: 1.1em;
        border-radius: 50%;
        background: #fff;
        box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        transition: transform 0.2s ease;
      }
      :host([checked]) .thumb {
        transform: translateX(1.1em);
      }

      .container:focus-within .track {
        box-shadow: 0 0 0 0.15em var(--_focus-ring, rgba(99, 102, 241, 0.25));
      }

      .label-text {
        color: var(--ui-text-color, #374151);
        font-size: 1em;
      }
      .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.1em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }
    `}constructor(){super(),this._onClick=this._onClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this)}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-checked",this.checked?"true":"false"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.addEventListener("click",this._onClick),this.addEventListener("keydown",this._onKeyDown)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this._onClick),this.removeEventListener("keydown",this._onKeyDown)}render(){let e=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;");return`
      <label class="container" part="container">
        <span class="track" part="track">
          <span class="thumb" part="thumb"></span>
        </span>
        <span class="text">
          <span class="label-text">${e(this.label)}<span class="req">${this.required?" *":""}</span></span>
          <div class="help" part="help">${e(this.help)}</div>
          <div class="error-msg" part="error">${e(this.error)}</div>
        </span>
      </label>
    `}_update(){this._applyStyles(),super._update(),this.setAttribute("aria-checked",this.checked?"true":"false")}_applyStyles(){let e={},t=d(this.size);if(t&&(e["font-size"]=t),this.background){let i=n(this.background);i&&(e["--_accent"]=i)}this._setDynamicVars(e)}_toggle(){this.disabled||(this.checked=!this.checked,this.setAttribute("aria-checked",this.checked?"true":"false"),this.emit("ui-change",{checked:this.checked,value:this.value}))}_onClick(e){e.preventDefault(),this._toggle()}_onKeyDown(e){(e.key===" "||e.key==="Enter")&&(e.preventDefault(),this._toggle())}};customElements.define("ui-input-switch",xe);var ke=class extends c{static properties={checked:{type:Boolean,default:!1,reflect:!0},value:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
        cursor: pointer;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .container {
        display: flex;
        align-items: center;
        gap: 0.5em;
        cursor: pointer;
        padding: 0.15em 0;
      }

      .circle {
        flex-shrink: 0;
        width: 1.15em;
        height: 1.15em;
        border: 0.12em solid var(--ui-border-color, #9ca3af);
        border-radius: 50%;
        background: var(--ui-bg, #fff);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: border-color 0.15s ease;
      }

      .dot {
        width: 0.55em;
        height: 0.55em;
        border-radius: 50%;
        background: var(--_accent, var(--ui-indigo-500, #6366f1));
        transform: scale(0);
        transition: transform 0.15s ease;
      }

      :host([checked]) .circle {
        border-color: var(--_accent, var(--ui-indigo-500, #6366f1));
      }
      :host([checked]) .dot {
        transform: scale(1);
      }

      .container:hover .circle {
        border-color: var(--_accent, var(--ui-indigo-500, #6366f1));
      }

      .label-text {
        color: var(--ui-text-color, #374151);
        font-size: 1em;
      }
    `}constructor(){super(),this._onClick=this._onClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this)}connectedCallback(){super.connectedCallback(),this.setAttribute("role","radio"),this.setAttribute("aria-checked",this.checked?"true":"false"),this.hasAttribute("tabindex")||this.setAttribute("tabindex",this.checked?"0":"-1"),this.addEventListener("click",this._onClick),this.addEventListener("keydown",this._onKeyDown)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this._onClick),this.removeEventListener("keydown",this._onKeyDown)}render(){return`
      <label class="container" part="container">
        <span class="circle" part="circle">
          <span class="dot" part="dot"></span>
        </span>
        <span class="label-text">${(t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;"))(this.label)}</span>
      </label>
    `}_update(){super._update(),this.setAttribute("aria-checked",this.checked?"true":"false"),this.setAttribute("tabindex",this.checked?"0":"-1")}_select(){this.disabled||this.emit("ui-radio-select",{value:this.value})}_onClick(e){e.preventDefault(),this._select()}_onKeyDown(e){(e.key===" "||e.key==="Enter")&&(e.preventDefault(),this._select()),["ArrowDown","ArrowRight","ArrowUp","ArrowLeft"].includes(e.key)&&(e.preventDefault(),this.emit("ui-radio-nav",{key:e.key}))}};customElements.define("ui-input-radio",ke);var we=class extends c{static properties={value:{type:String,default:"",reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: block; }
      .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }

      .radios {
        display: flex;
        flex-direction: column;
        gap: 0.2em;
      }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.3em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }
    `}constructor(){super(),this._onRadioSelect=this._onRadioSelect.bind(this),this._onRadioNav=this._onRadioNav.bind(this)}connectedCallback(){super.connectedCallback(),this.setAttribute("role","radiogroup"),this.addEventListener("ui-radio-select",this._onRadioSelect),this.addEventListener("ui-radio-nav",this._onRadioNav),requestAnimationFrame(()=>this._syncChildren())}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("ui-radio-select",this._onRadioSelect),this.removeEventListener("ui-radio-nav",this._onRadioNav)}render(){let e=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;");return`
      <div class="label" part="label">
        ${e(this.label)}<span class="req">${this.required?" *":""}</span>
      </div>
      <div class="radios" part="radios">
        <slot></slot>
      </div>
      <div class="help" part="help">${e(this.help)}</div>
      <div class="error-msg" part="error">${e(this.error)}</div>
    `}_update(){this._applySize(),super._update(),this._syncChildren()}_applySize(){let e={},t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}get _radios(){return[...this.querySelectorAll("ui-input-radio")]}_syncChildren(){let e=this._radios,t=this.background?n(this.background):"";e.forEach(i=>{i.checked=i.value===this.value,this.disabled&&(i.disabled=!0),t&&i._setDynamicVars({"--_accent":t})})}_onRadioSelect(e){e.stopPropagation();let t=e.detail.value;t!==this.value&&(this.value=t,this._syncChildren(),this.emit("ui-change",{value:this.value}))}_onRadioNav(e){e.stopPropagation();let t=this._radios.filter(o=>!o.disabled);if(!t.length)return;let i=t.findIndex(o=>o.checked),r;e.detail.key==="ArrowDown"||e.detail.key==="ArrowRight"?r=i<t.length-1?i+1:0:r=i>0?i-1:t.length-1,this.value=t[r].value,this._syncChildren(),t[r].focus(),this.emit("ui-change",{value:this.value})}};customElements.define("ui-input-radio-group",we);var Se=class extends c{static properties={value:{type:String,default:"",reflect:!0},placeholder:{type:String,default:"Select\u2026",reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0},multiple:{type:Boolean,default:!1,reflect:!0},searchable:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
        position: relative;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: block; }
      .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }

      .trigger {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        box-sizing: border-box;
        padding: 0.45em 0.65em;
        border: 1px solid var(--_border, var(--ui-border-color, #d1d5db));
        border-radius: var(--ui-radius, 0.375em);
        background: var(--_bg, var(--ui-bg, #fff));
        color: var(--_color, var(--ui-text-color, #111827));
        font-family: inherit;
        font-size: inherit;
        cursor: pointer;
        transition: border-color 0.15s ease, box-shadow 0.15s ease;
        gap: 0.5em;
      }
      .trigger:hover { border-color: #9ca3af; }
      .trigger:focus {
        outline: none;
        border-color: var(--_focus-border, var(--ui-focus-ring, #6366f1));
        box-shadow: 0 0 0 0.15em var(--_focus-ring, rgba(99, 102, 241, 0.25));
      }

      :host([error]) .trigger { border-color: var(--ui-red-500, #ef4444); }

      .display-value { flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
      .placeholder   { color: var(--ui-text-muted, #9ca3af); }

      .caret {
        flex-shrink: 0;
        width: 0.8em;
        height: 0.8em;
        fill: none;
        stroke: currentColor;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
        transition: transform 0.2s ease;
      }
      :host([data-open]) .caret { transform: rotate(180deg); }

      .dropdown {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        z-index: 999;
        margin-top: 0.25em;
        border: 1px solid var(--ui-border-color, #d1d5db);
        border-radius: var(--ui-radius, 0.375em);
        background: var(--ui-bg, #fff);
        box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        max-height: 15em;
        overflow-y: auto;
      }
      :host([data-open]) .dropdown { display: block; }

      .search-box {
        display: none;
        padding: 0.35em;
        border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
      }
      :host([searchable][data-open]) .search-box { display: block; }

      .search-input {
        width: 100%;
        box-sizing: border-box;
        padding: 0.3em 0.5em;
        border: 1px solid var(--ui-border-color, #d1d5db);
        border-radius: var(--ui-radius, 0.25em);
        font-family: inherit;
        font-size: 0.9em;
        outline: none;
      }
      .search-input:focus { border-color: var(--ui-focus-ring, #6366f1); }

      .option {
        padding: 0.45em 0.65em;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.4em;
        transition: background-color 0.1s ease;
      }
      .option:hover { background: var(--ui-bg-subtle, #f3f4f6); }
      .option[data-selected] {
        background: var(--_accent-bg, rgba(99, 102, 241, 0.08));
        font-weight: 600;
      }
      .option[data-hidden] { display: none; }

      .option .check-icon {
        width: 0.85em; height: 0.85em;
        fill: none; stroke: var(--_accent, var(--ui-indigo-500, #6366f1));
        stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round;
        visibility: hidden;
      }
      .option[data-selected] .check-icon { visibility: visible; }

      .no-results {
        display: none;
        padding: 0.65em;
        text-align: center;
        color: var(--ui-text-muted, #9ca3af);
        font-size: 0.9em;
      }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.3em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }

      .tag {
        display: inline-flex;
        align-items: center;
        gap: 0.25em;
        padding: 0.1em 0.4em;
        border-radius: 0.25em;
        background: var(--ui-bg-subtle, #e5e7eb);
        font-size: 0.85em;
        margin: 0.1em 0.15em;
      }
      .tag-remove {
        cursor: pointer;
        font-size: 1em;
        line-height: 1;
        opacity: 0.6;
        background: none;
        border: none;
        padding: 0;
        font-family: inherit;
      }
      .tag-remove:hover { opacity: 1; }
      .tags { display: flex; flex-wrap: wrap; gap: 0.15em; flex: 1; }
    `}constructor(){super(),this._open=!1,this._options=[],this._filter="",this._onClick=this._onClick.bind(this),this._onOutsideClick=this._onOutsideClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onSearchInput=this._onSearchInput.bind(this),this._onOptionClick=this._onOptionClick.bind(this),this._focusedOptionIdx=-1}connectedCallback(){super.connectedCallback(),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this._readOptions(),this._observer=new MutationObserver(()=>{this._readOptions(),this._renderOptions()}),this._observer.observe(this,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),requestAnimationFrame(()=>this._renderOptions())}disconnectedCallback(){super.disconnectedCallback(),this._observer?.disconnect(),document.removeEventListener("click",this._onOutsideClick)}_readOptions(){this._options=[...this.querySelectorAll("option")].map(e=>({value:e.value,text:e.textContent.trim(),disabled:e.disabled}))}render(){let e=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;");return`
      <div class="label" part="label">
        ${e(this.label)}<span class="req">${this.required?" *":""}</span>
      </div>
      <div class="trigger" part="trigger" tabindex="0" role="combobox" aria-expanded="false" aria-haspopup="listbox">
        <span class="display-value"></span>
        <svg class="caret" viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"/></svg>
      </div>
      <div class="dropdown" part="dropdown" role="listbox">
        <div class="search-box">
          <input class="search-input" type="text" placeholder="Search\u2026" />
        </div>
        <div class="options-list"></div>
        <div class="no-results">No results found</div>
      </div>
      <div class="help" part="help">${e(this.help)}</div>
      <div class="error-msg" part="error">${e(this.error)}</div>
      <slot style="display:none"></slot>
    `}_update(){this._applyStyles(),super._update(),this._attachInternalListeners(),this._renderOptions(),this._updateDisplay()}_applyStyles(){let e={},t=d(this.size);if(t&&(e["font-size"]=t),this.background){let i=n(this.background);i&&(e["--_bg"]=i)}if(this.color){let i=n(this.color);i&&(e["--_color"]=i)}this._setDynamicVars(e)}_attachInternalListeners(){let e=this.shadowRoot.querySelector(".trigger"),t=this.shadowRoot.querySelector(".search-input");e&&(e.addEventListener("click",this._onClick),e.addEventListener("keydown",this._onKeyDown)),t&&t.addEventListener("input",this._onSearchInput)}_renderOptions(){let e=this.shadowRoot.querySelector(".options-list");if(!e)return;let t=this._selectedValues(),i=a=>a.replace(/&/g,"&amp;").replace(/</g,"&lt;");e.innerHTML=this._options.map((a,l)=>`
      <div class="option" role="option"
           data-index="${l}" data-value="${i(a.value)}"
           ${t.includes(a.value)?"data-selected":""}
           ${a.disabled?'data-disabled style="opacity:0.5;pointer-events:none"':""}
           ${this._filter&&!a.text.toLowerCase().includes(this._filter.toLowerCase())?"data-hidden":""}>
        ${this.multiple?'<svg class="check-icon" viewBox="0 0 24 24"><polyline points="4 12 10 18 20 6"/></svg>':""}
        <span>${i(a.text)}</span>
      </div>
    `).join("");let r=this.shadowRoot.querySelector(".no-results"),o=e.querySelectorAll(".option:not([data-hidden])");r&&(r.style.display=o.length===0?"block":"none"),e.querySelectorAll(".option:not([data-disabled])").forEach(a=>{a.addEventListener("click",this._onOptionClick)}),this._updateDisplay()}_selectedValues(){return this.value?this.value.split(",").map(e=>e.trim()).filter(Boolean):[]}_updateDisplay(){let e=this.shadowRoot.querySelector(".display-value");if(!e)return;let t=this._selectedValues();if(!t.length){e.innerHTML=`<span class="placeholder">${this.placeholder}</span>`;return}if(this.multiple){let i=r=>r.replace(/&/g,"&amp;").replace(/</g,"&lt;");e.innerHTML=`<span class="tags">${t.map(r=>{let o=this._options.find(l=>l.value===r),a=o?o.text:r;return`<span class="tag">${i(a)}<button class="tag-remove" data-value="${i(r)}" aria-label="Remove">\xD7</button></span>`}).join("")}</span>`,e.querySelectorAll(".tag-remove").forEach(r=>{r.addEventListener("click",o=>{o.stopPropagation();let a=r.getAttribute("data-value"),l=this._selectedValues().filter(h=>h!==a);this.value=l.join(","),this._renderOptions(),this.emit("ui-change",{value:this.value})})})}else{let i=this._options.find(r=>r.value===t[0]);e.textContent=i?i.text:t[0]}}_openDropdown(){if(this._open)return;this._open=!0,this.setAttribute("data-open","");let e=this.shadowRoot.querySelector(".trigger");e&&e.setAttribute("aria-expanded","true"),this._filter="";let t=this.shadowRoot.querySelector(".search-input");t&&(t.value=""),this._renderOptions(),this.searchable&&requestAnimationFrame(()=>t?.focus()),document.addEventListener("click",this._onOutsideClick),this.emit("ui-focus")}_closeDropdown(){if(!this._open)return;this._open=!1,this.removeAttribute("data-open");let e=this.shadowRoot.querySelector(".trigger");e&&e.setAttribute("aria-expanded","false"),this._focusedOptionIdx=-1,document.removeEventListener("click",this._onOutsideClick),this.emit("ui-blur")}_onClick(e){e.stopPropagation(),this._open?this._closeDropdown():this._openDropdown()}_onOutsideClick(e){!this.contains(e.target)&&!this.shadowRoot.contains(e.target)&&this._closeDropdown()}_onKeyDown(e){if(e.key==="Escape"){this._closeDropdown();return}if(e.key==="Enter"||e.key===" "){if(e.preventDefault(),!this._open){this._openDropdown();return}let t=this.shadowRoot.querySelectorAll(".option:not([data-hidden]):not([data-disabled])");this._focusedOptionIdx>=0&&t[this._focusedOptionIdx]&&this._selectOption(t[this._focusedOptionIdx].getAttribute("data-value"));return}if(e.key==="ArrowDown"||e.key==="ArrowUp"){if(e.preventDefault(),!this._open){this._openDropdown();return}let t=this.shadowRoot.querySelectorAll(".option:not([data-hidden]):not([data-disabled])");if(!t.length)return;e.key==="ArrowDown"?this._focusedOptionIdx=Math.min(this._focusedOptionIdx+1,t.length-1):this._focusedOptionIdx=Math.max(this._focusedOptionIdx-1,0),t.forEach((i,r)=>i.style.background=r===this._focusedOptionIdx?"var(--ui-bg-subtle, #f3f4f6)":""),t[this._focusedOptionIdx]?.scrollIntoView({block:"nearest"})}}_onSearchInput(e){this._filter=e.target.value,this._focusedOptionIdx=-1,this._renderOptions()}_onOptionClick(e){e.stopPropagation();let i=e.currentTarget.getAttribute("data-value");this._selectOption(i)}_selectOption(e){if(this.multiple){let t=this._selectedValues();t.includes(e)?this.value=t.filter(i=>i!==e).join(","):this.value=[...t,e].join(","),this._renderOptions()}else this.value=e,this._renderOptions(),this._closeDropdown();this.emit("ui-change",{value:this.value})}};customElements.define("ui-input-select",Se);var Ce=class extends c{static properties={value:{type:Number,default:50,reflect:!0},min:{type:Number,default:0,reflect:!0},max:{type:Number,default:100,reflect:!0},step:{type:Number,default:1,reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0},showvalue:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: flex; justify-content: space-between; align-items: center; }
      .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }



      .slider-wrap {
        display: flex;
        align-items: center;
        gap: 0.75em;
      }

      .slider {
        -webkit-appearance: none;
        appearance: none;
        flex: 1;
        height: 0.35em;
        border-radius: 9999px;
        background: var(--ui-border-color, #d1d5db);
        outline: none;
        cursor: pointer;
      }

      .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 1.15em;
        height: 1.15em;
        border-radius: 50%;
        background: var(--_accent, var(--ui-indigo-500, #6366f1));
        cursor: pointer;
        border: 2px solid #fff;
        box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        transition: box-shadow 0.15s ease;
      }
      .slider::-moz-range-thumb {
        width: 1.15em;
        height: 1.15em;
        border-radius: 50%;
        background: var(--_accent, var(--ui-indigo-500, #6366f1));
        cursor: pointer;
        border: 2px solid #fff;
        box-shadow: 0 1px 3px rgba(0,0,0,0.2);
      }

      .slider:focus::-webkit-slider-thumb {
        box-shadow: 0 0 0 0.2em var(--_focus-ring, rgba(99, 102, 241, 0.25));
      }
      .slider:focus::-moz-range-thumb {
        box-shadow: 0 0 0 0.2em var(--_focus-ring, rgba(99, 102, 241, 0.25));
      }

      .val-display {
        display: none;
        min-width: 2.5em;
        text-align: center;
        font-variant-numeric: tabular-nums;
        font-size: 0.9em;
        color: var(--ui-text-color, #374151);
      }
      :host([showvalue]) .val-display { display: block; }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.3em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }
    `}constructor(){super(),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this)}connectedCallback(){super.connectedCallback(),this._attachListeners()}render(){let e=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;");return`
      <div class="label" part="label">
        <span>${e(this.label)}<span class="req">${this.required?" *":""}</span></span>
      </div>
      <div class="slider-wrap">
        <input class="slider" part="slider" type="range"
               min="${this.min}" max="${this.max}" step="${this.step}" value="${this.value}"
               ${this.disabled?"disabled":""}
               ${this.name?`name="${e(this.name)}"`:""}
               aria-valuemin="${this.min}" aria-valuemax="${this.max}" aria-valuenow="${this.value}"
               ${this.label?`aria-label="${e(this.label)}"`:""} />
        <span class="val-display" part="value">${this.value}</span>
      </div>
      <div class="help" part="help">${e(this.help)}</div>
      <div class="error-msg" part="error">${e(this.error)}</div>
    `}_attachListeners(){let e=this.shadowRoot.querySelector(".slider");e&&(e.addEventListener("input",this._onInput),e.addEventListener("change",this._onChange))}_update(){this._applyStyles(),super._update(),this._attachListeners(),this._syncSlider()}_syncSlider(){let e=this.shadowRoot.querySelector(".slider");e&&Number(e.value)!==this.value&&(e.value=this.value)}_applyStyles(){let e={},t=d(this.size);if(t&&(e["font-size"]=t),this.background){let i=n(this.background);i&&(e["--_accent"]=i)}this._setDynamicVars(e)}_onInput(e){let t=Number(e.target.value);this._value=t;let i=this.shadowRoot.querySelector(".val-display");i&&(i.textContent=t),this.emit("ui-input",{value:t})}_onChange(e){this.value=Number(e.target.value),this.emit("ui-change",{value:this.value})}};customElements.define("ui-input-slider",Ce);var ze=class extends c{static properties={accept:{type:String,default:"",reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0},multiple:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: block; }
      .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }

      .drop-zone {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.5em;
        padding: 1.5em;
        border: 2px dashed var(--_border, var(--ui-border-color, #d1d5db));
        border-radius: var(--ui-radius, 0.375em);
        background: var(--_bg, var(--ui-bg-subtle, #f9fafb));
        cursor: pointer;
        transition: border-color 0.15s ease, background-color 0.15s ease;
        text-align: center;
      }
      .drop-zone:hover {
        border-color: var(--_accent, var(--ui-indigo-500, #6366f1));
        background: rgba(99, 102, 241, 0.04);
      }
      :host([data-dragging]) .drop-zone {
        border-color: var(--_accent, var(--ui-indigo-500, #6366f1));
        background: rgba(99, 102, 241, 0.08);
      }
      :host([error]) .drop-zone { border-color: var(--ui-red-500, #ef4444); }

      .drop-icon {
        width: 2em;
        height: 2em;
        fill: none;
        stroke: var(--ui-text-muted, #9ca3af);
        stroke-width: 1.5;
        stroke-linecap: round;
        stroke-linejoin: round;
      }
      .drop-text { color: var(--ui-text-muted, #6b7280); font-size: 0.9em; }
      .drop-text strong { color: var(--_accent, var(--ui-indigo-500, #6366f1)); cursor: pointer; }

      .hidden-input {
        position: absolute;
        width: 1px; height: 1px;
        overflow: hidden;
        clip: rect(0,0,0,0);
        white-space: nowrap;
        border: 0;
        padding: 0;
        margin: -1px;
      }

      .file-list {
        margin-top: 0.5em;
        display: flex;
        flex-direction: column;
        gap: 0.3em;
      }
      .file-item {
        display: flex;
        align-items: center;
        gap: 0.5em;
        padding: 0.3em 0.5em;
        border-radius: var(--ui-radius, 0.25em);
        background: var(--ui-bg-subtle, #f3f4f6);
        font-size: 0.85em;
      }
      .file-name { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
      .file-size { color: var(--ui-text-muted, #9ca3af); font-size: 0.9em; flex-shrink: 0; }
      .file-remove {
        cursor: pointer; background: none; border: none;
        font-size: 1.1em; opacity: 0.5; padding: 0;
        font-family: inherit; line-height: 1;
      }
      .file-remove:hover { opacity: 1; }

      .file-icon {
        width: 1em; height: 1em;
        fill: none; stroke: var(--ui-text-muted, #9ca3af);
        stroke-width: 1.5; stroke-linecap: round; stroke-linejoin: round;
        flex-shrink: 0;
      }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.3em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }
    `}constructor(){super(),this._files=[],this._onZoneClick=this._onZoneClick.bind(this),this._onFileChange=this._onFileChange.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragLeave=this._onDragLeave.bind(this),this._onDrop=this._onDrop.bind(this)}connectedCallback(){super.connectedCallback(),this._attachListeners()}render(){let e=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;");return`
      <div class="label" part="label">
        ${e(this.label)}<span class="req">${this.required?" *":""}</span>
      </div>
      <div class="drop-zone" part="dropzone">
        <svg class="drop-icon" viewBox="0 0 24 24">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="17 8 12 3 7 8"/>
          <line x1="12" y1="3" x2="12" y2="15"/>
        </svg>
        <div class="drop-text"><strong>Click to upload</strong> or drag and drop</div>
        ${this.accept?`<div class="drop-text" style="font-size:0.8em">${e(this.accept)}</div>`:""}
        <input class="hidden-input" type="file"
               ${this.accept?`accept="${e(this.accept)}"`:""}
               ${this.multiple?"multiple":""}
               ${this.name?`name="${e(this.name)}"`:""} />
      </div>
      <div class="file-list" part="filelist"></div>
      <div class="help" part="help">${e(this.help)}</div>
      <div class="error-msg" part="error">${e(this.error)}</div>
    `}_attachListeners(){let e=this.shadowRoot.querySelector(".drop-zone"),t=this.shadowRoot.querySelector(".hidden-input");e&&(e.addEventListener("click",this._onZoneClick),e.addEventListener("dragover",this._onDragOver),e.addEventListener("dragleave",this._onDragLeave),e.addEventListener("drop",this._onDrop)),t&&t.addEventListener("change",this._onFileChange)}_update(){this._applyStyles(),super._update(),this._attachListeners(),this._renderFileList()}_applyStyles(){let e={},t=d(this.size);if(t&&(e["font-size"]=t),this.background){let i=n(this.background);i&&(e["--_bg"]=i)}this._setDynamicVars(e)}_onZoneClick(){this.shadowRoot.querySelector(".hidden-input")?.click()}_onFileChange(e){let t=[...e.target.files];this._setFiles(t)}_onDragOver(e){e.preventDefault(),this.setAttribute("data-dragging","")}_onDragLeave(){this.removeAttribute("data-dragging")}_onDrop(e){e.preventDefault(),this.removeAttribute("data-dragging");let t=[...e.dataTransfer.files];this._setFiles(t)}_setFiles(e){this.multiple?this._files=[...this._files,...e]:this._files=e.slice(0,1),this._renderFileList(),this.emit("ui-change",{files:this._files})}_renderFileList(){let e=this.shadowRoot.querySelector(".file-list");if(!e)return;if(!this._files.length){e.innerHTML="";return}let t=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;");e.innerHTML=this._files.map((i,r)=>`
      <div class="file-item" data-index="${r}">
        <svg class="file-icon" viewBox="0 0 24 24">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
        </svg>
        <span class="file-name">${t(i.name)}</span>
        <span class="file-size">${this._formatSize(i.size)}</span>
        <button class="file-remove" data-index="${r}" aria-label="Remove">\xD7</button>
      </div>
    `).join(""),e.querySelectorAll(".file-remove").forEach(i=>{i.addEventListener("click",()=>{let r=Number(i.getAttribute("data-index"));this._files.splice(r,1),this._renderFileList(),this.emit("ui-change",{files:this._files})})})}_formatSize(e){return e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB"}get files(){return this._files}clear(){this._files=[],this._renderFileList();let e=this.shadowRoot.querySelector(".hidden-input");e&&(e.value="")}};customElements.define("ui-input-file",ze);var Ee=class s extends c{static properties={value:{type:String,default:"#6366f1",reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0}};static parseColor(e){if(!e||typeof e!="string")return null;e=e.trim().toLowerCase();let t=s._THEME_PALETTE.find(l=>l.token===e);t&&(e=t.hex);let i=n(e);if(i&&i!==e&&(e=i),/^[a-z]+$/i.test(e)&&e!=="transparent"){let l=s._scratchCtx();l.fillStyle="#000",l.fillStyle=e;let h=l.fillStyle;if(h!=="#000000"||e==="black")e=h;else return null}let r=e.match(/^#([0-9a-f]{3,8})$/i);if(r){let l=r[1];l.length===3&&(l=l[0]+l[0]+l[1]+l[1]+l[2]+l[2]),l.length===4&&(l=l[0]+l[0]+l[1]+l[1]+l[2]+l[2]+l[3]+l[3]);let h=parseInt(l.slice(0,2),16),u=parseInt(l.slice(2,4),16),f=parseInt(l.slice(4,6),16),m=l.length===8?parseInt(l.slice(6,8),16)/255:1;return s._rgbToHsl(h,u,f,m)}let o=e.match(/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*([\d.]+)\s*)?\)$/);if(o)return s._rgbToHsl(+o[1],+o[2],+o[3],o[4]!=null?+o[4]:1);let a=e.match(/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%?\s*,\s*([\d.]+)%?\s*(?:,\s*([\d.]+)\s*)?\)$/);return a?{h:+a[1]%360,s:+a[2],l:+a[3],a:a[4]!=null?+a[4]:1}:null}static _scratchCtx(){if(!s.__ctx){let e=document.createElement("canvas");e.width=e.height=1,s.__ctx=e.getContext("2d")}return s.__ctx}static _rgbToHsl(e,t,i,r=1){e/=255,t/=255,i/=255;let o=Math.max(e,t,i),a=Math.min(e,t,i),l,h,u=(o+a)/2;if(o===a)l=h=0;else{let f=o-a;h=u>.5?f/(2-o-a):f/(o+a),o===e?l=((t-i)/f+(t<i?6:0))/6:o===t?l=((i-e)/f+2)/6:l=((e-t)/f+4)/6}return{h:Math.round(l*360),s:Math.round(h*100),l:Math.round(u*100),a:r}}static _hslToRgb(e,t,i){e/=360,t/=100,i/=100;let r,o,a;if(t===0)r=o=a=i;else{let l=(f,m,v)=>(v<0&&(v+=1),v>1&&(v-=1),v<.16666666666666666?f+(m-f)*6*v:v<.5?m:v<.6666666666666666?f+(m-f)*(.6666666666666666-v)*6:f),h=i<.5?i*(1+t):i+t-i*t,u=2*i-h;r=l(u,h,e+1/3),o=l(u,h,e),a=l(u,h,e-1/3)}return{r:Math.round(r*255),g:Math.round(o*255),b:Math.round(a*255)}}static _hslToHex(e,t,i,r=1){let{r:o,g:a,b:l}=s._hslToRgb(e,t,i),h="#"+[o,a,l].map(u=>u.toString(16).padStart(2,"0")).join("");return r<1?h+Math.round(r*255).toString(16).padStart(2,"0"):h}static formatColor(e,t,i,r,o){if(o==="rgb"){let{r:a,g:l,b:h}=s._hslToRgb(e,t,i);return r<1?`rgba(${a}, ${l}, ${h}, ${r})`:`rgb(${a}, ${l}, ${h})`}return o==="hsl"?r<1?`hsla(${e}, ${t}%, ${i}%, ${r})`:`hsl(${e}, ${t}%, ${i}%)`:s._hslToHex(e,t,i,r)}static _hsbToHsl(e,t,i){t/=100,i/=100;let r=i*(1-t/2),o=r===0||r===1?0:(i-r)/Math.min(r,1-r);return{h:e,s:Math.round(o*100),l:Math.round(r*100)}}static _hslToHsb(e,t,i){t/=100,i/=100;let r=i+t*Math.min(i,1-i),o=r===0?0:2*(1-i/r);return{h:e,s:Math.round(o*100),b:Math.round(r*100)}}static _recentColors=[];static _MAX_RECENT=8;static _addRecent(e){let t=s._recentColors,i=t.indexOf(e);i!==-1&&t.splice(i,1),t.unshift(e),t.length>s._MAX_RECENT&&(t.length=s._MAX_RECENT)}static _THEME_SHADES=[50,100,200,300,400,500,600,700,800,900,950];static _THEME_FAMILIES=[{name:"gray",hex:"#6b7280"},{name:"red",hex:"#ef4444"},{name:"orange",hex:"#f97316"},{name:"amber",hex:"#f59e0b"},{name:"yellow",hex:"#eab308"},{name:"lime",hex:"#84cc16"},{name:"green",hex:"#22c55e"},{name:"emerald",hex:"#10b981"},{name:"teal",hex:"#14b8a6"},{name:"cyan",hex:"#06b6d4"},{name:"sky",hex:"#0ea5e9"},{name:"blue",hex:"#3b82f6"},{name:"indigo",hex:"#6366f1"},{name:"violet",hex:"#8b5cf6"},{name:"purple",hex:"#a855f7"},{name:"fuchsia",hex:"#d946ef"},{name:"pink",hex:"#ec4899"},{name:"rose",hex:"#f43f5e"}];static _THEME_PALETTE=(()=>{let e=[50,100,200,300,400,500,600,700,800,900,950],t=[["gray","#f9fafb","#f3f4f6","#e5e7eb","#d1d5db","#9ca3af","#6b7280","#4b5563","#374151","#1f2937","#111827","#030712"],["red","#fef2f2","#fee2e2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c","#991b1b","#7f1d1d","#450a0a"],["orange","#fff7ed","#ffedd5","#fed7aa","#fdba74","#fb923c","#f97316","#ea580c","#c2410c","#9a3412","#7c2d12","#431407"],["amber","#fffbeb","#fef3c7","#fde68a","#fcd34d","#fbbf24","#f59e0b","#d97706","#b45309","#92400e","#78350f","#451a03"],["yellow","#fefce8","#fef9c3","#fef08a","#fde047","#facc15","#eab308","#ca8a04","#a16207","#854d0e","#713f12","#422006"],["lime","#f7fee7","#ecfccb","#d9f99d","#bef264","#a3e635","#84cc16","#65a30d","#4d7c0f","#3f6212","#365314","#1a2e05"],["green","#f0fdf4","#dcfce7","#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d","#166534","#14532d","#052e16"],["emerald","#ecfdf5","#d1fae5","#a7f3d0","#6ee7b7","#34d399","#10b981","#059669","#047857","#065f46","#064e3b","#022c22"],["teal","#f0fdfa","#ccfbf1","#99f6e4","#5eead4","#2dd4bf","#14b8a6","#0d9488","#0f766e","#115e59","#134e4a","#042f2e"],["cyan","#ecfeff","#cffafe","#a5f3fc","#67e8f9","#22d3ee","#06b6d4","#0891b2","#0e7490","#155e75","#164e63","#083344"],["sky","#f0f9ff","#e0f2fe","#bae6fd","#7dd3fc","#38bdf8","#0ea5e9","#0284c7","#0369a1","#075985","#0c4a6e","#082f49"],["blue","#eff6ff","#dbeafe","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8","#1e40af","#1e3a8a","#172554"],["indigo","#eef2ff","#e0e7ff","#c7d2fe","#a5b4fc","#818cf8","#6366f1","#4f46e5","#4338ca","#3730a3","#312e81","#1e1b4b"],["violet","#f5f3ff","#ede9fe","#ddd6fe","#c4b5fd","#a78bfa","#8b5cf6","#7c3aed","#6d28d9","#5b21b6","#4c1d95","#2e1065"],["purple","#faf5ff","#f3e8ff","#e9d5ff","#d8b4fe","#c084fc","#a855f7","#9333ea","#7e22ce","#6b21a8","#581c87","#3b0764"],["fuchsia","#fdf4ff","#fae8ff","#f5d0fe","#f0abfc","#e879f9","#d946ef","#c026d3","#a21caf","#86198f","#701a75","#4a044e"],["pink","#fdf2f8","#fce7f3","#fbcfe8","#f9a8d4","#f472b6","#ec4899","#db2777","#be185d","#9d174d","#831843","#500724"],["rose","#fff1f2","#ffe4e6","#fecdd3","#fda4af","#fb7185","#f43f5e","#e11d48","#be123c","#9f1239","#881337","#4c0519"]],i=[];for(let[r,...o]of t)for(let a=0;a<e.length;a++)i.push({token:`${r}-${e[a]}`,hex:o[a]});return i})();static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
        position: relative;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: block; }
      .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }

      .trigger {
        display: inline-flex;
        align-items: center;
        gap: 0.5em;
        padding: 0.35em 0.6em;
        border: 1px solid var(--ui-border-color, #d1d5db);
        border-radius: var(--ui-radius, 0.375em);
        background: var(--ui-bg, #fff);
        cursor: pointer;
        transition: border-color 0.15s ease;
        font-family: inherit;
        font-size: inherit;
      }
      .trigger:hover { border-color: #9ca3af; }
      .trigger:focus-within {
        outline: none;
        border-color: var(--ui-focus-ring, #6366f1);
        box-shadow: 0 0 0 0.15em rgba(99, 102, 241, 0.25);
      }
      :host([error]) .trigger { border-color: var(--ui-red-500, #ef4444); }

      .swatch {
        display: block;
        position: relative;
        width: 1.5em; height: 1.5em;
        border-radius: 0.25em;
        border: 1px solid rgba(0,0,0,0.15);
        flex-shrink: 0;
        overflow: hidden;
        /* checkerboard for alpha */
        background-image:
          linear-gradient(45deg, #ccc 25%, transparent 25%),
          linear-gradient(-45deg, #ccc 25%, transparent 25%),
          linear-gradient(45deg, transparent 75%, #ccc 75%),
          linear-gradient(-45deg, transparent 75%, #ccc 75%);
        background-size: 0.5em 0.5em;
        background-position: 0 0, 0 0.25em, 0.25em -0.25em, -0.25em 0;
      }
      .swatch-color {
        position: absolute;
        inset: 0;
        display: block;
        border-radius: 0.2em;
      }
      .value-text {
        font-family: var(--ui-font-mono, monospace);
        font-size: 0.9em;
        color: var(--ui-text-color, #374151);
        min-width: 5em;
      }

      .panel {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        z-index: 999;
        margin-top: 0.25em;
        padding: 0.75em;
        border: 1px solid var(--ui-border-color, #d1d5db);
        border-radius: var(--ui-radius, 0.375em);
        background: var(--ui-bg, #fff);
        box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        width: min-content;
        min-width: 16em;
      }
      :host([data-open]) .panel { display: block; }

      /* \u2500\u2500 Tabs \u2500\u2500 */
      .panel-tabs {
        display: flex;
        margin-bottom: 0.6em;
        border: 1px solid var(--ui-border-color, #d1d5db);
        border-radius: var(--ui-radius, 0.25em);
        overflow: hidden;
      }
      .panel-tab {
        flex: 1;
        padding: 0.3em 0;
        text-align: center;
        cursor: pointer;
        font-size: 0.75em;
        font-weight: 600;
        font-family: inherit;
        background: transparent;
        border: none;
        color: var(--ui-text-muted, #6b7280);
        transition: background 0.15s ease, color 0.15s ease;
      }
      .panel-tab:not(:last-child) { border-right: 1px solid var(--ui-border-color, #d1d5db); }
      .panel-tab[data-active] {
        background: var(--ui-indigo-500, #6366f1);
        color: #fff;
      }

      .panel-custom { display: none; }
      .panel-theme {}

      /* \u2500\u2500 Custom panel: Canvas & sliders \u2500\u2500 */
      .sat-bright-canvas {
        width: 100%;
        height: 10em;
        border-radius: 0.3em;
        cursor: crosshair;
        display: block;
        border: 1px solid var(--ui-border-color, #d1d5db);
      }
      .sb-cursor {
        width: 0.9em; height: 0.9em;
        border: 2px solid #fff;
        border-radius: 50%;
        box-shadow: 0 0 0 1px rgba(0,0,0,0.3), inset 0 0 0 1px rgba(0,0,0,0.2);
        position: absolute;
        pointer-events: none;
        transform: translate(-50%, -50%);
      }
      .canvas-wrap {
        position: relative;
        margin-bottom: 0.5em;
      }

      .slider-row {
        display: flex;
        align-items: center;
        gap: 0.4em;
        margin-bottom: 0.35em;
      }
      .slider-preview {
        width: 2em; height: 2em;
        border-radius: 0.3em;
        border: 1px solid rgba(0,0,0,0.15);
        flex-shrink: 0;
        /* checkerboard */
        background-image:
          linear-gradient(45deg, #ccc 25%, transparent 25%),
          linear-gradient(-45deg, #ccc 25%, transparent 25%),
          linear-gradient(45deg, transparent 75%, #ccc 75%),
          linear-gradient(-45deg, transparent 75%, #ccc 75%);
        background-size: 0.5em 0.5em;
        background-position: 0 0, 0 0.25em, 0.25em -0.25em, -0.25em 0;
      }
      .slider-preview-color {
        width: 100%; height: 100%;
        border-radius: 0.25em;
      }
      .sliders-col {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 0.2em;
      }
      .track-wrap {
        position: relative;
        height: 0.75em;
        border-radius: 0.375em;
        cursor: pointer;
      }
      .track {
        width: 100%;
        height: 100%;
        border-radius: 0.375em;
        border: 1px solid rgba(0,0,0,0.1);
      }
      .hue-track {
        background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
      }
      .alpha-track {
        background-image:
          linear-gradient(45deg, #ccc 25%, transparent 25%),
          linear-gradient(-45deg, #ccc 25%, transparent 25%),
          linear-gradient(45deg, transparent 75%, #ccc 75%),
          linear-gradient(-45deg, transparent 75%, #ccc 75%);
        background-size: 0.4em 0.4em;
        background-position: 0 0, 0 0.2em, 0.2em -0.2em, -0.2em 0;
        position: relative;
        overflow: hidden;
      }
      .alpha-gradient {
        position: absolute;
        inset: 0;
        border-radius: 0.375em;
      }
      .slider-thumb {
        width: 0.75em; height: 0.75em;
        border: 2px solid #fff;
        border-radius: 50%;
        box-shadow: 0 0 0 1px rgba(0,0,0,0.3);
        position: absolute;
        top: 50%;
        transform: translate(-50%, -50%);
        pointer-events: none;
      }

      /* \u2500\u2500 Input row \u2500\u2500 */
      .input-row {
        display: flex;
        gap: 0.3em;
        align-items: center;
        margin-top: 0.35em;
      }
      .format-btn {
        font-size: 0.65em;
        font-weight: 700;
        font-family: inherit;
        background: var(--ui-bg-subtle, #f9fafb);
        border: 1px solid var(--ui-border-color, #d1d5db);
        border-radius: var(--ui-radius, 0.25em);
        padding: 0.3em 0.5em;
        cursor: pointer;
        color: var(--ui-text-muted, #6b7280);
        white-space: nowrap;
        transition: background 0.1s, color 0.1s;
      }
      .format-btn:hover { background: var(--ui-indigo-500, #6366f1); color: #fff; }
      .color-input {
        flex: 1;
        padding: 0.3em 0.5em;
        border: 1px solid var(--ui-border-color, #d1d5db);
        border-radius: var(--ui-radius, 0.25em);
        font-family: var(--ui-font-mono, monospace);
        font-size: 0.8em;
        outline: none;
        min-width: 0;
      }
      .color-input:focus { border-color: var(--ui-focus-ring, #6366f1); }

      .native-input {
        width: 1.8em; height: 1.8em;
        border: none; padding: 0;
        cursor: pointer; background: none;
        border-radius: 0.2em;
        overflow: hidden;
        flex-shrink: 0;
      }
      .native-input::-webkit-color-swatch-wrapper { padding: 0; }
      .native-input::-webkit-color-swatch { border: 1px solid rgba(0,0,0,0.15); border-radius: 0.2em; }
      .native-input::-moz-color-swatch { border: 1px solid rgba(0,0,0,0.15); border-radius: 0.2em; }

      /* \u2500\u2500 Recent colours \u2500\u2500 */
      .recent-row {
        display: flex;
        gap: 0.2em;
        margin-top: 0.5em;
        min-height: 1.1em;
      }
      .recent-swatch {
        width: 1.1em; height: 1.1em;
        border-radius: 0.15em;
        border: 1px solid rgba(0,0,0,0.15);
        cursor: pointer;
        padding: 0;
        transition: transform 0.1s;
      }
      .recent-swatch:hover { transform: scale(1.2); }

      /* \u2500\u2500 Theme palette \u2500\u2500 */
      .theme-palette {}
      .theme-row {
        display: grid;
        grid-template-columns: repeat(18, 1.15em) 2.2em;
        gap: 0;
      }
      .theme-header-row { margin-bottom: 0.35em; }
      .theme-col-label {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .theme-col-dot {
        width: 0.6em;
        height: 0.6em;
        border-radius: 50%;
        display: block;
      }
      .shade-num {
        font-size: 0.5em;
        color: var(--ui-text-muted, #6b7280);
        display: flex;
        align-items: center;
        justify-content: flex-end;
        padding-left: 0.5em;
        font-variant-numeric: tabular-nums;
        user-select: none;
      }
      .theme-swatch {
        width: 100%;
        height: 1.1em;
        border: none;
        cursor: pointer;
        padding: 0;
        box-sizing: border-box;
        position: relative;
        transition: transform 0.1s ease, box-shadow 0.1s ease;
        outline: none;
        border-radius: 0;
      }
      [data-shade="first"] .theme-swatch  { border-radius: 0.2em 0.2em 0 0; }
      [data-shade="last"]  .theme-swatch  { border-radius: 0 0 0.2em 0.2em; }
      .theme-swatch:hover {
        transform: scale(1.35);
        z-index: 2;
        border-radius: 0.15em;
        box-shadow: 0 0 0 1.5px #fff, 0 0 0 2.5px rgba(0,0,0,0.35);
      }
      .theme-swatch[data-selected] {
        z-index: 1;
        border-radius: 0.15em;
        box-shadow: 0 0 0 1.5px #fff, 0 0 0 2.5px var(--ui-text-color, #111827);
      }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.3em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }
    `}constructor(){super(),this._open=!1,this._activeTab="theme",this._format="hex",this._hue=0,this._saturation=100,this._brightness=100,this._alpha=1,this._draggingCanvas=!1,this._draggingHue=!1,this._draggingAlpha=!1,this._onTriggerClick=this._onTriggerClick.bind(this),this._onOutsideClick=this._onOutsideClick.bind(this),this._onThemeSwatchClick=this._onThemeSwatchClick.bind(this),this._onTabClick=this._onTabClick.bind(this),this._onColorInput=this._onColorInput.bind(this),this._onNativeInput=this._onNativeInput.bind(this),this._onFormatToggle=this._onFormatToggle.bind(this),this._onCanvasPointerDown=this._onCanvasPointerDown.bind(this),this._onHuePointerDown=this._onHuePointerDown.bind(this),this._onAlphaPointerDown=this._onAlphaPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this)}connectedCallback(){super.connectedCallback(),this._syncFromValue()}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("click",this._onOutsideClick),document.removeEventListener("pointermove",this._onPointerMove),document.removeEventListener("pointerup",this._onPointerUp)}render(){let e=o=>o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;"),t=s._THEME_PALETTE,i=this._displayColor(this.value),r=s._recentColors;return`
      <div class="label" part="label">
        ${e(this.label)}<span class="req">${this.required?" *":""}</span>
      </div>
      <div class="trigger" part="trigger" tabindex="0">
        <span class="swatch"><span class="swatch-color" style="background:${e(i)}"></span></span>
        <span class="value-text">${e(this.value)}</span>
      </div>
      <div class="panel" part="panel">
        <div class="panel-tabs">
          <button type="button" class="panel-tab" data-tab="theme" ${this._activeTab==="theme"?"data-active":""}>Theme</button>
          <button type="button" class="panel-tab" data-tab="custom" ${this._activeTab==="custom"?"data-active":""}>Custom</button>
        </div>

        <div class="panel-custom" style="display:${this._activeTab==="custom"?"block":"none"}">
          <div class="canvas-wrap">
            <canvas class="sat-bright-canvas"></canvas>
            <div class="sb-cursor"></div>
          </div>
          <div class="slider-row">
            <div class="slider-preview"><div class="slider-preview-color"></div></div>
            <div class="sliders-col">
              <div class="track-wrap hue-wrap">
                <div class="track hue-track"></div>
                <div class="slider-thumb hue-thumb"></div>
              </div>
              <div class="track-wrap alpha-wrap">
                <div class="track alpha-track"><div class="alpha-gradient"></div></div>
                <div class="slider-thumb alpha-thumb"></div>
              </div>
            </div>
          </div>
          <div class="input-row">
            <button type="button" class="format-btn">${this._format.toUpperCase()}</button>
            <input class="color-input" type="text" value="${e(this.value)}" spellcheck="false" placeholder="hex, rgb, hsl, name\u2026" />
            <input class="native-input" type="color" value="${e(this._toHex6(this.value))}" aria-label="Pick colour" />
          </div>
          ${r.length?`<div class="recent-row">${r.map(o=>`<button type="button" class="recent-swatch" style="background:${o}" data-color="${e(o)}" title="${e(o)}" aria-label="${e(o)}"></button>`).join("")}</div>`:""}
        </div>

        <div class="panel-theme" style="display:${this._activeTab==="theme"?"block":"none"}">
          <div class="theme-palette">
            <div class="theme-row theme-header-row">
              ${s._THEME_FAMILIES.map(o=>`<span class="theme-col-label" title="${o.name}"><span class="theme-col-dot" style="background:${o.hex}"></span></span>`).join("")}
              <span class="shade-num"></span>
            </div>
            ${s._THEME_SHADES.map((o,a)=>{let l=a===0?' data-shade="first"':a===s._THEME_SHADES.length-1?' data-shade="last"':"",h=s._THEME_FAMILIES.map((u,f)=>{let m=t[f*s._THEME_SHADES.length+a];return`<button type="button" class="theme-swatch" style="background:${m.hex}" data-token="${m.token}" ${m.token===this.value?"data-selected":""} aria-label="${m.token}" title="${m.token}"></button>`}).join("");return`<div class="theme-row"${l}>${h}<span class="shade-num">${o}</span></div>`}).join("")}
          </div>
        </div>
      </div>
      <div class="help" part="help">${e(this.help)}</div>
      <div class="error-msg" part="error">${e(this.error)}</div>
    `}_update(){this._applySize(),super._update(),this._attachListeners(),this._drawCanvas(),this._updateUI()}_applySize(){let e={},t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}_attachListeners(){let e=this.shadowRoot.querySelector(".trigger");e&&e.addEventListener("click",this._onTriggerClick),this.shadowRoot.querySelectorAll(".theme-swatch").forEach(h=>{h.addEventListener("click",this._onThemeSwatchClick)}),this.shadowRoot.querySelectorAll(".panel-tab").forEach(h=>{h.addEventListener("click",this._onTabClick)});let t=this.shadowRoot.querySelector(".color-input");t&&t.addEventListener("change",this._onColorInput);let i=this.shadowRoot.querySelector(".native-input");i&&i.addEventListener("input",this._onNativeInput);let r=this.shadowRoot.querySelector(".format-btn");r&&r.addEventListener("click",this._onFormatToggle);let o=this.shadowRoot.querySelector(".sat-bright-canvas");o&&o.addEventListener("pointerdown",this._onCanvasPointerDown);let a=this.shadowRoot.querySelector(".hue-wrap");a&&a.addEventListener("pointerdown",this._onHuePointerDown);let l=this.shadowRoot.querySelector(".alpha-wrap");l&&l.addEventListener("pointerdown",this._onAlphaPointerDown),this.shadowRoot.querySelectorAll(".recent-swatch").forEach(h=>{h.addEventListener("click",u=>{u.stopPropagation(),this._setValueFromInput(u.currentTarget.getAttribute("data-color"))})})}_syncFromValue(){let e=s.parseColor(this.value);if(e){this._hue=e.h,this._alpha=e.a;let t=s._hslToHsb(e.h,e.s,e.l);this._saturation=t.s,this._brightness=t.b}}_drawCanvas(){let e=this.shadowRoot.querySelector(".sat-bright-canvas");if(!e)return;let t=e.getBoundingClientRect(),i=Math.round(t.width)||200,r=Math.round(t.height)||150;e.width=i,e.height=r;let o=e.getContext("2d");o.fillStyle=`hsl(${this._hue}, 100%, 50%)`,o.fillRect(0,0,i,r);let a=o.createLinearGradient(0,0,i,0);a.addColorStop(0,"rgba(255,255,255,1)"),a.addColorStop(1,"rgba(255,255,255,0)"),o.fillStyle=a,o.fillRect(0,0,i,r);let l=o.createLinearGradient(0,0,0,r);l.addColorStop(0,"rgba(0,0,0,0)"),l.addColorStop(1,"rgba(0,0,0,1)"),o.fillStyle=l,o.fillRect(0,0,i,r)}_updateUI(){let e=s._hsbToHsl(this._hue,this._saturation,this._brightness),t=s._hslToHex(e.h,e.s,e.l,this._alpha),i=s._hslToHex(e.h,e.s,e.l,1),r=this.shadowRoot.querySelector(".sb-cursor"),o=this.shadowRoot.querySelector(".sat-bright-canvas");if(r&&o){let _=this._saturation/100*o.width,x=(1-this._brightness/100)*o.height;r.style.left=`${_}px`,r.style.top=`${x}px`,r.style.background=i}let a=this.shadowRoot.querySelector(".hue-thumb"),l=this.shadowRoot.querySelector(".hue-wrap");if(a&&l){let _=this._hue/360*100;a.style.left=`${_}%`,a.style.background=`hsl(${this._hue}, 100%, 50%)`}let h=this.shadowRoot.querySelector(".alpha-thumb"),u=this.shadowRoot.querySelector(".alpha-gradient");h&&(h.style.left=`${this._alpha*100}%`,h.style.background=t),u&&(u.style.background=`linear-gradient(to right, transparent, ${i})`);let f=this.shadowRoot.querySelector(".slider-preview-color");f&&(f.style.background=t);let m=this.shadowRoot.querySelector(".swatch-color");m&&(m.style.background=this._displayColor(this.value));let v=this.shadowRoot.querySelector(".color-input"),k=this.shadowRoot.querySelector(".value-text");v&&v!==this.shadowRoot.activeElement&&(v.value=this.value),k&&(k.textContent=this.value);let g=this.shadowRoot.querySelector(".native-input");g&&(g.value=this._toHex6(this.value)),this.shadowRoot.querySelectorAll(".theme-swatch").forEach(_=>{_.getAttribute("data-token")===this.value?_.setAttribute("data-selected",""):_.removeAttribute("data-selected")})}_displayColor(e){if(!e)return"transparent";let t=s._THEME_PALETTE.find(i=>i.token===e);return t?t.hex:e}_toHex6(e){let t=s._THEME_PALETTE.find(r=>r.token===e);if(t)return t.hex;if(/^#[0-9a-fA-F]{6}$/.test(e))return e;if(/^#[0-9a-fA-F]{3}$/.test(e))return"#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3];let i=s.parseColor(e);return i?s._hslToHex(i.h,i.s,i.l,1):e.startsWith("#")?e.slice(0,7):e}_openPanel(){this._open||(this._open=!0,this.setAttribute("data-open",""),document.addEventListener("click",this._onOutsideClick),requestAnimationFrame(()=>{this._syncFromValue(),this._drawCanvas(),this._updateUI()}))}_closePanel(){this._open&&(this._open=!1,this.removeAttribute("data-open"),document.removeEventListener("click",this._onOutsideClick))}_onTriggerClick(e){e.stopPropagation(),this._open?this._closePanel():this._openPanel()}_onOutsideClick(e){!this.contains(e.target)&&!this.shadowRoot.contains(e.target)&&this._closePanel()}_onThemeSwatchClick(e){e.stopPropagation();let t=e.currentTarget.getAttribute("data-token");this._setValueFromInput(t)}_onTabClick(e){e.stopPropagation();let t=e.currentTarget.getAttribute("data-tab");this._activeTab=t,this.shadowRoot.querySelectorAll(".panel-tab").forEach(o=>{o.getAttribute("data-tab")===t?o.setAttribute("data-active",""):o.removeAttribute("data-active")});let i=this.shadowRoot.querySelector(".panel-custom"),r=this.shadowRoot.querySelector(".panel-theme");r&&(r.style.display=t==="theme"?"block":"none"),i&&(i.style.display=t==="custom"?"block":"none"),t==="custom"&&requestAnimationFrame(()=>{this._drawCanvas(),this._updateUI()})}_onFormatToggle(e){e.stopPropagation();let t=["hex","rgb","hsl"];this._format=t[(t.indexOf(this._format)+1)%t.length];let i=this.shadowRoot.querySelector(".format-btn");i&&(i.textContent=this._format.toUpperCase()),this._updateValueFromHsb()}_onColorInput(e){let t=e.target.value.trim();t&&this._setValueFromInput(t)}_onNativeInput(e){this._setValueFromInput(e.target.value)}_onCanvasPointerDown(e){e.preventDefault(),e.stopPropagation(),this._draggingCanvas=!0,document.addEventListener("pointermove",this._onPointerMove),document.addEventListener("pointerup",this._onPointerUp),this._handleCanvasMove(e)}_onHuePointerDown(e){e.preventDefault(),e.stopPropagation(),this._draggingHue=!0,document.addEventListener("pointermove",this._onPointerMove),document.addEventListener("pointerup",this._onPointerUp),this._handleHueMove(e)}_onAlphaPointerDown(e){e.preventDefault(),e.stopPropagation(),this._draggingAlpha=!0,document.addEventListener("pointermove",this._onPointerMove),document.addEventListener("pointerup",this._onPointerUp),this._handleAlphaMove(e)}_onPointerMove(e){this._draggingCanvas&&this._handleCanvasMove(e),this._draggingHue&&this._handleHueMove(e),this._draggingAlpha&&this._handleAlphaMove(e)}_onPointerUp(){this._draggingCanvas=!1,this._draggingHue=!1,this._draggingAlpha=!1,document.removeEventListener("pointermove",this._onPointerMove),document.removeEventListener("pointerup",this._onPointerUp)}_handleCanvasMove(e){let t=this.shadowRoot.querySelector(".sat-bright-canvas");if(!t)return;let i=t.getBoundingClientRect(),r=Math.max(0,Math.min(e.clientX-i.left,i.width)),o=Math.max(0,Math.min(e.clientY-i.top,i.height));this._saturation=Math.round(r/i.width*100),this._brightness=Math.round((1-o/i.height)*100),this._updateValueFromHsb()}_handleHueMove(e){let t=this.shadowRoot.querySelector(".hue-wrap");if(!t)return;let i=t.getBoundingClientRect(),r=Math.max(0,Math.min(e.clientX-i.left,i.width));this._hue=Math.round(r/i.width*360),this._drawCanvas(),this._updateValueFromHsb()}_handleAlphaMove(e){let t=this.shadowRoot.querySelector(".alpha-wrap");if(!t)return;let i=t.getBoundingClientRect(),r=Math.max(0,Math.min(e.clientX-i.left,i.width));this._alpha=Math.round(r/i.width*100)/100,this._updateValueFromHsb()}_updateValueFromHsb(){let e=s._hsbToHsl(this._hue,this._saturation,this._brightness),t=s.formatColor(e.h,e.s,e.l,this._alpha,this._format);this.value=t,this._updateUI(),this.emit("ui-change",{value:t})}_setValueFromInput(e){let t=s.parseColor(e);if(t){this._hue=t.h,this._alpha=t.a;let i=s._hslToHsb(t.h,t.s,t.l);this._saturation=i.s,this._brightness=i.b,this._drawCanvas()}this.value=e,s._addRecent(e),this._updateUI(),this._refreshRecent(),this.emit("ui-change",{value:e})}_refreshRecent(){let e=this.shadowRoot.querySelector(".panel-custom");if(!e)return;let t=e.querySelector(".recent-row"),i=s._recentColors;if(!i.length){t&&t.remove();return}let r=h=>h.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;"),o=`<div class="recent-row">${i.map(h=>`<button type="button" class="recent-swatch" style="background:${h}" data-color="${r(h)}" title="${r(h)}" aria-label="${r(h)}"></button>`).join("")}</div>`,a=document.createElement("div");a.innerHTML=o;let l=a.firstElementChild;t?t.replaceWith(l):e.appendChild(l),l.querySelectorAll(".recent-swatch").forEach(h=>{h.addEventListener("click",u=>{u.stopPropagation(),this._setValueFromInput(u.currentTarget.getAttribute("data-color"))})})}};customElements.define("ui-input-color",Ee);var Le=class s extends c{static properties={value:{type:String,default:"",reflect:!0},placeholder:{type:String,default:"YYYY-MM-DD",reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},min:{type:String,default:"",reflect:!0},max:{type:String,default:"",reflect:!0},range:{type:Boolean,default:!1,reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0}};static _DAYS=["Su","Mo","Tu","We","Th","Fr","Sa"];static _MONTHS=["January","February","March","April","May","June","July","August","September","October","November","December"];static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
        position: relative;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: block; }
      .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }

      .trigger {
        display: flex;
        align-items: center;
        gap: 0.5em;
        width: 100%;
        box-sizing: border-box;
        padding: 0.45em 0.65em;
        border: 1px solid var(--ui-border-color, #d1d5db);
        border-radius: var(--ui-radius, 0.375em);
        background: var(--ui-bg, #fff);
        color: var(--ui-text-color, #111827);
        font-family: inherit;
        font-size: inherit;
        cursor: pointer;
        transition: border-color 0.15s ease, box-shadow 0.15s ease;
      }
      .trigger:hover { border-color: #9ca3af; }
      .trigger:focus-within {
        outline: none;
        border-color: var(--ui-focus-ring, #6366f1);
        box-shadow: 0 0 0 0.15em rgba(99, 102, 241, 0.25);
      }
      :host([error]) .trigger { border-color: var(--ui-red-500, #ef4444); }
      :host([error]) .trigger:focus-within { box-shadow: 0 0 0 0.15em rgba(239, 68, 68, 0.25); }

      .cal-icon {
        width: 1em; height: 1em;
        fill: none; stroke: currentColor;
        stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
        flex-shrink: 0; opacity: 0.5;
        cursor: pointer;
      }
      .cal-icon:hover { opacity: 0.8; }
      .date-input {
        flex: 1;
        border: none;
        outline: none;
        background: transparent;
        font-family: inherit;
        font-size: inherit;
        color: inherit;
        padding: 0;
        min-width: 0;
      }
      .date-input::placeholder { color: var(--ui-text-muted, #9ca3af); }
      .clear-btn {
        display: none;
        align-items: center; justify-content: center;
        background: none; border: none; cursor: pointer;
        padding: 0; color: var(--ui-text-muted, #9ca3af);
        flex-shrink: 0;
        transition: color 0.1s ease;
      }
      .clear-btn:hover { color: var(--ui-text-color, #374151); }
      .clear-btn svg {
        width: 0.85em; height: 0.85em;
        fill: none; stroke: currentColor;
        stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round;
      }
      :host([value]) .clear-btn { display: flex; }

      .panel {
        display: none;
        position: absolute;
        top: 100%; left: 0;
        z-index: 999;
        margin-top: 0.25em;
        padding: 0.75em;
        border: 1px solid var(--ui-border-color, #d1d5db);
        border-radius: var(--ui-radius, 0.375em);
        background: var(--ui-bg, #fff);
        box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        width: 18em;
      }
      :host([data-open]) .panel { display: block; }

      .nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 0.5em;
      }
      .nav-btn {
        background: none; border: none; cursor: pointer;
        padding: 0.25em; border-radius: 0.25em;
        color: var(--ui-text-color, #374151);
        display: flex; align-items: center; justify-content: center;
      }
      .nav-btn:hover { background: var(--ui-bg-subtle, #f3f4f6); }
      .nav-btn svg { width: 1em; height: 1em; fill: none; stroke: currentColor; stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round; }
      .nav-title { font-weight: 600; font-size: 0.9em; }

      .weekdays {
        display: grid; grid-template-columns: repeat(7, 1fr);
        text-align: center; font-size: 0.75em; font-weight: 600;
        color: var(--ui-text-muted, #9ca3af);
        margin-bottom: 0.25em;
      }
      .days {
        display: grid; grid-template-columns: repeat(7, 1fr);
        gap: 0.15em;
      }
      .day {
        display: flex; align-items: center; justify-content: center;
        aspect-ratio: 1; border-radius: 50%;
        font-size: 0.85em; cursor: pointer;
        border: none; background: none; padding: 0;
        color: var(--ui-text-color, #374151);
        transition: background-color 0.1s ease;
      }
      .day:hover { background: var(--ui-bg-subtle, #f3f4f6); }
      .day[data-selected] {
        background: var(--ui-indigo-500, #6366f1);
        color: #fff;
        font-weight: 600;
      }
      .day[data-today]:not([data-selected]) {
        font-weight: 700;
        color: var(--ui-indigo-500, #6366f1);
      }
      .day[data-outside] { color: var(--ui-text-muted, #d1d5db); }
      .day[data-disabled] { opacity: 0.3; pointer-events: none; }

      /* Range mode styles */
      .day[data-range-start],
      .day[data-range-end] {
        background: var(--ui-indigo-500, #6366f1);
        color: #fff;
        font-weight: 600;
      }
      .day[data-in-range]:not([data-range-start]):not([data-range-end]) {
        background: var(--ui-indigo-100, #e0e7ff);
        color: var(--ui-indigo-700, #4338ca);
        border-radius: 0.25em;
      }
      .day[data-range-preview]:not([data-range-start]):not([data-in-range]) {
        background: var(--ui-indigo-50, #eef2ff);
        color: var(--ui-indigo-600, #4f46e5);
        border-radius: 0.25em;
      }
      .range-hint {
        display: none;
        text-align: center;
        font-size: 0.75em;
        color: var(--ui-text-muted, #9ca3af);
        margin-top: 0.5em;
        font-style: italic;
      }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.3em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }
    `}constructor(){super(),this._open=!1;let e=new Date;this._viewYear=e.getFullYear(),this._viewMonth=e.getMonth(),this._rangeStart="",this._rangeEnd="",this._pickingEnd=!1,this._hoverDate="",this._onTriggerClick=this._onTriggerClick.bind(this),this._onOutsideClick=this._onOutsideClick.bind(this),this._onInputChange=this._onInputChange.bind(this),this._onInputKeyDown=this._onInputKeyDown.bind(this),this._onClear=this._onClear.bind(this)}connectedCallback(){if(super.connectedCallback(),this.value)if(this.range&&this.value.includes(" / ")){let[e]=this.value.split(" / "),[t,i]=e.split("-").map(Number);t&&i&&(this._viewYear=t,this._viewMonth=i-1),this._rangeStart=e,this._rangeEnd=this.value.split(" / ")[1]||""}else{let[e,t]=this.value.split("-").map(Number);e&&t&&(this._viewYear=e,this._viewMonth=t-1)}}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("click",this._onOutsideClick)}render(){let e=i=>String(i).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;"),t=this.range&&this.placeholder==="YYYY-MM-DD"?"Start / End":e(this.placeholder);return`
      <div class="label" part="label">
        ${e(this.label)}<span class="req">${this.required?" *":""}</span>
      </div>
      <div class="trigger" part="trigger" role="combobox" aria-expanded="false">
        <input class="date-input" part="input" type="text"
               value="${this.value?e(this.value):""}"
               placeholder="${t}"
               ${this.disabled?"disabled":""}
               ${this.name?`name="${e(this.name)}"`:""}
               ${this.required?"required":""}
               ${this.error?'aria-invalid="true"':""}
               aria-label="${e(this.label||"Date")}" />
        <button type="button" class="clear-btn" aria-label="Clear date" tabindex="-1">
          <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
        <svg class="cal-icon cal-toggle" viewBox="0 0 24 24" tabindex="0" role="button" aria-label="Toggle calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
          <line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/>
          <line x1="3" y1="10" x2="21" y2="10"/>
        </svg>
      </div>
      <div class="panel" part="panel">
        ${this._renderCalendar()}
      </div>
      <div class="help" part="help">${e(this.help)}</div>
      <div class="error-msg" part="error">${e(this.error)}</div>
    `}_renderCalendar(){let e=this._viewYear,t=this._viewMonth,i=`${s._MONTHS[t]} ${e}`,r=new Date;r.setHours(0,0,0,0);let o=this._toISO(r),a=new Date(e,t,1).getDay(),l=new Date(e,t+1,0).getDate(),h=new Date(e,t,0).getDate(),u="",f=(g,_)=>{let x=[];if(_&&x.push("data-outside"),this._isDisabledDate(g))return x.push("data-disabled"),x.join(" ");if(this.range){if(g===this._rangeStart&&x.push("data-range-start"),g===this._rangeEnd&&x.push("data-range-end"),this._rangeStart&&this._rangeEnd&&g>this._rangeStart&&g<this._rangeEnd&&x.push("data-in-range"),this._pickingEnd&&this._rangeStart&&this._hoverDate&&!this._rangeEnd){let w=this._rangeStart<this._hoverDate?this._rangeStart:this._hoverDate,z=this._rangeStart<this._hoverDate?this._hoverDate:this._rangeStart;g>=w&&g<=z&&x.push("data-range-preview")}}else g===this.value&&x.push("data-selected");return g===o&&!x.includes("data-selected")&&!x.includes("data-range-start")&&!x.includes("data-range-end")&&x.push("data-today"),x.join(" ")};for(let g=a-1;g>=0;g--){let _=h-g,x=this._toISO(new Date(e,t-1,_));u+=`<button type="button" class="day" data-date="${x}" ${f(x,!0)}>${_}</button>`}for(let g=1;g<=l;g++){let _=this._toISO(new Date(e,t,g));u+=`<button type="button" class="day" data-date="${_}" ${f(_,!1)}>${g}</button>`}let v=(7-(a+l)%7)%7;for(let g=1;g<=v;g++){let _=this._toISO(new Date(e,t+1,g));u+=`<button type="button" class="day" data-date="${_}" ${f(_,!0)}>${g}</button>`}let k="";return this.range&&(!this._rangeStart&&!this._pickingEnd?k="Pick a start date":this._pickingEnd&&!this._rangeEnd&&(k="Pick an end date")),`
      <div class="nav">
        <button type="button" class="nav-btn" data-action="prev-month" aria-label="Previous month">
          <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>
        </button>
        <span class="nav-title">${i}</span>
        <button type="button" class="nav-btn" data-action="next-month" aria-label="Next month">
          <svg viewBox="0 0 24 24"><polyline points="9 6 15 12 9 18"/></svg>
        </button>
      </div>
      <div class="weekdays">${s._DAYS.map(g=>`<span>${g}</span>`).join("")}</div>
      <div class="days">${u}</div>
      <div class="range-hint" style="${k?"display:block":""}">${k}</div>
    `}_toISO(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${i}-${r}`}_isDisabledDate(e){return!!(this.min&&e<this.min||this.max&&e>this.max)}_update(){this._applyStyles(),super._update(),this._attachListeners()}_applyStyles(){let e={},t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}_attachListeners(){let e=this.shadowRoot.querySelector(".cal-toggle");e&&(e.addEventListener("click",this._onTriggerClick),e.addEventListener("keydown",r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),this._onTriggerClick(r))}));let t=this.shadowRoot.querySelector(".date-input");t&&(t.addEventListener("change",this._onInputChange),t.addEventListener("keydown",this._onInputKeyDown));let i=this.shadowRoot.querySelector(".clear-btn");i&&i.addEventListener("click",this._onClear),this._attachPanelListeners()}_attachPanelListeners(){this.shadowRoot.querySelectorAll(".nav-btn").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();let i=e.getAttribute("data-action");i==="prev-month"?this._prevMonth():i==="next-month"&&this._nextMonth()})}),this.shadowRoot.querySelectorAll(".day:not([data-disabled])").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();let i=e.getAttribute("data-date");this._selectDate(i)}),this.range&&this._pickingEnd&&(e.addEventListener("mouseenter",()=>{this._hoverDate=e.getAttribute("data-date"),this._updateHoverPreview()}),e.addEventListener("mouseleave",()=>{this._hoverDate="",this._updateHoverPreview()}))})}_parseInput(e){let t=e.trim();if(!t)return"";let i=t.match(/^(\d{4})[\-\/](\d{1,2})[\-\/](\d{1,2})$/);if(i){let[,a,l,h]=i;return`${a}-${l.padStart(2,"0")}-${h.padStart(2,"0")}`}let r=t.match(/^(\d{1,2})[\-\/](\d{1,2})[\-\/](\d{4})$/);if(r){let[,a,l,h]=r;return`${h}-${a.padStart(2,"0")}-${l.padStart(2,"0")}`}let o=Date.parse(t);return isNaN(o)?null:this._toISO(new Date(o))}_onInputChange(e){let t=e.target.value;if(this.range){if(t.includes("/")){let r=t.split("/").map(o=>o.trim());if(r.length===2){let o=this._parseInput(r[0]),a=this._parseInput(r[1]);if(o&&a&&o!==null&&a!==null&&!this._isDisabledDate(o)&&!this._isDisabledDate(a)){let[l,h]=o<=a?[o,a]:[a,o];this._rangeStart=l,this._rangeEnd=h,this._pickingEnd=!1,this._hoverDate="";let u=`${l} / ${h}`;this.value=u,e.target.value=u,this._closePanel(),this.emit("ui-change",{value:u,start:l,end:h});return}}}e.target.value=this.value;return}let i=this._parseInput(t);if(i===null){e.target.value=this.value;return}if(i===""){this._onClear(e);return}if(this._isDisabledDate(i)){e.target.value=this.value;return}this._selectDate(i)}_onInputKeyDown(e){e.key==="Enter"?(e.preventDefault(),e.target.dispatchEvent(new Event("change",{bubbles:!0}))):e.key==="Escape"?this._closePanel():e.key==="ArrowDown"&&!this._open&&(e.preventDefault(),this._openPanel())}_onClear(e){e.stopPropagation(),this.value="",this._rangeStart="",this._rangeEnd="",this._pickingEnd=!1,this._hoverDate="";let t=this.shadowRoot.querySelector(".date-input");t&&(t.value=""),this._closePanel(),this.range?this.emit("ui-change",{value:"",start:"",end:""}):this.emit("ui-change",{value:""})}_selectDate(e){if(this._isDisabledDate(e))return;if(this.range){this._selectRangeDate(e);return}this.value=e;let[t,i]=e.split("-").map(Number);this._viewYear=t,this._viewMonth=i-1;let r=this.shadowRoot.querySelector(".date-input");r&&(r.value=e),this._closePanel(),this.emit("ui-change",{value:e})}_selectRangeDate(e){if(!this._pickingEnd){this._rangeStart=e,this._rangeEnd="",this._pickingEnd=!0,this._hoverDate="",this.value="";let h=this.shadowRoot.querySelector(".date-input");h&&(h.value=""),this._refreshPanel();return}let t=this._rangeStart,i=e;t>i&&([t,i]=[i,t]),this._rangeStart=t,this._rangeEnd=i,this._pickingEnd=!1,this._hoverDate="";let r=`${t} / ${i}`;this.value=r;let[o,a]=i.split("-").map(Number);this._viewYear=o,this._viewMonth=a-1;let l=this.shadowRoot.querySelector(".date-input");l&&(l.value=r),this._closePanel(),this.emit("ui-change",{value:r,start:t,end:i})}_prevMonth(){this._viewMonth--,this._viewMonth<0&&(this._viewMonth=11,this._viewYear--),this._refreshPanel()}_nextMonth(){this._viewMonth++,this._viewMonth>11&&(this._viewMonth=0,this._viewYear++),this._refreshPanel()}_refreshPanel(){let e=this.shadowRoot.querySelector(".panel");e&&(e.innerHTML=this._renderCalendar(),this._attachPanelListeners())}_updateHoverPreview(){this.shadowRoot.querySelectorAll(".day[data-date]").forEach(e=>{let t=e.getAttribute("data-date");if(e.removeAttribute("data-range-preview"),this._pickingEnd&&this._rangeStart&&this._hoverDate&&!this._rangeEnd){let i=this._rangeStart<this._hoverDate?this._rangeStart:this._hoverDate,r=this._rangeStart<this._hoverDate?this._hoverDate:this._rangeStart;t>=i&&t<=r&&e.setAttribute("data-range-preview","")}})}_openPanel(){if(this._open)return;this._open=!0,this.setAttribute("data-open","");let e=this.shadowRoot.querySelector(".trigger");e&&e.setAttribute("aria-expanded","true"),this.range&&this._rangeStart&&this._rangeEnd&&(this._pickingEnd=!1,this._hoverDate=""),this._refreshPanel(),document.addEventListener("click",this._onOutsideClick)}_closePanel(){if(!this._open)return;this._open=!1,this.removeAttribute("data-open");let e=this.shadowRoot.querySelector(".trigger");e&&e.setAttribute("aria-expanded","false"),this.range&&this._pickingEnd&&!this._rangeEnd&&(this._rangeStart="",this._pickingEnd=!1,this._hoverDate=""),document.removeEventListener("click",this._onOutsideClick)}_onTriggerClick(e){e.stopPropagation(),this._open?this._closePanel():this._openPanel()}_onOutsideClick(e){!this.contains(e.target)&&!this.shadowRoot.contains(e.target)&&this._closePanel()}focus(){this.shadowRoot?.querySelector(".date-input")?.focus()}blur(){this.shadowRoot?.querySelector(".date-input")?.blur()}};customElements.define("ui-input-date",Le);var $e=class extends c{static properties={value:{type:Number,default:0,reflect:!0},min:{type:Number,default:-1/0,reflect:!0},max:{type:Number,default:1/0,reflect:!0},step:{type:Number,default:1,reflect:!0},placeholder:{type:String,default:"",reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},readonly:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: block; }
      .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }

      .wrapper {
        display: flex;
        align-items: stretch;
        border: 1px solid var(--_border, var(--ui-border-color, #d1d5db));
        border-radius: var(--ui-radius, 0.375em);
        overflow: hidden;
        background: var(--_bg, var(--ui-bg, #fff));
        transition: border-color 0.15s ease, box-shadow 0.15s ease;
      }
      .wrapper:hover { border-color: #9ca3af; }
      .wrapper:focus-within {
        border-color: var(--ui-focus-ring, #6366f1);
        box-shadow: 0 0 0 0.15em rgba(99, 102, 241, 0.25);
      }
      :host([error]) .wrapper { border-color: var(--ui-red-500, #ef4444); }
      :host([error]) .wrapper:focus-within { box-shadow: 0 0 0 0.15em rgba(239, 68, 68, 0.25); }

      .step-btn {
        display: flex; align-items: center; justify-content: center;
        width: 2.2em;
        background: var(--ui-bg-subtle, #f3f4f6);
        border: none;
        cursor: pointer;
        color: var(--ui-text-color, #374151);
        font-size: 1em;
        padding: 0;
        transition: background-color 0.1s ease;
        flex-shrink: 0;
        user-select: none;
      }
      .step-btn:hover { background: var(--ui-border-color, #e5e7eb); }
      .step-btn:active { background: var(--ui-border-color, #d1d5db); }
      .step-btn[data-disabled] { opacity: 0.3; pointer-events: none; }
      .step-btn svg {
        width: 0.85em; height: 0.85em;
        fill: none; stroke: currentColor;
        stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round;
      }

      .input {
        flex: 1;
        min-width: 0;
        text-align: center;
        border: none;
        outline: none;
        background: transparent;
        font-family: inherit;
        font-size: inherit;
        color: var(--_color, var(--ui-text-color, #111827));
        padding: 0.45em 0.35em;
        -moz-appearance: textfield;
      }
      .input::-webkit-inner-spin-button,
      .input::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
      .input::placeholder { color: var(--ui-text-muted, #9ca3af); }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.3em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }
    `}constructor(){super(),this._onInputChange=this._onInputChange.bind(this),this._onInputBlur=this._onInputBlur.bind(this),this._onKeyDown=this._onKeyDown.bind(this)}render(){let e=r=>String(r).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;"),t=this.value<=this.min,i=this.value>=this.max;return`
      <div class="label" part="label">
        ${e(this.label)}<span class="req">${this.required?" *":""}</span>
      </div>
      <div class="wrapper" part="wrapper">
        <button type="button" class="step-btn decrement" part="decrement" aria-label="Decrease" ${t?"data-disabled":""}>
          <svg viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"/></svg>
        </button>
        <input class="input" part="input" type="number"
               value="${this.value}"
               ${this.placeholder?`placeholder="${e(this.placeholder)}"`:""}
               ${this.name?`name="${e(this.name)}"`:""}
               ${isFinite(this.min)?`min="${this.min}"`:""}
               ${isFinite(this.max)?`max="${this.max}"`:""}
               step="${this.step}"
               ${this.disabled?"disabled":""}
               ${this.readonly?"readonly":""}
               ${this.required?"required":""}
               ${this.error?'aria-invalid="true"':""}
               ${this.label?`aria-label="${e(this.label)}"`:""} />
        <button type="button" class="step-btn increment" part="increment" aria-label="Increase" ${i?"data-disabled":""}>
          <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        </button>
      </div>
      <div class="help" part="help">${e(this.help)}</div>
      <div class="error-msg" part="error">${e(this.error)}</div>
    `}_update(){this._applyStyles(),super._update(),this._attachListeners()}_applyStyles(){let e={},t=d(this.size);if(t&&(e["font-size"]=t),this.background){let i=n(this.background);i&&(e["--_bg"]=i)}if(this.color){let i=n(this.color);i&&(e["--_color"]=i)}this._setDynamicVars(e)}_attachListeners(){let e=this.shadowRoot.querySelector(".input"),t=this.shadowRoot.querySelector(".decrement"),i=this.shadowRoot.querySelector(".increment");e&&(e.addEventListener("input",this._onInputChange),e.addEventListener("blur",this._onInputBlur),e.addEventListener("keydown",this._onKeyDown)),t&&t.addEventListener("click",r=>{r.preventDefault(),this._step(-1)}),i&&i.addEventListener("click",r=>{r.preventDefault(),this._step(1)})}_step(e){if(this.readonly)return;let t=this.value+this.step*e;t=this._clamp(t);let i=(String(this.step).split(".")[1]||"").length;t=Number(t.toFixed(i)),this.value=t,this._syncInput(),this.emit("ui-input",{value:t}),this.emit("ui-change",{value:t})}_clamp(e){return isFinite(this.min)&&e<this.min&&(e=this.min),isFinite(this.max)&&e>this.max&&(e=this.max),e}_syncInput(){let e=this.shadowRoot.querySelector(".input");e&&Number(e.value)!==this.value&&(e.value=this.value);let t=this.shadowRoot.querySelector(".decrement"),i=this.shadowRoot.querySelector(".increment");t&&(this.value<=this.min?t.setAttribute("data-disabled",""):t.removeAttribute("data-disabled")),i&&(this.value>=this.max?i.setAttribute("data-disabled",""):i.removeAttribute("data-disabled"))}_onInputChange(e){let t=e.target.value;if(t===""||t==="-")return;let i=this._clamp(Number(t));this.emit("ui-input",{value:i})}_onInputBlur(e){let t=Number(e.target.value);isNaN(t)&&(t=isFinite(this.min)?this.min:0),t=this._clamp(t),this.value=t,this._syncInput(),this.emit("ui-change",{value:t})}_onKeyDown(e){e.key==="ArrowUp"&&(e.preventDefault(),this._step(1)),e.key==="ArrowDown"&&(e.preventDefault(),this._step(-1))}focus(){this.shadowRoot?.querySelector(".input")?.focus()}blur(){this.shadowRoot?.querySelector(".input")?.blur()}};customElements.define("ui-input-number",$e);var Ae=class extends c{static properties={value:{type:Number,default:0,reflect:!0},max:{type:Number,default:5,reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},color:{type:String,default:"amber-400",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},readonly:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: block; }
      .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }

      .stars {
        display: inline-flex;
        gap: 0.15em;
      }
      :host(:not([readonly]):not([disabled])) .stars { cursor: pointer; }

      .star {
        display: flex;
        align-items: center;
        justify-content: center;
        background: none;
        border: none;
        padding: 0.1em;
        cursor: inherit;
        color: var(--ui-border-color, #d1d5db);
        transition: color 0.15s ease, transform 0.1s ease;
      }
      .star svg {
        width: 1.4em; height: 1.4em;
        stroke-width: 1.5;
        stroke-linecap: round;
        stroke-linejoin: round;
      }
      .star[data-active] { color: var(--_star-color, var(--ui-amber-400, #fbbf24)); }
      .star[data-active] svg { fill: currentColor; stroke: currentColor; }
      .star:not([data-active]) svg { fill: none; stroke: currentColor; }
      :host(:not([readonly]):not([disabled])) .star:hover { transform: scale(1.2); }
      :host(:not([readonly]):not([disabled])) .star[data-hover] { color: var(--_star-color, var(--ui-amber-400, #fbbf24)); }
      :host(:not([readonly]):not([disabled])) .star[data-hover] svg { fill: currentColor; stroke: currentColor; }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.3em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }
    `}constructor(){super(),this._hoverValue=0}render(){let e=r=>String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;"),t='<svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>',i="";for(let r=1;r<=this.max;r++){let o=r<=this.value?"data-active":"";i+=`<button type="button" class="star" data-value="${r}" ${o} aria-label="Rate ${r} of ${this.max}" role="radio" aria-checked="${r<=this.value}">${t}</button>`}return`
      <div class="label" part="label">
        ${e(this.label)}<span class="req">${this.required?" *":""}</span>
      </div>
      <div class="stars" part="stars" role="radiogroup" aria-label="${e(this.label||"Rating")}">${i}</div>
      <div class="help" part="help">${e(this.help)}</div>
      <div class="error-msg" part="error">${e(this.error)}</div>
    `}_update(){this._applyStyles(),super._update(),this._attachListeners()}_applyStyles(){let e={},t=d(this.size);if(t&&(e["font-size"]=t),this.color){let i=n(this.color);i&&(e["--_star-color"]=i)}this._setDynamicVars(e)}_attachListeners(){this.readonly||this.disabled||this.shadowRoot.querySelectorAll(".star").forEach(e=>{e.addEventListener("click",t=>{let i=Number(e.getAttribute("data-value"));this.value=i===this.value?0:i,this.emit("ui-change",{value:this.value})}),e.addEventListener("mouseenter",()=>{let t=Number(e.getAttribute("data-value"));this._hoverValue=t,this._updateHover()}),e.addEventListener("mouseleave",()=>{this._hoverValue=0,this._updateHover()})})}_updateHover(){this.shadowRoot.querySelectorAll(".star").forEach(e=>{let t=Number(e.getAttribute("data-value"));this._hoverValue>0&&t<=this._hoverValue?e.setAttribute("data-hover",""):e.removeAttribute("data-hover")})}};customElements.define("ui-input-rating",Ae);var De=class extends c{static properties={length:{type:Number,default:6,reflect:!0},value:{type:String,default:"",reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0},masked:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: block; }
      .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }

      .boxes {
        display: inline-flex;
        gap: 0.4em;
      }

      .box {
        width: 2.4em; height: 2.8em;
        text-align: center;
        border: 1.5px solid var(--_border, var(--ui-border-color, #d1d5db));
        border-radius: var(--ui-radius, 0.375em);
        background: var(--_bg, var(--ui-bg, #fff));
        color: var(--ui-text-color, #111827);
        font-family: var(--ui-font-mono, monospace);
        font-size: 1.2em;
        font-weight: 600;
        outline: none;
        transition: border-color 0.15s ease, box-shadow 0.15s ease;
        caret-color: var(--ui-focus-ring, #6366f1);
      }
      .box:focus {
        border-color: var(--ui-focus-ring, #6366f1);
        box-shadow: 0 0 0 0.15em rgba(99, 102, 241, 0.25);
      }
      :host([error]) .box { border-color: var(--ui-red-500, #ef4444); }
      :host([error]) .box:focus { box-shadow: 0 0 0 0.15em rgba(239, 68, 68, 0.25); }

      .box[data-filled] {
        border-color: var(--ui-focus-ring, #6366f1);
      }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.3em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }
    `}constructor(){super(),this._onInput=this._onInput.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onFocus=this._onFocus.bind(this)}render(){let e=r=>String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;"),t=this.value.split(""),i="";for(let r=0;r<this.length;r++){let o=t[r]||"",a=o?"data-filled":"",l=this.masked?"password":"text";i+=`<input class="box" type="${l}" maxlength="1" value="${o}"
                  data-index="${r}" ${a}
                  inputmode="numeric" pattern="[0-9]*" autocomplete="one-time-code"
                  ${this.disabled?"disabled":""}
                  aria-label="Digit ${r+1} of ${this.length}" />`}return`
      <div class="label" part="label">
        ${e(this.label)}<span class="req">${this.required?" *":""}</span>
      </div>
      <div class="boxes" part="boxes" role="group" aria-label="${e(this.label||"OTP input")}">${i}</div>
      <div class="help" part="help">${e(this.help)}</div>
      <div class="error-msg" part="error">${e(this.error)}</div>
    `}_update(){this._applyStyles(),super._update(),this._attachListeners()}_applyStyles(){let e={},t=d(this.size);if(t&&(e["font-size"]=t),this.background){let i=n(this.background);i&&(e["--_bg"]=i)}this._setDynamicVars(e)}_attachListeners(){this.shadowRoot.querySelectorAll(".box").forEach(e=>{e.addEventListener("input",this._onInput),e.addEventListener("keydown",this._onKeyDown),e.addEventListener("paste",this._onPaste),e.addEventListener("focus",this._onFocus)})}_getBoxes(){return Array.from(this.shadowRoot.querySelectorAll(".box"))}_collectValue(){return this._getBoxes().map(e=>e.value).join("")}_onInput(e){let t=e.target,i=Number(t.getAttribute("data-index"));t.value.length>1&&(t.value=t.value.slice(-1)),t.value?t.setAttribute("data-filled",""):t.removeAttribute("data-filled"),this.value=this._collectValue(),this.emit("ui-input",{value:this.value}),t.value&&i<this.length-1&&this._getBoxes()[i+1]?.focus(),this.value.length===this.length&&this.emit("ui-complete",{value:this.value})}_onKeyDown(e){let t=e.target,i=Number(t.getAttribute("data-index")),r=this._getBoxes();e.key==="Backspace"?!t.value&&i>0&&(r[i-1].value="",r[i-1].removeAttribute("data-filled"),r[i-1].focus(),this.value=this._collectValue(),this.emit("ui-input",{value:this.value}),e.preventDefault()):e.key==="ArrowLeft"&&i>0?(r[i-1].focus(),e.preventDefault()):e.key==="ArrowRight"&&i<this.length-1&&(r[i+1].focus(),e.preventDefault())}_onPaste(e){e.preventDefault();let i=(e.clipboardData||window.clipboardData).getData("text").trim().replace(/\D/g,"").slice(0,this.length).split(""),r=this._getBoxes();i.forEach((a,l)=>{r[l]&&(r[l].value=a,a&&r[l].setAttribute("data-filled",""))}),this.value=this._collectValue(),this.emit("ui-input",{value:this.value});let o=Math.min(i.length,this.length-1);r[o]?.focus(),this.value.length===this.length&&this.emit("ui-complete",{value:this.value})}_onFocus(e){e.target.select()}focus(){this._getBoxes()[0]?.focus()}blur(){this.shadowRoot?.activeElement?.blur()}};customElements.define("ui-input-otp",De);var qe=class extends c{static properties={value:{type:String,default:"",reflect:!0},placeholder:{type:String,default:"Add\u2026",reflect:!0},name:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},help:{type:String,default:"",reflect:!0},error:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"indigo-100",reflect:!0},max:{type:Number,default:0,reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},required:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
      }
      :host([disabled]) { opacity: 0.5; pointer-events: none; }

      .label {
        display: none;
        font-size: 0.875em;
        font-weight: 600;
        color: var(--ui-text-color, #374151);
        margin-bottom: 0.3em;
      }
      :host([label]) .label { display: block; }
      .req { color: var(--ui-red-500, #ef4444); margin-left: 0.15em; }

      .wrapper {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 0.3em;
        padding: 0.35em 0.5em;
        min-height: 2.4em;
        border: 1px solid var(--ui-border-color, #d1d5db);
        border-radius: var(--ui-radius, 0.375em);
        background: var(--_bg, var(--ui-bg, #fff));
        cursor: text;
        transition: border-color 0.15s ease, box-shadow 0.15s ease;
      }
      .wrapper:hover { border-color: #9ca3af; }
      .wrapper:focus-within {
        border-color: var(--ui-focus-ring, #6366f1);
        box-shadow: 0 0 0 0.15em rgba(99, 102, 241, 0.25);
      }
      :host([error]) .wrapper { border-color: var(--ui-red-500, #ef4444); }
      :host([error]) .wrapper:focus-within { box-shadow: 0 0 0 0.15em rgba(239, 68, 68, 0.25); }

      .tag {
        display: inline-flex;
        align-items: center;
        gap: 0.3em;
        padding: 0.15em 0.45em;
        border-radius: 0.25em;
        background: var(--_tag-color, var(--ui-indigo-100, #e0e7ff));
        color: var(--ui-text-color, #374151);
        font-size: 0.85em;
        font-weight: 500;
        max-width: 100%;
        overflow: hidden;
        white-space: nowrap;
        animation: tag-in 0.15s ease-out;
      }
      @keyframes tag-in { from { transform: scale(0.85); opacity: 0; } to { transform: scale(1); opacity: 1; } }
      .tag-text {
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .tag-remove {
        display: flex; align-items: center; justify-content: center;
        background: none; border: none;
        cursor: pointer; padding: 0;
        color: inherit; opacity: 0.5;
        font-size: 1em;
        line-height: 1;
        transition: opacity 0.1s ease;
      }
      .tag-remove:hover { opacity: 1; }
      .tag-remove svg {
        width: 0.8em; height: 0.8em;
        fill: none; stroke: currentColor;
        stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round;
      }

      .input {
        flex: 1;
        min-width: 4em;
        border: none;
        outline: none;
        background: transparent;
        font-family: inherit;
        font-size: inherit;
        color: var(--ui-text-color, #111827);
        padding: 0.15em 0;
      }
      .input::placeholder { color: var(--ui-text-muted, #9ca3af); }

      .help, .error-msg { display: none; font-size: 0.8em; margin-top: 0.3em; }
      .help { color: var(--ui-text-muted, #6b7280); }
      .error-msg { color: var(--ui-red-500, #ef4444); }
      :host([help]) .help       { display: block; }
      :host([error]) .error-msg { display: block; }
      :host([error]) .help      { display: none; }
    `}constructor(){super(),this._tags=[],this._onKeyDown=this._onKeyDown.bind(this),this._onInput=this._onInput.bind(this)}connectedCallback(){super.connectedCallback(),this._syncTagsFromValue()}_syncTagsFromValue(){this.value?this._tags=this.value.split(",").map(e=>e.trim()).filter(Boolean):this._tags=[]}get tags(){return[...this._tags]}render(){let e=o=>String(o).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;"),t='<svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>',i=this._tags.map((o,a)=>`
      <span class="tag" part="tag" data-index="${a}">
        <span class="tag-text">${e(o)}</span>
        <button type="button" class="tag-remove" data-index="${a}" aria-label="Remove ${e(o)}" tabindex="-1">${t}</button>
      </span>
    `).join(""),r=this.max>0&&this._tags.length>=this.max;return`
      <div class="label" part="label">
        ${e(this.label)}<span class="req">${this.required?" *":""}</span>
      </div>
      <div class="wrapper" part="wrapper">
        ${i}
        ${r?"":`<input class="input" part="input" type="text" placeholder="${e(this.placeholder)}" ${this.disabled?"disabled":""} />`}
      </div>
      <div class="help" part="help">${e(this.help)}</div>
      <div class="error-msg" part="error">${e(this.error)}</div>
    `}_update(){this._applyStyles(),super._update(),this._attachListeners()}_applyStyles(){let e={},t=d(this.size);if(t&&(e["font-size"]=t),this.background){let i=n(this.background);i&&(e["--_bg"]=i)}if(this.color){let i=n(this.color);i&&(e["--_tag-color"]=i)}this._setDynamicVars(e)}_attachListeners(){let e=this.shadowRoot.querySelector(".input");e&&(e.addEventListener("keydown",this._onKeyDown),e.addEventListener("input",this._onInput));let t=this.shadowRoot.querySelector(".wrapper");t&&t.addEventListener("click",()=>{this.shadowRoot.querySelector(".input")?.focus()}),this.shadowRoot.querySelectorAll(".tag-remove").forEach(i=>{i.addEventListener("click",r=>{r.stopPropagation();let o=Number(i.getAttribute("data-index"));this._removeTag(o)})})}_onKeyDown(e){if(e.key==="Enter"||e.key===","){e.preventDefault();let t=e.target;this._addTag(t.value),t.value=""}else e.key==="Backspace"&&!e.target.value&&this._tags.length>0&&this._removeTag(this._tags.length-1)}_onInput(e){let t=e.target.value;t.includes(",")&&(t.split(",").map(r=>r.trim()).filter(Boolean).forEach(r=>this._addTag(r)),e.target.value="")}_addTag(e){let t=e.trim();t&&(this._tags.includes(t)||this.max>0&&this._tags.length>=this.max||(this._tags.push(t),this._syncValue()))}_removeTag(e){this._tags.splice(e,1),this._syncValue()}_syncValue(){this.value=this._tags.join(", "),this.emit("ui-change",{value:this.value,tags:[...this._tags]})}focus(){this.shadowRoot?.querySelector(".input")?.focus()}blur(){this.shadowRoot?.querySelector(".input")?.blur()}};customElements.define("ui-input-tags",qe);var Re=class extends c{static properties={name:{type:String,default:"",reflect:!0},action:{type:String,default:"",reflect:!0},method:{type:String,default:"POST",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},loading:{type:Boolean,default:!1,reflect:!0},novalidate:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
      }
      :host([disabled]) { opacity: 0.6; pointer-events: none; }
      :host([loading])  { opacity: 0.6; pointer-events: none; }
    `}constructor(){super(),this._onSubmitEvent=this._onSubmitEvent.bind(this)}render(){return"<slot></slot>"}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this._onSubmitEvent)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this._onSubmitEvent)}_onSubmitEvent(e){e.target.closest('ui-button[type="submit"]')&&(e.preventDefault(),this.submit())}_getInputs(){return Array.from(this.querySelectorAll("[name]")).filter(e=>e.tagName&&e.tagName.startsWith("UI-INPUT"))}getValues(){let e={};for(let t of this._getInputs()){let i=t.getAttribute("name");i&&(t.tagName==="UI-INPUT-CHECKBOX"||t.tagName==="UI-INPUT-SWITCH"?e[i]=t.checked??t.hasAttribute("checked"):e[i]=t.value??t.getAttribute("value")??"")}return e}getFormData(){let e=new FormData,t=this.getValues();for(let[i,r]of Object.entries(t))e.append(i,String(r));return e}validate(){let e=[];for(let t of this._getInputs()){let i=t.getAttribute("name");if(!t.hasAttribute("required"))continue;let r=!1;if(t.tagName==="UI-INPUT-CHECKBOX"||t.tagName==="UI-INPUT-SWITCH")r=!(t.checked??t.hasAttribute("checked"));else{let o=t.value??t.getAttribute("value")??"";r=o===""||o===null||o===void 0}if(r){let a=`${t.getAttribute("label")||i} is required`;e.push({name:i,element:t,message:a}),t.setAttribute("error",a)}else t.hasAttribute("error")&&t.getAttribute("error").endsWith("is required")&&t.removeAttribute("error")}return e}submit(){if(!this.novalidate){let t=this.validate();if(t.length>0)return this.emit("ui-invalid",{errors:t}),t[0]?.element?.focus?.(),!1}let e=this.getValues();return this.emit("ui-submit",{values:e,formData:this.getFormData()}),this.action&&this._sendJson(this.action,this.method),!0}async submitJson(e,t={}){if(!this.novalidate){let i=this.validate();if(i.length>0)return this.emit("ui-invalid",{errors:i}),i[0]?.element?.focus?.(),{ok:!1,errors:i}}return this._sendJson(e||this.action,t.method||this.method,t)}async _sendJson(e,t="POST",i={}){if(!e){let o=new Error("No URL provided. Set the action attribute or pass a URL.");return this.emit("ui-error",{ok:!1,error:o,message:o.message}),{ok:!1,error:o}}let r=this.getValues();this.loading=!0;try{let o=await fetch(e,{method:(t||"POST").toUpperCase(),headers:{"Content-Type":"application/json",...i.headers||{}},body:JSON.stringify(r)}),a=null;(o.headers.get("content-type")||"").includes("json")?a=await o.json():a=await o.text();let h={ok:o.ok,status:o.status,data:a,values:r};return o.ok?this.emit("ui-response",h):this.emit("ui-error",h),h}catch(o){let a={ok:!1,error:o,message:o.message,values:r};return this.emit("ui-error",a),a}finally{this.loading=!1}}reset(){for(let e of this._getInputs())if(e.hasAttribute("error")&&e.getAttribute("error").endsWith("is required")&&e.removeAttribute("error"),e.tagName==="UI-INPUT-CHECKBOX"||e.tagName==="UI-INPUT-SWITCH")e.checked=!1,e.removeAttribute("checked");else if(e.tagName==="UI-INPUT-RATING")e.value=0;else if(e.tagName==="UI-INPUT-NUMBER"){let t=Number(e.getAttribute("min"));e.value=isFinite(t)?t:0}else e.value="",e.setAttribute("value","");this.emit("ui-reset")}};customElements.define("ui-form",Re);var Ie=class s extends c{static properties={direction:{type:String,default:"",reflect:!0},horizontal:{type:Boolean,default:!1,reflect:!0},gap:{type:String,default:"",reflect:!0},align:{type:String,default:"",reflect:!0},justify:{type:String,default:"",reflect:!0},wrap:{type:Boolean,default:!1,reflect:!0},inline:{type:Boolean,default:!1,reflect:!0},reverse:{type:Boolean,default:!1,reflect:!0},padding:{type:String,default:"",reflect:!0},width:{type:String,default:"",reflect:!0},height:{type:String,default:"",reflect:!0},grow:{type:Boolean,default:!1,reflect:!0},center:{type:Boolean,default:!1,reflect:!0},full:{type:Boolean,default:!1,reflect:!0}};static _justifyMap={start:"flex-start",center:"center",end:"flex-end",between:"space-between",around:"space-around",evenly:"space-evenly"};static _alignMap={start:"flex-start",center:"center",end:"flex-end",stretch:"stretch",baseline:"baseline"};static styles(){return`
      :host {
        display: flex;
        flex-direction: column;
        box-sizing: border-box;
      }
      :host([inline]) { display: inline-flex; }
      :host([horizontal]) { flex-direction: row; }
      :host([wrap]) { flex-wrap: wrap; }
      :host([grow]) { flex: 1 1 auto; }
      :host([full]) { width: 100%; height: 100%; }
      :host([reverse]:not([horizontal])) { flex-direction: column-reverse; }
      :host([reverse][horizontal]) { flex-direction: row-reverse; }
    `}render(){return"<slot></slot>"}connectedCallback(){super.connectedCallback(),this._applyLayout()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyLayout()}_applyLayout(){let e={};if(this.direction&&(e["flex-direction"]=this.direction),this.gap){let r=d(this.gap);e.gap=r||this.gap}let t=this.center?"center":this.align;t&&(e["align-items"]=s._alignMap[t]||t);let i=this.center?"center":this.justify;if(i&&(e["justify-content"]=s._justifyMap[i]||i),this.padding){let r=d(this.padding);e.padding=r||this.padding}this.width&&(e.width=this.width),this.height&&(e.height=this.height),this._setDynamicVars(e)}};customElements.define("ui-layout-stack",Ie);var Te=class s extends c{static properties={columns:{type:String,default:"",reflect:!0},rows:{type:String,default:"",reflect:!0},gap:{type:String,default:"",reflect:!0},columnGap:{type:String,default:"",reflect:!0,attribute:"column-gap"},rowGap:{type:String,default:"",reflect:!0,attribute:"row-gap"},align:{type:String,default:"",reflect:!0},justify:{type:String,default:"",reflect:!0},alignContent:{type:String,default:"",reflect:!0,attribute:"align-content"},justifyContent:{type:String,default:"",reflect:!0,attribute:"justify-content"},flow:{type:String,default:"",reflect:!0},autoRows:{type:String,default:"",reflect:!0,attribute:"auto-rows"},autoCols:{type:String,default:"",reflect:!0,attribute:"auto-cols"},areas:{type:String,default:"",reflect:!0},inline:{type:Boolean,default:!1,reflect:!0},padding:{type:String,default:"",reflect:!0},width:{type:String,default:"",reflect:!0},height:{type:String,default:"",reflect:!0},full:{type:Boolean,default:!1,reflect:!0},minColWidth:{type:String,default:"",reflect:!0,attribute:"min-col-width"}};static _contentMap={start:"start",center:"center",end:"end",stretch:"stretch",between:"space-between",around:"space-around",evenly:"space-evenly"};static styles(){return`
      :host {
        display: grid;
        box-sizing: border-box;
      }
      :host([inline]) { display: inline-grid; }
      :host([full]) { width: 100%; height: 100%; }
    `}render(){return"<slot></slot>"}connectedCallback(){super.connectedCallback(),this._applyLayout()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyLayout()}_resolveTemplate(e){if(!e)return;let t=Number(e);return Number.isInteger(t)&&t>0?`repeat(${t}, 1fr)`:e}_applyLayout(){let e={};if(this.minColWidth?e["grid-template-columns"]=`repeat(auto-fill, minmax(${this.minColWidth}, 1fr))`:this.columns&&(e["grid-template-columns"]=this._resolveTemplate(this.columns)),this.rows&&(e["grid-template-rows"]=this._resolveTemplate(this.rows)),this.gap){let t=d(this.gap);e.gap=t||this.gap}if(this.columnGap){let t=d(this.columnGap);e["column-gap"]=t||this.columnGap}if(this.rowGap){let t=d(this.rowGap);e["row-gap"]=t||this.rowGap}if(this.align&&(e["align-items"]=this.align),this.justify&&(e["justify-items"]=this.justify),this.alignContent&&(e["align-content"]=s._contentMap[this.alignContent]||this.alignContent),this.justifyContent&&(e["justify-content"]=s._contentMap[this.justifyContent]||this.justifyContent),this.flow&&(e["grid-auto-flow"]=this.flow),this.autoRows&&(e["grid-auto-rows"]=this.autoRows),this.autoCols&&(e["grid-auto-columns"]=this.autoCols),this.areas){let t=this.areas.split("|").map(i=>`"${i.trim()}"`).join(" ");e["grid-template-areas"]=t}if(this.padding){let t=d(this.padding);e.padding=t||this.padding}this.width&&(e.width=this.width),this.height&&(e.height=this.height),this._setDynamicVars(e)}};customElements.define("ui-layout-grid",Te);var Me=class s extends c{static properties={maxWidth:{type:String,default:"",reflect:!0,attribute:"max-width"},padding:{type:String,default:"",reflect:!0},align:{type:String,default:"",reflect:!0},width:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static _sizeMap={small:"640px",medium:"960px",large:"1200px","x-large":"1400px",full:"100%"};static styles(){return`
      :host {
        display: block;
        box-sizing: border-box;
        width: 100%;
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
        padding: 0 1.5em;
      }
    `}render(){return"<slot></slot>"}connectedCallback(){super.connectedCallback(),this._applyLayout()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyLayout()}_applyLayout(){let e={};if(this.maxWidth)e["max-width"]=this.maxWidth;else if(this.size){let t=s._sizeMap[this.size.toLowerCase()];t&&(e["max-width"]=t)}if(this.padding){let t=d(this.padding);e.padding=t||this.padding}this.width&&(e.width=this.width),this.align==="left"?(e["margin-left"]="0",e["margin-right"]="auto"):this.align==="right"&&(e["margin-left"]="auto",e["margin-right"]="0"),this._setDynamicVars(e)}};customElements.define("ui-layout-container",Me);var Be=class extends c{static properties={vertical:{type:Boolean,default:!1,reflect:!0},position:{type:String,default:"50",reflect:!0},min:{type:String,default:"10",reflect:!0},max:{type:String,default:"90",reflect:!0},gutterSize:{type:String,default:"6",reflect:!0,attribute:"gutter-size"},disabled:{type:Boolean,default:!1,reflect:!0},width:{type:String,default:"",reflect:!0},height:{type:String,default:"",reflect:!0},full:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: flex;
        box-sizing: border-box;
        overflow: hidden;
      }
      :host([full]) { width: 100%; height: 100%; }
      :host([vertical]) { flex-direction: column; }

      .panel {
        overflow: auto;
        box-sizing: border-box;
      }
      .panel-a { flex: var(--_flex-a, 1 1 50%); }
      .panel-b { flex: var(--_flex-b, 1 1 50%); }

      .gutter {
        flex: 0 0 auto;
        background: var(--ui-border-color, #e5e7eb);
        position: relative;
        z-index: 1;
        transition: background 0.15s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .gutter::after {
        content: '';
        display: block;
        border-radius: 1px;
        opacity: 0.5;
        transition: opacity 0.15s ease;
      }
      .gutter:hover::after, .gutter.dragging::after {
        opacity: 0.9;
      }
      .gutter:hover, .gutter.dragging {
        background: var(--ui-focus-ring, #6366f1);
      }
      :host(:not([vertical])) .gutter {
        width: var(--_gutter, 6px);
        cursor: col-resize;
      }
      :host(:not([vertical])) .gutter::after {
        width: 2px;
        height: 24px;
        border-left: 1px solid rgba(255,255,255,0.7);
        border-right: 1px solid rgba(255,255,255,0.7);
      }
      :host([vertical]) .gutter {
        height: var(--_gutter, 6px);
        cursor: row-resize;
      }
      :host([vertical]) .gutter::after {
        width: 24px;
        height: 2px;
        border-top: 1px solid rgba(255,255,255,0.7);
        border-bottom: 1px solid rgba(255,255,255,0.7);
      }
      :host([disabled]) .gutter {
        cursor: default;
        pointer-events: none;
        opacity: 0.4;
      }

      /* Slotted children fill their panel */
      ::slotted(*) {
        width: 100%;
        height: 100%;
        box-sizing: border-box;
      }
    `}constructor(){super(),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._dragging=!1,this._rendered=!1}render(){return`
      <div class="panel panel-a"><slot name="__a"></slot></div>
      <div class="gutter" part="gutter"></div>
      <div class="panel panel-b"><slot name="__b"></slot></div>
    `}connectedCallback(){super.connectedCallback(),this._assignSlots(),this._mo=new MutationObserver(()=>this._assignSlots()),this._mo.observe(this,{childList:!0})}disconnectedCallback(){super.disconnectedCallback(),this._mo?.disconnect()}_assignSlots(){let e=[...this.children];e.forEach(t=>t.removeAttribute("slot")),e[0]&&e[0].setAttribute("slot","__a"),e[1]&&e[1].setAttribute("slot","__b")}_attachListeners(){let e=this.shadowRoot.querySelector(".gutter");e&&e.addEventListener("pointerdown",this._onPointerDown)}_onPointerDown(e){if(this.disabled)return;e.preventDefault(),this._dragging=!0;let t=this.shadowRoot.querySelector(".gutter");t?.classList.add("dragging"),t?.setPointerCapture(e.pointerId),t?.addEventListener("pointermove",this._onPointerMove),t?.addEventListener("pointerup",this._onPointerUp),t?.addEventListener("lostpointercapture",this._onPointerUp)}_onPointerMove(e){if(!this._dragging)return;let t=this.getBoundingClientRect(),i;this.vertical?i=(e.clientY-t.top)/t.height*100:i=(e.clientX-t.left)/t.width*100;let r=parseFloat(this.min)||10,o=parseFloat(this.max)||90;i=Math.max(r,Math.min(o,i)),this._position=String(Math.round(i*100)/100),this.setAttribute("position",this._position),this._applyPosition(i),this.emit("ui-resize",{position:i})}_onPointerUp(e){this._dragging=!1;let t=this.shadowRoot.querySelector(".gutter");t?.classList.remove("dragging"),t?.removeEventListener("pointermove",this._onPointerMove),t?.removeEventListener("pointerup",this._onPointerUp),t?.removeEventListener("lostpointercapture",this._onPointerUp)}_applyPosition(e){let t=`${parseFloat(this.gutterSize)||6}px`,i=`${e}%`,r=`${100-e}%`;this._setDynamicVars({"--_flex-a":`0 0 calc(${i} - ${t} / 2)`,"--_flex-b":`0 0 calc(${r} - ${t} / 2)`,"--_gutter":t})}_applyLayout(){let e=parseFloat(this.position)||50,t=`${parseFloat(this.gutterSize)||6}px`,i=`${e}%`,r=`${100-e}%`,o={"--_flex-a":`0 0 calc(${i} - ${t} / 2)`,"--_flex-b":`0 0 calc(${r} - ${t} / 2)`,"--_gutter":t};this.width&&(o.width=this.width),this.height&&(o.height=this.height),this._setDynamicVars(o)}_update(){this._rendered||(super._update(),this._rendered=!0,this._attachListeners()),this._applyLayout()}};customElements.define("ui-layout-split",Be);var Pe=class extends c{static properties={size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: block;
        flex: 1 1 auto;
        box-sizing: border-box;
      }
      :host([size]) {
        flex: 0 0 auto;
      }
    `}render(){return""}connectedCallback(){super.connectedCallback(),this.setAttribute("role","presentation"),this.setAttribute("aria-hidden","true"),this._applySize()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applySize()}_applySize(){if(!this.size){this._setDynamicVars({});return}let e=d(this.size)||this.size;this._setDynamicVars({"min-width":e,"min-height":e})}};customElements.define("ui-layout-spacer",Pe);var Oe=class extends c{static properties={value:{type:Number,default:-1,reflect:!0},max:{type:Number,default:100,reflect:!0},type:{type:String,default:"bar",reflect:!0},color:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},thickness:{type:String,default:"",reflect:!0},label:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        box-sizing: border-box;
        line-height: 1;
      }

      /* \u2500\u2500 BAR \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .bar-track {
        width: 100%;
        height: var(--_thickness, 0.5em);
        background: var(--_track, var(--ui-bg-subtle, #f3f4f6));
        border-radius: 9999px;
        overflow: hidden;
        position: relative;
      }

      .bar-fill {
        height: 100%;
        background: var(--_fill, var(--ui-indigo-500, #6366f1));
        border-radius: 9999px;
        transition: width 0.35s ease;
        width: var(--_pct, 0%);
      }

      /* Indeterminate bar */
      :host([value="-1"]) .bar-fill,
      :host(:not([value])) .bar-fill {
        width: 40%;
        animation: bar-indeterminate 1.4s ease-in-out infinite;
      }

      @keyframes bar-indeterminate {
        0%   { transform: translateX(-100%); }
        100% { transform: translateX(350%); }
      }

      .bar-wrapper {
        display: flex;
        align-items: center;
        gap: 0.75em;
      }

      .bar-label {
        font-size: 0.8em;
        font-weight: 600;
        color: var(--ui-text-muted, #6b7280);
        white-space: nowrap;
        min-width: 3em;
        text-align: right;
      }

      /* \u2500\u2500 RING \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      :host([type="ring"]) {
        display: inline-block;
      }

      .ring-wrapper {
        position: relative;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 6em;
        height: 6em;
      }

      .ring-svg {
        width: 100%;
        height: 100%;
        transform: rotate(-90deg);
        display: block;
      }

      .ring-track {
        fill: none;
        stroke: var(--_track, var(--ui-bg-subtle, #f3f4f6));
        stroke-width: var(--_thickness, 10);
      }

      .ring-fill {
        fill: none;
        stroke: var(--_fill, var(--ui-indigo-500, #6366f1));
        stroke-width: var(--_thickness, 10);
        stroke-linecap: round;
        transition: stroke-dashoffset 0.35s ease;
      }

      /* Indeterminate ring */
      :host([value="-1"]) .ring-svg,
      :host(:not([value])) .ring-svg {
        animation: ring-spin 1.4s linear infinite;
      }

      :host([value="-1"]) .ring-fill,
      :host(:not([value])) .ring-fill {
        stroke-dashoffset: calc(var(--_circ) * 0.75) !important;
      }

      @keyframes ring-spin {
        100% { transform: rotate(270deg); }
      }

      .ring-label {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        color: var(--ui-text-color, #111827);
        font-size: 1.4em;
        pointer-events: none;
      }
    `}get _indeterminate(){return this.value<0||!this.hasAttribute("value")}connectedCallback(){super.connectedCallback()}_update(){super._update(),this._applyA11y(),this._applyStyles()}_applyA11y(){if(this.setAttribute("role","progressbar"),this.setAttribute("aria-valuemin","0"),this.setAttribute("aria-valuemax",String(this.max)),this._indeterminate)this.removeAttribute("aria-valuenow");else{let e=Math.min(Math.max(0,this.value),this.max);this.setAttribute("aria-valuenow",String(e))}}_applyStyles(){let e={};this.color&&(e["--_fill"]=n(this.color)),this.background&&(e["--_track"]=n(this.background)),this.thickness&&(e["--_thickness"]=d(this.thickness)||this.thickness);let t=d(this.size);if(t&&(e["font-size"]=t),!this._indeterminate){let i=Math.min(100,Math.max(0,this.value/this.max*100));e["--_pct"]=`${i}%`}this._setDynamicVars(e)}render(){return this.type==="ring"?this._renderRing():this._renderBar()}_renderBar(){let e=this._indeterminate?0:Math.round(Math.min(100,Math.max(0,this.value/this.max*100)));return`
      <div class="bar-wrapper">
        <div class="bar-track">
          <div class="bar-fill"></div>
        </div>
        ${this.label&&!this._indeterminate?`<span class="bar-label">${e}%</span>`:""}
      </div>`}_renderRing(){let r=2*Math.PI*55,o=this._indeterminate?0:Math.min(100,Math.max(0,this.value/this.max*100)),a=r-o/100*r;return`
      <div class="ring-wrapper" style="--_circ:${r};">
        <svg class="ring-svg" viewBox="0 0 120 120">
          <circle class="ring-track"
            cx="${120/2}" cy="${120/2}" r="55"></circle>
          <circle class="ring-fill"
            cx="${120/2}" cy="${120/2}" r="55"
            stroke-dasharray="${r}"
            stroke-dashoffset="${this._indeterminate?r*.75:a}"></circle>
        </svg>
        ${this.label&&!this._indeterminate?`<span class="ring-label">${Math.round(o)}%</span>`:""}
      </div>`}};customElements.define("ui-progress",Oe);var He=class extends c{static properties={variant:{type:String,default:"text",reflect:!0},width:{type:String,default:"",reflect:!0},height:{type:String,default:"",reflect:!0},lines:{type:Number,default:1,reflect:!0},gap:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},animated:{type:Boolean,default:!0,reflect:!0},radius:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: block;
        box-sizing: border-box;
      }
      :host([variant="circle"]) {
        display: inline-block;
      }

      .bone {
        background: var(--ui-bg-subtle, #e5e7eb);
        border-radius: var(--_radius, 0.25em);
        position: relative;
        overflow: hidden;
      }

      :host([animated]) .bone::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(
          90deg,
          transparent 0%,
          rgba(255,255,255,0.5) 50%,
          transparent 100%
        );
        animation: shimmer 1.5s ease-in-out infinite;
      }

      @keyframes shimmer {
        0%   { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
      }

      .text-bone {
        width: var(--_w, 100%);
        height: var(--_h, 1em);
      }

      .text-bone:last-child:not(:first-child) {
        width: var(--_last-w, 70%);
      }

      .lines {
        display: flex;
        flex-direction: column;
        gap: var(--_gap, 0.6em);
      }

      .circle-bone {
        width: var(--_w, 2.5em);
        height: var(--_h, 2.5em);
        border-radius: 50%;
      }

      .rect-bone {
        width: var(--_w, 100%);
        height: var(--_h, 6em);
      }
    `}render(){let e=(this.variant||"text").toLowerCase();if(e==="circle")return'<div class="bone circle-bone" part="bone"></div>';if(e==="rect")return'<div class="bone rect-bone" part="bone"></div>';let t=Math.max(1,Math.floor(this.lines||1));return t===1?'<div class="bone text-bone" part="bone"></div>':`<div class="lines">${Array.from({length:t},()=>'<div class="bone text-bone" part="bone"></div>').join("")}</div>`}connectedCallback(){super.connectedCallback(),this.setAttribute("role","presentation"),this.setAttribute("aria-hidden","true")}_update(){super._update(),this._applyStyles()}_applyStyles(){let e={};if(this.size){let t=d(this.size);t&&(e["font-size"]=t)}this.width&&(e["--_w"]=this.width),this.height&&(e["--_h"]=this.height),this.gap&&(e["--_gap"]=this.gap),this.radius&&(e["--_radius"]=this.radius),this._setDynamicVars(e)}};customElements.define("ui-skeleton",He);var je=class extends c{static properties={size:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},thickness:{type:String,default:"",reflect:!0},speed:{type:String,default:"",reflect:!0},label:{type:String,default:"Loading",reflect:!0},overlay:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        vertical-align: middle;
      }

      :host([overlay]) {
        position: absolute;
        inset: 0;
        display: flex;
        background: rgba(255,255,255,0.6);
        z-index: 100;
      }

      .spinner {
        display: block;
        width: 1.5em;
        height: 1.5em;
        border-radius: 50%;
        border: var(--_thickness, 0.2em) solid var(--_track, rgba(0,0,0,0.1));
        border-top-color: var(--_color, var(--ui-indigo-500, #6366f1));
        animation: spin var(--_speed, 0.75s) linear infinite;
        box-sizing: border-box;
      }

      @keyframes spin {
        to { transform: rotate(360deg); }
      }
    `}render(){return`<div class="spinner" role="status" aria-label="${this._esc(this.label)}" part="spinner"></div>`}_esc(e){return String(e||"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")}connectedCallback(){super.connectedCallback()}_update(){super._update(),this.setAttribute("role","status"),this.setAttribute("aria-label",this.label||"Loading"),this._applyStyles()}_applyStyles(){let e={},t=d(this.size);t&&(e["font-size"]=t),this.color&&(e["--_color"]=n(this.color)||this.color),this.thickness&&(e["--_thickness"]=this.thickness),this.speed&&(e["--_speed"]=this.speed),this._setDynamicVars(e)}};customElements.define("ui-spinner",je);var Fe=class extends c{static properties={striped:{type:Boolean,default:!1,reflect:!0},bordered:{type:Boolean,default:!1,reflect:!0},hoverable:{type:Boolean,default:!1,reflect:!0},compact:{type:Boolean,default:!1,reflect:!0},selectable:{type:Boolean,default:!1,reflect:!0},sortable:{type:Boolean,default:!1,reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},stickyHeader:{type:Boolean,default:!1,reflect:!0,attribute:"sticky-header"}};static styles(){return`
      :host {
        display: block;
        box-sizing: border-box;
        overflow: auto;
        border: 1px solid var(--ui-border-color, #e5e7eb);
        border-radius: var(--ui-radius, 0.5em);
      }

      :host([sticky-header]) {
        overflow: hidden;
      }

      .wrapper {
        overflow: auto;
        height: 100%;
        max-height: 100%;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        text-align: left;
      }

      th, td {
        padding: 0.75em 1em;
        vertical-align: middle;
      }

      :host([compact]) th,
      :host([compact]) td {
        padding: 0.4em 0.65em;
      }

      thead th {
        font-weight: 600;
        color: var(--ui-text-muted, #6b7280);
        font-size: 0.85em;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        background: var(--ui-bg-subtle, #f9fafb);
        border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
        user-select: none;
        white-space: nowrap;
      }

      :host([sticky-header]) thead th {
        position: sticky;
        top: 0;
        z-index: 2;
      }

      tbody td {
        border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
      }

      /* Remove bottom border on last row */
      tbody tr:last-child td {
        border-bottom: none;
      }

      /* Striped */
      :host([striped]) tbody tr:nth-child(even) {
        background: var(--ui-bg-subtle, #f9fafb);
      }

      /* Bordered */
      :host([bordered]) th,
      :host([bordered]) td {
        border: 1px solid var(--ui-border-color, #e5e7eb);
      }

      /* Hoverable */
      :host([hoverable]) tbody tr:hover {
        background: var(--ui-gray-100, #f3f4f6);
      }

      /* Sortable header */
      th.sortable {
        cursor: pointer;
        transition: color 0.15s ease;
      }
      th.sortable:hover {
        color: var(--ui-text-color, #111827);
      }
      .sort-icon {
        display: inline-block;
        margin-left: 0.3em;
        opacity: 0.4;
        font-size: 0.85em;
      }
      th.sorted .sort-icon {
        opacity: 1;
      }

      /* Selection checkbox */
      .sel-cell {
        width: 2em;
        text-align: center;
      }
      .sel-cell input[type="checkbox"] {
        cursor: pointer;
        width: 1em;
        height: 1em;
        accent-color: var(--ui-indigo-500, #6366f1);
      }

      /* Selected row */
      tr.selected {
        background: color-mix(in srgb, var(--ui-indigo-500, #6366f1) 8%, transparent) !important;
      }

      /* Code inside cells */
      td code, th code {
        font-family: var(--ui-font-mono, ui-monospace, monospace);
        font-size: 0.9em;
        background: var(--ui-bg-subtle, #f3f4f6);
        padding: 0.15em 0.4em;
        border-radius: 0.25em;
        color: var(--ui-indigo-600, #4f46e5);
      }

      /* Hidden slot \u2014 slotted content is adopted into shadow DOM */
      .slot-host {
        display: none !important;
      }
    `}constructor(){super(),this._columns=[],this._data=[],this._selected=new Set,this._sortCol="",this._sortDir="asc",this._rendered=!1,this._onHeaderClick=this._onHeaderClick.bind(this),this._onRowSelect=this._onRowSelect.bind(this),this._onSelectAll=this._onSelectAll.bind(this)}set columns(e){this._columns=e||[],this._updateTable()}get columns(){return this._columns}set data(e){this._data=e||[],this._selected.clear(),this._updateTable()}get data(){return this._data}get selectedRows(){return[...this._selected].map(e=>this._data[e]).filter(Boolean)}render(){return this._columns.length?this._renderTable():'<div class="slot-host"><slot></slot></div><div class="wrapper"></div>'}connectedCallback(){super.connectedCallback(),this._applyStyles(),requestAnimationFrame(()=>this._adoptSlottedTable())}_adoptSlottedTable(){if(this._columns.length)return;let e=this.shadowRoot?.querySelector(".wrapper");if(!e)return;let t=this.querySelector("table");t&&(e.innerHTML="",e.appendChild(t.cloneNode(!0)))}_renderTable(){let e=a=>String(a??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),t=this._columns,i=this._getSortedData(),r="";if(this.selectable){let a=i.length>0&&this._selected.size===i.length;r+=`<th class="sel-cell"><input type="checkbox" class="select-all" ${a?"checked":""} aria-label="Select all"></th>`}for(let a of t){let l=a.sortable||this.sortable,h=this._sortCol===a.key,u=h?this._sortDir==="asc"?"\u25B2":"\u25BC":"\u21C5",f=[l?"sortable":"",h?"sorted":""].filter(Boolean).join(" "),m=a.align?` style="text-align:${a.align}"`:"";r+=`<th class="${f}" data-key="${e(a.key)}"${m}>${e(a.label||a.key)}${l?`<span class="sort-icon">${u}</span>`:""}</th>`}let o="";for(let a=0;a<i.length;a++){let l=i[a],h=this._data.indexOf(l),u=this._selected.has(h),f="";this.selectable&&(f+=`<td class="sel-cell"><input type="checkbox" class="row-sel" data-idx="${h}" ${u?"checked":""} aria-label="Select row"></td>`);for(let m of t){let v=m.render?m.render(l[m.key],l,a):e(l[m.key]),k=m.align?` style="text-align:${m.align}"`:"";f+=`<td${k}>${v}</td>`}o+=`<tr class="${u?"selected":""}" data-row="${h}">${f}</tr>`}return`<table part="table"><thead><tr>${r}</tr></thead><tbody>${o}</tbody></table>`}_getSortedData(){if(!this._sortCol)return[...this._data];let e=this._sortCol,t=this._sortDir==="asc"?1:-1;return[...this._data].sort((i,r)=>{let o=i[e]??"",a=r[e]??"";return typeof o=="number"&&typeof a=="number"?(o-a)*t:String(o).localeCompare(String(a))*t})}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyStyles()}_updateTable(){this._initialised&&(this._update(),this._attachTableListeners(),this._applyStyles())}_update(){if(!this._columns.length){this._rendered||(super._update(),this._rendered=!0,requestAnimationFrame(()=>this._adoptSlottedTable()));return}super._update(),this._attachTableListeners()}_attachTableListeners(){let e=this.shadowRoot;if(!e)return;e.querySelectorAll("th.sortable").forEach(i=>{i.removeEventListener("click",this._onHeaderClick),i.addEventListener("click",this._onHeaderClick)}),e.querySelectorAll(".row-sel").forEach(i=>{i.removeEventListener("change",this._onRowSelect),i.addEventListener("change",this._onRowSelect)});let t=e.querySelector(".select-all");t&&(t.removeEventListener("change",this._onSelectAll),t.addEventListener("change",this._onSelectAll))}_onHeaderClick(e){let i=e.currentTarget.dataset.key;i&&(this._sortCol===i?this._sortDir=this._sortDir==="asc"?"desc":"asc":(this._sortCol=i,this._sortDir="asc"),this._updateTable(),this.emit("ui-sort",{column:i,direction:this._sortDir}))}_onRowSelect(e){let t=parseInt(e.target.dataset.idx,10);e.target.checked?this._selected.add(t):this._selected.delete(t),this._updateTable(),this.emit("ui-select",{selected:this._selected.has(t),row:this._data[t],index:t})}_onSelectAll(e){e.target.checked?this._data.forEach((t,i)=>this._selected.add(i)):this._selected.clear(),this._updateTable(),this.emit("ui-select",{selected:e.target.checked,row:null,index:-1})}_applyStyles(){let e={};if(this.size){let t=d(this.size);t&&(e["font-size"]=t)}this.background&&(e["--_bg"]=n(this.background)||this.background,e.background=e["--_bg"]),this._setDynamicVars(e)}};customElements.define("ui-table",Fe);var Ve=class extends c{static properties={background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},placement:{type:String,default:"top",reflect:!0},selected:{type:Number,default:0,reflect:!0}};constructor(){super(),this._handleClick=this._handleClick.bind(this),this._handleKeyDown=this._handleKeyDown.bind(this)}static styles(){return`
      :host {
        display: flex;
        flex-direction: column;
        border: 1px solid var(--ui-border-color, #e5e7eb);
        border-radius: var(--ui-radius, 0.5em);
        overflow: hidden;
        box-sizing: border-box;
        line-height: 1.5;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
      }

      /* Bottom placement flips the order */
      :host([placement="bottom"]) {
        flex-direction: column-reverse;
      }

      /* Start (left) placement \u2014 horizontal layout */
      :host([placement="start"]) {
        flex-direction: row;
      }

      /* End (right) placement \u2014 horizontal layout, reversed */
      :host([placement="end"]) {
        flex-direction: row-reverse;
      }

      /* \u2500\u2500 Tab bar \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .tablist {
        display: flex;
        gap: 0;
        background: var(--_bar-bg, var(--ui-bg-subtle, #f9fafb));
        overflow-x: auto;
        scrollbar-width: none;
      }

      .tablist::-webkit-scrollbar { display: none; }

      /* Vertical tablist for start/end placement */
      :host([placement="start"]) .tablist,
      :host([placement="end"]) .tablist {
        flex-direction: column;
        overflow-x: visible;
        overflow-y: auto;
        min-width: max-content;
        border-right: 1px solid var(--ui-border-color, #e5e7eb);
      }

      :host([placement="end"]) .tablist {
        border-right: none;
        border-left: 1px solid var(--ui-border-color, #e5e7eb);
      }

      /* \u2500\u2500 Individual tab button \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .tab {
        flex: 0 0 auto;
        display: inline-flex;
        align-items: center;
        gap: 0.4em;
        padding: 0.75em 1.25em;
        border: none;
        background: transparent;
        color: var(--_tab-color, var(--ui-text-muted, #6b7280));
        font: inherit;
        font-size: inherit;
        font-weight: 500;
        cursor: pointer;
        white-space: nowrap;
        position: relative;
        user-select: none;
        transition: color 0.15s ease, background 0.15s ease;
      }

      .tab:hover {
        color: var(--_color, var(--ui-text-color, #111827));
        background: rgba(0, 0, 0, 0.04);
      }

      .tab:focus-visible {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: -0.125em;
        z-index: 1;
      }

      .tab[aria-selected="true"] {
        color: var(--_active-color, var(--ui-focus-ring, #6366f1));
        font-weight: 600;
      }

      /* Active indicator line */
      .tab[aria-selected="true"]::after {
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        height: 0.15em;
        background: var(--_active-color, var(--ui-focus-ring, #6366f1));
        border-radius: 0.15em 0.15em 0 0;
      }

      :host([placement="bottom"]) .tab[aria-selected="true"]::after {
        bottom: auto;
        top: 0;
        border-radius: 0 0 0.15em 0.15em;
      }

      /* Vertical indicator for start placement (right edge) */
      :host([placement="start"]) .tab[aria-selected="true"]::after {
        top: 0;
        bottom: 0;
        left: auto;
        right: 0;
        width: 0.15em;
        height: auto;
        border-radius: 0.15em 0 0 0.15em;
      }

      /* Vertical indicator for end placement (left edge) */
      :host([placement="end"]) .tab[aria-selected="true"]::after {
        top: 0;
        bottom: 0;
        left: 0;
        right: auto;
        width: 0.15em;
        height: auto;
        border-radius: 0 0.15em 0.15em 0;
      }

      /* Vertical tabs: left-align text */
      :host([placement="start"]) .tab,
      :host([placement="end"]) .tab {
        justify-content: flex-start;
        text-align: left;
        white-space: normal;
      }

      .tab[aria-disabled="true"] {
        opacity: 0.4;
        cursor: not-allowed;
      }

      .tab[aria-disabled="true"]:hover {
        background: transparent;
        color: var(--_tab-color, var(--ui-text-muted, #6b7280));
      }

      /* \u2500\u2500 Panel area \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .panels {
        flex: 1;
      }

      ::slotted(ui-tab) {
        display: none !important;
      }

      ::slotted(ui-tab[active]) {
        display: block !important;
      }
    `}connectedCallback(){super.connectedCallback(),this._observer=new MutationObserver(()=>this._syncTabs()),this._observer.observe(this,{childList:!0,subtree:!1,attributes:!0,attributeFilter:["label","disabled"]}),this.addEventListener("click",this._handleClick),this.addEventListener("keydown",this._handleKeyDown),queueMicrotask(()=>this._syncTabs())}disconnectedCallback(){super.disconnectedCallback(),this._observer?.disconnect(),this.removeEventListener("click",this._handleClick),this.removeEventListener("keydown",this._handleKeyDown)}_update(){this._applyStyles(),super._update(),this._syncTabs()}get tabs(){return[...this.querySelectorAll(":scope > ui-tab")]}select(e){let t=this.tabs;e<0||e>=t.length||t[e]?.disabled||(this.selected=e)}_applyStyles(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}_syncTabs(){let e=this.tabs,t=this.shadowRoot?.querySelector(".tablist");if(!t)return;let i=this.placement==="start"||this.placement==="end";t.setAttribute("aria-orientation",i?"vertical":"horizontal");let r=Math.max(0,Math.min(this.selected,e.length-1));t.innerHTML="",e.forEach((o,a)=>{let l=document.createElement("button");l.className="tab",l.setAttribute("role","tab"),l.setAttribute("aria-selected",a===r?"true":"false"),l.setAttribute("tabindex",a===r?"0":"-1"),l.dataset.index=a,l.textContent=o.label||`Tab ${a+1}`,o.disabled&&(l.setAttribute("aria-disabled","true"),l.setAttribute("tabindex","-1")),t.appendChild(l)}),e.forEach((o,a)=>{a===r?(o.setAttribute("active",""),o.setAttribute("role","tabpanel")):(o.removeAttribute("active"),o.setAttribute("role","tabpanel"))})}_handleClick(e){let t=e.composedPath().find(r=>r instanceof HTMLElement&&r.classList?.contains("tab"));if(!t||t.getAttribute("aria-disabled")==="true")return;let i=Number(t.dataset.index);i!==this.selected&&(this.selected=i,this.emit("ui-tab-change",{index:i}))}_handleKeyDown(e){let t=this.shadowRoot?.querySelector(".tablist");if(!t)return;let i=[...t.querySelectorAll('.tab:not([aria-disabled="true"])')];if(!i.length)return;let r=e.composedPath().find(a=>a instanceof HTMLElement&&a.classList?.contains("tab"));if(!r)return;let o=null;switch(e.key){case"ArrowRight":case"ArrowDown":{e.preventDefault();let a=i.indexOf(r);o=i[(a+1)%i.length];break}case"ArrowLeft":case"ArrowUp":{e.preventDefault();let a=i.indexOf(r);o=i[(a-1+i.length)%i.length];break}case"Home":e.preventDefault(),o=i[0];break;case"End":e.preventDefault(),o=i[i.length-1];break;default:return}if(o){o.focus();let a=Number(o.dataset.index);a!==this.selected&&(this.selected=a,this.emit("ui-tab-change",{index:a}))}}render(){return`
      <div class="tablist" role="tablist"></div>
      <div class="panels">
        <slot></slot>
      </div>
    `}};customElements.define("ui-tabs",Ve);var Ne=class extends c{static properties={label:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},active:{type:Boolean,default:!1,reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: block;
        padding: 1em;
        background: var(--_bg, transparent);
        color: var(--_color, inherit);
        line-height: 1.5;
        box-sizing: border-box;
      }
    `}connectedCallback(){super.connectedCallback(),this.setAttribute("role","tabpanel")}_update(){this._applyStyles(),super._update()}_applyStyles(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color)),this._setDynamicVars(e)}render(){return"<slot></slot>"}};customElements.define("ui-tab",Ne);var Ue=class s extends c{static properties={type:{type:String,default:"",reflect:!0},block:{type:Boolean,default:!1,reflect:!0},display:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},weight:{type:String,default:"",reflect:!0},bold:{type:Boolean,default:!1,reflect:!0},align:{type:String,default:"",reflect:!0},transform:{type:String,default:"",reflect:!0},leading:{type:String,default:"",reflect:!0},spacing:{type:String,default:"",reflect:!0},wrap:{type:String,default:"",reflect:!0},indent:{type:String,default:"",reflect:!0},margin:{type:String,default:"",reflect:!0},padding:{type:String,default:"",reflect:!0},decoration:{type:String,default:"",reflect:!0},muted:{type:Boolean,default:!1,reflect:!0},mono:{type:Boolean,default:!1,reflect:!0},italic:{type:Boolean,default:!1,reflect:!0},underline:{type:Boolean,default:!1,reflect:!0},strike:{type:Boolean,default:!1,reflect:!0},truncate:{type:Boolean,default:!1,reflect:!0},nowrap:{type:Boolean,default:!1,reflect:!0},selectable:{type:Boolean,default:!0,reflect:!0},break:{type:String,default:"",reflect:!0},lines:{type:Number,default:0,reflect:!0},font:{type:String,default:"",reflect:!0}};static _validTypes=new Set(["heading","paragraph"]);static _weights={thin:100,extralight:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900};static _leadings={none:"1",tight:"1.25",snug:"1.375",normal:"1.6",relaxed:"1.75",loose:"2"};static _spacings={tighter:"-0.05em",tight:"-0.025em",normal:"0em",wide:"0.025em",wider:"0.05em",widest:"0.1em"};static _breaks={all:"break-all",words:"break-word",keep:"keep-all"};static styles(){return`
      :host {
        color: var(--_color, inherit);
        font-size: var(--_size, inherit);
        display: var(--_display, inline);
        box-sizing: border-box;
      }

      :host([block]) {
        display: var(--_display, block);
      }

      :host([bold]) {
        font-weight: 700;
      }

      :host([mono]) {
        font-family: var(--ui-font-mono, monospace);
      }

      :host([italic]) {
        font-style: italic;
      }

      :host([underline]) {
        text-decoration: underline;
      }

      :host([strike]) {
        text-decoration: line-through;
      }

      :host([muted]) {
        color: var(--ui-text-muted, #6b7280);
      }

      :host([truncate]) {
        display: var(--_display, block);
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      :host([nowrap]) {
        white-space: nowrap;
      }

      :host([selectable="false"]) {
        -webkit-user-select: none;
        user-select: none;
      }

      :host([lines]) {
        display: var(--_display, -webkit-box);
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      :host([type]) {
        display: var(--_display, block);
      }

      h2, p {
        all: inherit;
        display: block;
        margin: 0;
        padding: 0;
      }

      slot {
        display: contents;
      }
    `}render(){let e=this.type?.toLowerCase();return e==="heading"?"<h2><slot></slot></h2>":e==="paragraph"?"<p><slot></slot></p>":"<slot></slot>"}connectedCallback(){super.connectedCallback(),this._applyStyles()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyStyles()}_applyStyles(){let e={},t=this.type?.toLowerCase(),i=t==="heading";if(this.display&&(e["--_display"]=this.display),this.size){let r=d(this.size);r&&(e["--_size"]=r)}else i&&(e["--_size"]="1.5em");if(this.color&&(e["--_color"]=n(this.color)),this.weight){let r=s._weights[this.weight.toLowerCase()]||this.weight;e["font-weight"]=String(r)}else i&&!this.bold&&(e["font-weight"]="700");if(this.align&&(e["text-align"]=this.align),this.transform&&(e["text-transform"]=this.transform),this.leading){let r=s._leadings[this.leading]||this.leading;e["line-height"]=r}if(this.spacing){let r=s._spacings[this.spacing]||this.spacing;e["letter-spacing"]=r}if(this.wrap&&(e["text-wrap"]=this.wrap),this.indent&&(e["text-indent"]=this.indent),this.margin?e.margin=this.margin:t==="paragraph"?e.margin="0 0 1em":i&&(e.margin="0 0 0.5em"),this.padding&&(e.padding=this.padding),this.decoration&&(e["text-decoration"]=this.decoration),this.break){let r=s._breaks[this.break]||this.break;e["word-break"]=r,this.break==="words"&&(e["overflow-wrap"]="break-word")}this.lines>0&&(e["-webkit-line-clamp"]=String(Math.floor(this.lines))),this.font&&(e["font-family"]=this.font),this._setDynamicVars(e)}};customElements.define("ui-text",Ue);var Ke=class s extends c{static properties={background:{type:String,default:"gray-800",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},elevation:{type:String,default:"",reflect:!0},duration:{type:Number,default:4e3,reflect:!0},position:{type:String,default:"bottom-right",reflect:!0},dismissible:{type:Boolean,default:!0,reflect:!0}};static _positions=new Set(["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"]);static _containers=new Map;static show(e,t={}){let i=document.createElement("ui-toast");return t.background!==void 0&&i.setAttribute("background",t.background),t.color!==void 0&&i.setAttribute("color",t.color),t.size!==void 0&&i.setAttribute("size",t.size),t.duration!==void 0&&i.setAttribute("duration",String(t.duration)),t.position!==void 0&&i.setAttribute("position",t.position),t.dismissible===!1&&i.removeAttribute("dismissible"),i.textContent=e,document.body.appendChild(i),i}static _getContainer(e){let t=s._positions.has(e)?e:"bottom-right";if(s._containers.has(t))return s._containers.get(t);let i=document.createElement("div");i.className="ui-toast-container",i.dataset.position=t,i.setAttribute("role","log"),i.setAttribute("aria-live","polite");let r=t.startsWith("bottom"),o=t.includes("center"),a=t.includes("left");return Object.assign(i.style,{position:"fixed",zIndex:"10000",display:"flex",flexDirection:r?"column-reverse":"column",gap:"0.5em",padding:"1em",pointerEvents:"none",maxHeight:"100vh",overflowY:"auto",boxSizing:"border-box",top:r?"auto":"0",bottom:r?"0":"auto",left:o?"50%":a?"0":"auto",right:o||a?"auto":"0",transform:o?"translateX(-50%)":"none"}),document.body.appendChild(i),s._containers.set(t,i),i}static _cleanupContainer(e){let t=s._containers.get(e);t&&t.children.length===0&&(t.remove(),s._containers.delete(e))}static styles(){return`
      :host {
        display: flex;
        align-items: center;
        gap: 0.75em;
        min-width: 16em;
        max-width: 24em;
        padding: 0.85em 1.15em;
        border-radius: var(--ui-radius, 0.25em);
        background: var(--_bg, inherit);
        color: var(--_fg, inherit);
        line-height: 1.4;
        box-sizing: border-box;
        pointer-events: auto;
        box-shadow: var(--_elevation, 0 4px 6px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.06));
      }

      slot {
        display: block;
        flex: 1;
      }

      /* Dismiss button */
      button {
        display: none;
        flex-shrink: 0;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1em;
        line-height: 1;
        width: 1.6em;
        height: 1.6em;
        padding: 0;
        border-radius: 50%;
        color: var(--_fg, inherit);
        opacity: 0.6;
        transition: opacity 0.15s ease, background 0.15s ease;
      }

      button:hover {
        opacity: 1;
        background: rgba(255, 255, 255, 0.15);
      }

      button:active {
        background: rgba(255, 255, 255, 0.25);
      }

      button:focus-visible {
        opacity: 1;
        background: rgba(255, 255, 255, 0.15);
        outline: 2px solid var(--ui-focus-ring, #3b82f6);
        outline-offset: 1px;
      }

      :host([dismissible]) button {
        display: flex;
        align-items: center;
        justify-content: center;
      }
    `}render(){return'<slot></slot><button part="dismiss" aria-label="Dismiss">\u2715</button>'}connectedCallback(){if(super.connectedCallback(),this.setAttribute("role","status"),!this.parentElement?.classList.contains("ui-toast-container")){this._movedToContainer=!1,s._getContainer(this.position).appendChild(this);return}this._movedToContainer=!0,this._onMouseEnter=()=>this._pauseTimer(),this._onMouseLeave=()=>this._resumeTimer(),this.addEventListener("mouseenter",this._onMouseEnter),this.addEventListener("mouseleave",this._onMouseLeave),this._startTimer();let e=this.position.startsWith("top")?"-0.75em":"0.75em";this.animate?.([{opacity:0,transform:`translateY(${e})`},{opacity:1,transform:"translateY(0)"}],{duration:200,easing:"ease-out",fill:"forwards"})}disconnectedCallback(){super.disconnectedCallback(),this._clearTimer(),this.removeEventListener("mouseenter",this._onMouseEnter),this.removeEventListener("mouseleave",this._onMouseLeave)}_update(){super._update(),this._attachListeners(),this._applyStyles()}_attachListeners(){let e=this.shadowRoot.querySelector("button");e&&e.addEventListener("click",()=>this.dismiss())}dismiss(){this._clearTimer();let e=this.position,t=e.startsWith("top")?"-0.75em":"0.75em";if(this.animate){let i=this.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:`translateY(${t})`}],{duration:150,easing:"ease-in",fill:"forwards"});i.onfinish=()=>this._finishDismiss(e)}else this._finishDismiss(e)}_finishDismiss(e){this.emit("ui-dismiss"),this.remove(),s._cleanupContainer(e)}_startTimer(){this.duration<=0||(this._remaining=this.duration,this._timerStart=Date.now(),this._timer=setTimeout(()=>this.dismiss(),this._remaining))}_pauseTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null,this._remaining-=Date.now()-this._timerStart,this._remaining<0&&(this._remaining=0))}_resumeTimer(){this.duration<=0||!this._remaining||this._remaining<=0||(this._timerStart=Date.now(),this._timer=setTimeout(()=>this.dismiss(),this._remaining))}_clearTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}_applyStyles(){let e={},t=n(this.background||"gray-800");e["--_bg"]=t,this.color?e["--_fg"]=n(this.color):e["--_fg"]=p(this.background||"gray-800");let i=d(this.size);i&&(e["font-size"]=i);let r=b(this.elevation);r&&(e["--_elevation"]=r),this._setDynamicVars(e)}};customElements.define("ui-toast",Ke);var Ye=class s extends c{static properties={content:{type:String,default:"",reflect:!0},placement:{type:String,default:"top",reflect:!0},delay:{type:Number,default:200,reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},maxWidth:{type:String,default:"",reflect:!0,attribute:"max-width"},disabled:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: inline-block;
        position: relative;
      }
    `}static _ensureGlobalStyles(){if(s._stylesInjected)return;let e=document.createElement("style");e.textContent=`
      .ui-tooltip-popup {
        position: fixed;
        z-index: 10000;
        padding: 0.4em 0.65em;
        border-radius: var(--ui-radius, 0.375em);
        background: #1f2937;
        color: #fff;
        font-size: 0.8em;
        line-height: 1.4;
        max-width: 250px;
        width: max-content;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.15s ease;
        white-space: normal;
        word-wrap: break-word;
        box-sizing: border-box;
        text-align: center;
        top: 0;
        left: 0;
        font-family: inherit;
      }
      .ui-tooltip-popup.show {
        opacity: 1;
      }
    `,document.head.appendChild(e),s._stylesInjected=!0}constructor(){super(),this._showTip=this._showTip.bind(this),this._hideTip=this._hideTip.bind(this),this._timer=null}render(){return"<slot></slot>"}_esc(e){return String(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}connectedCallback(){super.connectedCallback(),s._ensureGlobalStyles(),this.addEventListener("mouseenter",this._showTip),this.addEventListener("mouseleave",this._hideTip),this.addEventListener("focusin",this._showTip),this.addEventListener("focusout",this._hideTip)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("mouseenter",this._showTip),this.removeEventListener("mouseleave",this._hideTip),this.removeEventListener("focusin",this._showTip),this.removeEventListener("focusout",this._hideTip),clearTimeout(this._timer),this._removePopup()}_update(){super._update(),this._applyStyles()}_getPopup(){return this._popup||(this._popup=document.createElement("div"),this._popup.className="ui-tooltip-popup",this._popup.setAttribute("role","tooltip")),this._popup}_removePopup(){this._popup&&(this._popup.remove(),this._popup=null)}_showTip(){this.disabled||!this.content||(clearTimeout(this._timer),this._timer=setTimeout(()=>{let e=this._getPopup();if(e.textContent=this.content,this.background&&(e.style.background=n(this.background)||this.background),this.color&&(e.style.color=n(this.color)||this.color),this.size){let t=d(this.size);t&&(e.style.fontSize=t)}this.maxWidth&&(e.style.maxWidth=this.maxWidth),e.parentNode||document.body.appendChild(e),this._positionTip(e),e.classList.add("show")},this.delay))}_positionTip(e){let a=((this.shadowRoot?.querySelector("slot")?.assignedElements?.()??[])[0]||this).getBoundingClientRect(),l=e.getBoundingClientRect(),h=this.placement||"top",u,f;switch(h){case"bottom":u=a.bottom+8,f=a.left+a.width/2-l.width/2;break;case"left":u=a.top+a.height/2-l.height/2,f=a.left-l.width-8;break;case"right":u=a.top+a.height/2-l.height/2,f=a.right+8;break;default:u=a.top-l.height-8,f=a.left+a.width/2-l.width/2;break}let m=window.innerWidth,v=window.innerHeight;f<4&&(f=4),f+l.width>m-4&&(f=m-4-l.width),u<4&&(u=4),u+l.height>v-4&&(u=v-4-l.height),e.style.top=`${u}px`,e.style.left=`${f}px`}_hideTip(){clearTimeout(this._timer),this._popup&&(this._popup.classList.remove("show"),setTimeout(()=>{this._popup&&!this._popup.classList.contains("show")&&this._popup.remove()},200))}_applyStyles(){}};customElements.define("ui-tooltip",Ye);var We=class extends c{static properties={size:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},multiselect:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.5;
      }
    `}constructor(){super(),this._onItemSelect=this._onItemSelect.bind(this)}connectedCallback(){super.connectedCallback(),this.setAttribute("role","tree"),this.addEventListener("ui-select",this._onItemSelect),this._ensureTabIndex(),this._observeSlot()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("ui-select",this._onItemSelect),this._slotObserver&&(this._slotObserver.disconnect(),this._slotObserver=null)}render(){return"<slot></slot>"}_onItemSelect(e){let t=e.detail?.item;if(t&&!this.multiselect)for(let i of this.querySelectorAll("ui-tree-item[selected]"))i!==t&&i.deselect()}get selectedItems(){return[...this.querySelectorAll("ui-tree-item[selected]")]}get selectedValues(){return this.selectedItems.map(e=>e.value)}_ensureTabIndex(){let e=this.querySelector(":scope > ui-tree-item:not([disabled])");e&&e.getAttribute("tabindex")==="-1"&&e.setAttribute("tabindex","0")}_observeSlot(){this._slotObserver=new MutationObserver(()=>this._ensureTabIndex()),this._slotObserver.observe(this,{childList:!0})}_applyStyles(){let e={},t=d(this.size);if(t&&(e["font-size"]=t),this.color){let i=n(this.color);i&&(e.color=i)}if(this.background){let i=n(this.background);if(i){let r=C(this.background)||i;e["--_tree-select-bg"]=i,e["--_tree-select-bg-hover"]=r}}this._setDynamicVars(e)}_update(){this._applyStyles(),super._update()}expandAll(){for(let e of this.querySelectorAll("ui-tree-item[data-has-children]"))e.expand()}collapseAll(){for(let e of this.querySelectorAll("ui-tree-item[data-has-children]"))e.collapse()}deselectAll(){for(let e of this.querySelectorAll("ui-tree-item[selected]"))e.deselect()}};customElements.define("ui-tree",We);var Ge=class extends c{static properties={value:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},expanded:{type:Boolean,default:!1,reflect:!0},selected:{type:Boolean,default:!1,reflect:!0},href:{type:String,default:"",reflect:!0},target:{type:String,default:"",reflect:!0},channel:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: block;
        user-select: none;
        font-size: var(--_size, inherit);
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.45;
      }

      /* ---- Clickable row ---- */
      .row {
        all: unset;
        display: flex;
        align-items: center;
        gap: 0.35em;
        width: 100%;
        box-sizing: border-box;
        padding: 0.25em 0.5em;
        cursor: pointer;
        font-family: inherit;
        font-size: inherit;
        line-height: 1.5;
        color: var(--_color, var(--ui-text-color, inherit));
        background: var(--_bg, transparent);
        text-decoration: none;
        border-radius: var(--ui-radius, 0.25em);
        transition: background-color 0.12s ease;
      }

      .row:hover {
        background: var(--_bg-hover, var(--ui-bg-subtle, rgba(0, 0, 0, 0.06)));
      }

      :host([selected]) .row {
        background: var(--_select-bg, var(--ui-indigo-100, rgba(99, 102, 241, 0.12)));
        color: var(--_select-color, var(--ui-indigo-700, #4338ca));
      }

      :host([selected]) .row:hover {
        background: var(--_select-bg-hover, var(--ui-indigo-200, rgba(99, 102, 241, 0.2)));
      }

      .row:focus-visible {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: -0.125em;
      }

      /* ---- Expand/collapse caret ---- */
      .caret {
        display: none;
        flex-shrink: 0;
        width: 1em;
        height: 1em;
        align-items: center;
        justify-content: center;
        font-size: 0.75em;
        transition: transform 0.15s ease;
      }

      .caret svg {
        width: 1em;
        height: 1em;
        fill: currentColor;
        opacity: 0.55;
      }

      :host([data-has-children]) .caret {
        display: inline-flex;
      }

      :host([expanded]) .caret {
        transform: rotate(90deg);
      }

      /* Spacer for leaf items to align with parent items */
      .spacer {
        display: inline-flex;
        width: 1em;
        flex-shrink: 0;
        font-size: 0.75em;
      }

      :host([data-has-children]) .spacer {
        display: none;
      }

      /* ---- Children group ---- */
      .children {
        display: none;
        flex-direction: column;
        padding-left: 1.25em;
      }

      :host([expanded]) .children {
        display: flex;
      }
    `}constructor(){super(),this._onClick=this._onClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._childObserver=null}connectedCallback(){super.connectedCallback(),this.setAttribute("role","treeitem"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),requestAnimationFrame(()=>this._applySelectedColors()),this.addEventListener("click",this._onClick),this.addEventListener("keydown",this._onKeyDown),this._assignSlots(),this._observeChildren()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this._onClick),this.removeEventListener("keydown",this._onKeyDown),this._childObserver&&(this._childObserver.disconnect(),this._childObserver=null)}render(){return`
      <div class="row"${this.disabled?' aria-disabled="true"':""} part="row">
        <span class="caret" aria-hidden="true">
          <svg viewBox="0 0 16 16"><path d="M6 3l5 5-5 5z"/></svg>
        </span>
        <span class="spacer"></span>
        <slot></slot>
      </div>
      <div class="children" role="group" part="children">
        <slot name="children"></slot>
      </div>
    `}_assignSlots(){let e=!1;for(let t of this.children)t.tagName==="UI-TREE-ITEM"&&(t.getAttribute("slot")!=="children"&&t.setAttribute("slot","children"),e=!0);e?this.hasAttribute("data-has-children")||(this.setAttribute("data-has-children",""),this.setAttribute("aria-expanded",this.expanded?"true":"false")):(this.removeAttribute("data-has-children"),this.removeAttribute("aria-expanded"))}_observeChildren(){this._childObserver=new MutationObserver(()=>this._assignSlots()),this._childObserver.observe(this,{childList:!0})}_update(){this._applyStyles(),super._update()}_applyStyles(){this._vars={};let e=this.background,t=this.color,i=this.size;e&&(this._vars["--_bg"]=n(e),this._vars["--_bg-hover"]=C(e)),t&&(this._vars["--_color"]=n(t)),i&&(this._vars["--_size"]=d(i)),this._setDynamicVars(this._vars)}_applySelectedColors(){let e=getComputedStyle(this).getPropertyValue("--ui-background-token").trim();if(!e)return;if(!this.background){let o=T(e,1);o&&(this._vars["--_bg-hover"]=o)}let t=T(e,4),i=T(e,3),r=xt(e,4);t&&(this._vars["--_select-bg"]=t),i&&(this._vars["--_select-bg-hover"]=i),r&&(this._vars["--_select-color"]=r),this._setDynamicVars(this._vars)}get _hasChildren(){return this.hasAttribute("data-has-children")}expand(){!this._hasChildren||this.expanded||(this.expanded=!0,this.setAttribute("aria-expanded","true"),this.emit("ui-expand"))}collapse(){!this._hasChildren||!this.expanded||(this.expanded=!1,this.setAttribute("aria-expanded","false"),this.emit("ui-collapse"))}toggle(){this.expanded?this.collapse():this.expand()}select(){this.disabled||(this.selected=!0,this.emit("ui-select",{value:this.value,item:this}))}deselect(){this.selected=!1}_onClick(e){if(this.disabled){e.preventDefault();return}let t=e.target.closest("ui-tree-item");if(!(t&&t!==this)&&(e.stopPropagation(),this._hasChildren&&this.toggle(),this.select(),this.href))if(this.channel)document.dispatchEvent(new CustomEvent(this.channel,{bubbles:!1,detail:{src:this.href,item:this}}));else{let i=new CustomEvent("ui-navigate",{bubbles:!0,composed:!0,cancelable:!0,detail:{href:this.href,target:this.target,item:this}});this.dispatchEvent(i)&&(this.target?window.open(this.href,this.target):window.location.href=this.href)}}_onKeyDown(e){let t=e.target.closest("ui-tree-item");if(!(t&&t!==this))switch(e.key){case"ArrowRight":if(e.preventDefault(),e.stopPropagation(),this._hasChildren&&!this.expanded)this.expand();else if(this._hasChildren&&this.expanded){let i=this.querySelector(":scope > ui-tree-item:not([disabled])");i&&i.focus()}break;case"ArrowLeft":if(e.preventDefault(),e.stopPropagation(),this._hasChildren&&this.expanded)this.collapse();else{let i=this.parentElement?.closest("ui-tree-item");i&&i.focus()}break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),this._focusNext();break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),this._focusPrev();break;case"Enter":case" ":if(e.preventDefault(),e.stopPropagation(),this._hasChildren&&this.toggle(),this.select(),this.href)if(this.channel)document.dispatchEvent(new CustomEvent(this.channel,{bubbles:!1,detail:{src:this.href,item:this}}));else{let i=new CustomEvent("ui-navigate",{bubbles:!0,composed:!0,cancelable:!0,detail:{href:this.href,target:this.target,item:this}});this.dispatchEvent(i)&&(this.target?window.open(this.href,this.target):window.location.href=this.href)}break;case"Home":e.preventDefault(),e.stopPropagation(),this._focusFirst();break;case"End":e.preventDefault(),e.stopPropagation(),this._focusLast();break}}_getVisibleItems(){let e=this.closest("ui-tree");return e?[...e.querySelectorAll("ui-tree-item:not([disabled])")].filter(t=>{let i=t.parentElement?.closest("ui-tree-item");for(;i;){if(!i.expanded)return!1;i=i.parentElement?.closest("ui-tree-item")}return!0}):[]}_focusNext(){let e=this._getVisibleItems(),t=e.indexOf(this);t>=0&&t<e.length-1&&e[t+1].focus()}_focusPrev(){let e=this._getVisibleItems(),t=e.indexOf(this);t>0&&e[t-1].focus()}_focusFirst(){let e=this._getVisibleItems();e.length&&e[0].focus()}_focusLast(){let e=this._getVisibleItems();e.length&&e[e.length-1].focus()}};customElements.define("ui-tree-item",Ge);var Xe=class extends c{static properties={total:{type:Number,default:1,reflect:!0},current:{type:Number,default:1,reflect:!0},siblings:{type:Number,default:1,reflect:!0},background:{type:String,default:"indigo-500",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},compact:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: inline-flex;
        align-items: center;
        gap: 0.25em;
        font-family: inherit;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.5;
      }

      button {
        all: unset;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 2em;
        height: 2em;
        padding: 0 0.35em;
        border-radius: var(--ui-button-radius, 0.375em);
        cursor: pointer;
        font-family: inherit;
        font-size: inherit;
        font-weight: 500;
        line-height: 1;
        user-select: none;
        box-sizing: border-box;
        transition: background 0.15s ease, color 0.15s ease;
        color: var(--ui-text-color, #1f2937);
      }

      button:hover:not(.active):not(:disabled) {
        background: var(--ui-bg-subtle, rgba(0,0,0,0.06));
      }

      button:focus-visible {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: 0.125em;
      }

      button.active {
        background: var(--_active-bg, var(--ui-indigo-500, #6366f1));
        color: var(--_active-color, #fff);
        font-weight: 600;
      }

      button:disabled {
        opacity: 0.35;
        cursor: default;
      }

      .arrow svg {
        width: 1em;
        height: 1em;
        fill: none;
        stroke: currentColor;
        stroke-width: 2.5;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .ellipsis {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 2em;
        height: 2em;
        font-size: inherit;
        color: var(--ui-text-muted, #6b7280);
        pointer-events: none;
        user-select: none;
      }

      .compact-label {
        display: inline-flex;
        align-items: center;
        height: 2em;
        padding: 0 0.5em;
        font-size: inherit;
        color: var(--ui-text-color, #1f2937);
        user-select: none;
      }
    `}constructor(){super(),this._onPageClick=this._onPageClick.bind(this)}connectedCallback(){super.connectedCallback(),this.shadowRoot?.addEventListener("click",this._onPageClick)}disconnectedCallback(){super.disconnectedCallback(),this.shadowRoot?.removeEventListener("click",this._onPageClick)}_update(){this._applyStyles(),super._update()}_applyStyles(){let e={};this.background&&(e["--_active-bg"]=n(this.background),e["--_active-color"]=this.color?n(this.color):p(this.background));let t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}_onPageClick(e){let t=e.target.closest("button");if(!t||t.disabled||t.classList.contains("active"))return;let i=Number(t.dataset.page);!i||i===this.current||(this.current=i,this.emit("ui-change",{page:i}))}_getRange(){let e=Math.max(1,this.total),t=Math.max(1,Math.min(this.current,e)),i=Math.max(0,this.siblings),r=[],o=Math.max(2,t-i),a=Math.min(e-1,t+i);r.push(1),o>2&&r.push("\u2026");for(let l=o;l<=a;l++)r.push(l);return a<e-1&&r.push("\u2026"),e>1&&r.push(e),r}render(){let e=Math.max(1,this.total),t=Math.max(1,Math.min(this.current,e)),i='<svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>',r='<svg viewBox="0 0 24 24"><polyline points="9 6 15 12 9 18"/></svg>';if(this.compact)return`
        <button class="arrow" data-page="${t-1}" ${t<=1?"disabled":""} aria-label="Previous page">${i}</button>
        <span class="compact-label">${t} / ${e}</span>
        <button class="arrow" data-page="${t+1}" ${t>=e?"disabled":""} aria-label="Next page">${r}</button>
      `;let a=this._getRange().map(l=>l==="\u2026"?'<span class="ellipsis">\u2026</span>':`<button data-page="${l}"${l===t?' class="active" aria-current="page"':""}>${l}</button>`).join("");return`
      <button class="arrow" data-page="${t-1}" ${t<=1?"disabled":""} aria-label="Previous page">${i}</button>
      ${a}
      <button class="arrow" data-page="${t+1}" ${t>=e?"disabled":""} aria-label="Next page">${r}</button>
    `}};customElements.define("ui-pagination",Xe);var Je=class extends c{static properties={target:{type:String,default:"",reflect:!0},elevation:{type:String,default:"3",reflect:!0},size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},open:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: contents;
      }

      .menu {
        position: fixed;
        z-index: 10000;
        min-width: 10em;
        padding: 0.35em 0;
        border-radius: var(--ui-radius, 0.5em);
        border: 1px solid var(--ui-border-color, #e5e7eb);
        background: var(--_bg, var(--ui-bg, #fff));
        color: var(--_color, var(--ui-text-color, #1f2937));
        box-shadow: var(--_elevation, 0 10px 15px rgba(0,0,0,0.1), 0 4px 6px rgba(0,0,0,0.05));
        opacity: 0;
        transform: scale(0.95);
        transition: opacity 0.12s ease, transform 0.12s ease;
        pointer-events: none;
        font-family: inherit;
      }

      .menu.visible {
        opacity: 1;
        transform: scale(1);
        pointer-events: auto;
      }
    `}constructor(){super(),this._x=0,this._y=0,this._onContextMenu=this._onContextMenu.bind(this),this._onDocClick=this._onDocClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onItemClick=this._onItemClick.bind(this)}connectedCallback(){super.connectedCallback(),this._attachTarget(),this.addEventListener("click",this._onItemClick)}disconnectedCallback(){this._detachTarget(),this.removeEventListener("click",this._onItemClick),document.removeEventListener("click",this._onDocClick,!0),document.removeEventListener("keydown",this._onKeyDown),super.disconnectedCallback()}_applyStyles(){let e={};this.background&&(e["--_bg"]=n(this.background)),this.color&&(e["--_color"]=n(this.color));let t=b(this.elevation);t&&(e["--_elevation"]=t);let i=d(this.size);i&&(e["font-size"]=i),this._setDynamicVars(e)}_update(){this._applyStyles(),this._detachTarget(),this._attachTarget(),super._update()}_attachTarget(){if(!this.target)return;let e=document.querySelector(this.target);e&&(this._targetEl=e,e.addEventListener("contextmenu",this._onContextMenu))}_detachTarget(){this._targetEl&&(this._targetEl.removeEventListener("contextmenu",this._onContextMenu),this._targetEl=null)}_onContextMenu(e){e.preventDefault(),this.show(e.clientX,e.clientY)}_onDocClick(e){let t=this.shadowRoot?.querySelector(".menu");t&&!t.contains(e.target)&&!this.contains(e.target)&&this.hide()}_onKeyDown(e){e.key==="Escape"&&this.hide()}_onItemClick(e){let t=e.target.closest("ui-menu-item");t&&!t.hasAttribute("disabled")&&(this.emit("ui-select",{value:t.getAttribute("value")||"",item:t}),this.hide())}show(e=0,t=0){this._x=e,this._y=t;let i=this.shadowRoot?.querySelector(".menu");i&&(i.style.left=`${e}px`,i.style.top=`${t}px`,i.classList.add("visible"),requestAnimationFrame(()=>{let r=i.getBoundingClientRect();r.right>window.innerWidth&&(i.style.left=`${window.innerWidth-r.width-4}px`),r.bottom>window.innerHeight&&(i.style.top=`${window.innerHeight-r.height-4}px`)}),this.open||(this.open=!0),document.addEventListener("click",this._onDocClick,!0),document.addEventListener("keydown",this._onKeyDown),this.emit("ui-open"))}hide(){let e=this.shadowRoot?.querySelector(".menu");e&&e.classList.remove("visible"),this.hasAttribute("open")&&this.removeAttribute("open"),document.removeEventListener("click",this._onDocClick,!0),document.removeEventListener("keydown",this._onKeyDown),this.emit("ui-close")}render(){return`
      <div class="menu" role="menu">
        <slot></slot>
      </div>
    `}},Ze=class extends c{static properties={value:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},divider:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.45;
      }

      .item {
        display: flex;
        align-items: center;
        gap: 0.6em;
        padding: 0.45em 1em;
        cursor: pointer;
        font-family: inherit;
        font-size: inherit;
        line-height: 1.4;
        white-space: nowrap;
        transition: background 0.1s ease;
        user-select: none;
      }

      .item:hover {
        background: var(--ui-bg-subtle, rgba(0,0,0,0.06));
      }

      :host([divider]) .item {
        padding: 0;
        margin: 0.25em 0;
        height: 1px;
        background: var(--ui-border-color, #e5e7eb);
        cursor: default;
      }

      :host([divider]) .item:hover {
        background: var(--ui-border-color, #e5e7eb);
      }
    `}render(){return'<div class="item" role="menuitem"><slot></slot></div>'}};customElements.define("ui-menu",Je);customElements.define("ui-menu-item",Ze);var Qe=class extends c{static properties={placement:{type:String,default:"bottom",reflect:!0},trigger:{type:String,default:"click",reflect:!0},elevation:{type:String,default:"3",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},width:{type:String,default:"",reflect:!0},padding:{type:String,default:"",reflect:!0},open:{type:Boolean,default:!1,reflect:!0},arrow:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: inline-block;
        position: relative;
      }

      .trigger-wrap {
        display: inline-block;
        cursor: pointer;
      }

      .panel {
        position: absolute;
        z-index: 9999;
        min-width: 8em;
        padding: var(--_padding, 0.75em 1em);
        border-radius: var(--ui-radius, 0.5em);
        border: 1px solid var(--ui-border-color, #e5e7eb);
        background: var(--_bg, var(--ui-bg, #fff));
        color: var(--_color, var(--ui-text-color, #1f2937));
        box-shadow: var(--_elevation, 0 10px 15px rgba(0,0,0,0.1));
        font-family: inherit;
        font-size: inherit;
        line-height: 1.5;
        opacity: 0;
        transform: scale(0.95);
        pointer-events: none;
        transition: opacity 0.15s ease, transform 0.15s ease;
        box-sizing: border-box;
      }

      .panel.visible {
        opacity: 1;
        transform: scale(1);
        pointer-events: auto;
      }

      /* \u2500\u2500 Placement \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      :host([placement="bottom"]) .panel { top: 100%; left: 50%; transform-origin: top center; margin-top: 0.5em; }
      :host([placement="bottom"]) .panel.visible { transform: translateX(-50%) scale(1); }
      :host([placement="bottom"]) .panel:not(.visible) { transform: translateX(-50%) scale(0.95); }

      :host([placement="top"]) .panel { bottom: 100%; left: 50%; transform-origin: bottom center; margin-bottom: 0.5em; }
      :host([placement="top"]) .panel.visible { transform: translateX(-50%) scale(1); }
      :host([placement="top"]) .panel:not(.visible) { transform: translateX(-50%) scale(0.95); }

      :host([placement="left"]) .panel { right: 100%; top: 50%; transform-origin: center right; margin-right: 0.5em; }
      :host([placement="left"]) .panel.visible { transform: translateY(-50%) scale(1); }
      :host([placement="left"]) .panel:not(.visible) { transform: translateY(-50%) scale(0.95); }

      :host([placement="right"]) .panel { left: 100%; top: 50%; transform-origin: center left; margin-left: 0.5em; }
      :host([placement="right"]) .panel.visible { transform: translateY(-50%) scale(1); }
      :host([placement="right"]) .panel:not(.visible) { transform: translateY(-50%) scale(0.95); }

      /* \u2500\u2500 Arrow \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .arrow-tip {
        display: none;
        position: absolute;
        width: 0.6em;
        height: 0.6em;
        background: var(--_bg, var(--ui-bg, #fff));
        border: 1px solid var(--ui-border-color, #e5e7eb);
        transform: rotate(45deg);
      }

      :host([arrow]) .arrow-tip { display: block; }

      :host([placement="bottom"][arrow]) .arrow-tip { top: -0.35em; left: 50%; margin-left: -0.3em; border-right: none; border-bottom: none; }
      :host([placement="top"][arrow]) .arrow-tip    { bottom: -0.35em; left: 50%; margin-left: -0.3em; border-left: none; border-top: none; }
      :host([placement="left"][arrow]) .arrow-tip   { right: -0.35em; top: 50%; margin-top: -0.3em; border-left: none; border-bottom: none; }
      :host([placement="right"][arrow]) .arrow-tip  { left: -0.35em; top: 50%; margin-top: -0.3em; border-right: none; border-top: none; }
    `}constructor(){super(),this._onDocClick=this._onDocClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._hoverTimeout=null}connectedCallback(){super.connectedCallback(),this._applyStyles()}disconnectedCallback(){document.removeEventListener("click",this._onDocClick,!0),document.removeEventListener("keydown",this._onKeyDown),clearTimeout(this._hoverTimeout),super.disconnectedCallback()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyStyles()}_applyStyles(){let e={};this._background&&(e["--_bg"]=n(this._background)),this._color&&(e["--_color"]=n(this._color)),this._padding&&(e["--_padding"]=this._padding);let t=b(this._elevation);t&&(e["--_elevation"]=t);let i=d(this._size);i&&(e["font-size"]=i),this._width&&(e["--_width"]=this._width),this._setDynamicVars(e)}_update(){super._update();let e=this.shadowRoot?.querySelector(".panel");e&&this._width&&(e.style.width=this._width);let t=this.shadowRoot?.querySelector(".trigger-wrap");if(t){if(this._trigger==="click")t.addEventListener("click",i=>{i.stopPropagation(),this._open?this.hide():this.show()});else if(this._trigger==="hover"){t.addEventListener("mouseenter",()=>{clearTimeout(this._hoverTimeout),this.show()}),t.addEventListener("mouseleave",()=>{this._hoverTimeout=setTimeout(()=>this.hide(),200)});let i=this.shadowRoot?.querySelector(".panel");i&&(i.addEventListener("mouseenter",()=>clearTimeout(this._hoverTimeout)),i.addEventListener("mouseleave",()=>{this._hoverTimeout=setTimeout(()=>this.hide(),200)}))}this._open&&this.show()}}show(){let e=this.shadowRoot?.querySelector(".panel");e&&(e.classList.add("visible"),this.hasAttribute("open")||this.setAttribute("open",""),document.addEventListener("click",this._onDocClick,!0),document.addEventListener("keydown",this._onKeyDown),this.emit("ui-open"))}hide(){let e=this.shadowRoot?.querySelector(".panel");e&&e.classList.remove("visible"),this.removeAttribute("open"),document.removeEventListener("click",this._onDocClick,!0),document.removeEventListener("keydown",this._onKeyDown),this.emit("ui-close")}_onDocClick(e){!this.contains(e.target)&&!this.shadowRoot?.contains(e.target)&&this.hide()}_onKeyDown(e){e.key==="Escape"&&this.hide()}render(){return`
      <div class="trigger-wrap">
        <slot name="trigger"></slot>
      </div>
      <div class="panel" role="dialog">
        <div class="arrow-tip"></div>
        <slot></slot>
      </div>
    `}};customElements.define("ui-popover",Qe);var et=class extends c{static properties={value:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},feedback:{type:String,default:"Copied!",reflect:!0},duration:{type:Number,default:2e3,reflect:!0},flat:{type:Boolean,default:!1,reflect:!0},outline:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: inline-block;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.5;
      }

      .btn {
        all: unset;
        display: inline-flex;
        align-items: center;
        gap: 0.4em;
        cursor: pointer;
        font-family: inherit;
        font-size: inherit;
        font-weight: 500;
        line-height: 1;
        padding: 0.45em 0.75em;
        border-radius: var(--ui-button-radius, 0.375em);
        background: var(--_bg, var(--ui-bg-subtle, rgba(0,0,0,0.06)));
        color: var(--_color, var(--ui-text-color, #374151));
        border: 1px solid transparent;
        transition: background 0.15s ease, color 0.15s ease, transform 0.1s ease;
        user-select: none;
        white-space: nowrap;
        box-sizing: border-box;
      }

      :host([flat]) .btn {
        background: transparent;
        border-color: transparent;
      }

      :host([outline]) .btn {
        background: transparent;
        border-color: var(--_outline, var(--ui-border-color, #d1d5db));
      }

      .btn:hover {
        filter: brightness(0.95);
      }

      .btn:active {
        transform: scale(0.96);
      }

      .btn:focus-visible {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: 0.125em;
      }

      .icon {
        width: 1.1em;
        height: 1.1em;
        flex-shrink: 0;
      }

      .icon svg {
        display: block;
        width: 100%;
        height: 100%;
        fill: none;
        stroke: currentColor;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .label {
        display: inline-block;
      }

      /* Success state */
      :host([data-copied]) .icon-copy { display: none; }
      :host(:not([data-copied])) .icon-check { display: none; }
      :host([data-copied]) .btn {
        color: var(--ui-green-600, #16a34a);
      }
    `}constructor(){super(),this._timer=null,this._onBtnClick=this._onBtnClick.bind(this)}connectedCallback(){super.connectedCallback(),this._attachListeners()}disconnectedCallback(){clearTimeout(this._timer),this._detachListeners(),super.disconnectedCallback()}_attachListeners(){this._detachListeners();let e=this.shadowRoot?.querySelector(".btn");e&&e.addEventListener("click",this._onBtnClick)}_detachListeners(){let e=this.shadowRoot?.querySelector(".btn");e&&e.removeEventListener("click",this._onBtnClick)}_onBtnClick(){this._copy()}_applyStyles(){let e={};this.background?(e["--_bg"]=n(this.background),e["--_color"]=this.color?n(this.color):p(this.background)):this.color&&(e["--_color"]=n(this.color));let t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}_update(){this._applyStyles(),super._update(),this._attachListeners()}async _copy(){if(!(this.disabled||!this.value))try{await navigator.clipboard.writeText(this.value),this.setAttribute("data-copied",""),this.emit("ui-copy",{value:this.value}),clearTimeout(this._timer),this._timer=setTimeout(()=>{this.removeAttribute("data-copied")},this.duration)}catch(e){console.warn("[ui-clipboard] Copy failed:",e)}}render(){let e='<svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>',t='<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>',i=this.feedback||"Copied!";return`
      <button class="btn" aria-label="Copy to clipboard">
        <span class="icon icon-copy">${e}</span>
        <span class="icon icon-check">${t}</span>
        <span class="label"><slot>${this.hasAttribute("data-copied")?i:""}</slot></span>
      </button>
    `}};customElements.define("ui-clipboard",et);var tt=class extends c{static properties={size:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},separator:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: inline-flex;
        align-items: center;
        gap: 0.3em;
        font-family: var(--ui-font-mono, ui-monospace, SFMono-Regular, Menlo, Monaco, "Cascadia Code", monospace);
        /* font-size is set dynamically on :host via resolveSize(). */
        line-height: 1;
        vertical-align: baseline;
      }

      .key {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 1.6em;
        height: 1.6em;
        padding: 0.1em 0.4em;
        border-radius: 0.25em;
        border: 1px solid var(--_border, var(--ui-border-color, #d1d5db));
        border-bottom-width: 2px;
        background: var(--_bg, var(--ui-bg, #fff));
        color: var(--_color, var(--ui-text-color, #1f2937));
        font-size: inherit;
        font-family: inherit;
        font-weight: 600;
        white-space: nowrap;
        box-shadow: 0 1px 0 rgba(0,0,0,0.08);
        box-sizing: border-box;
      }

      .sep {
        color: var(--ui-text-muted, #9ca3af);
        font-weight: 400;
        font-size: 0.85em;
      }
    `}connectedCallback(){super.connectedCallback(),this._applyStyles(),this.shadowRoot?.querySelector("slot")?.addEventListener("slotchange",()=>this._renderKeys())}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&(this._applyStyles(),e==="separator"&&this._renderKeys())}_applyStyles(){let e={};if(e["font-size"]=d(this._size)||"0.85em",this._background){let t=n(this._background);e["--_bg"]=t,e["--_border"]=t}this._color&&(e["--_color"]=n(this._color)),this._setDynamicVars(e)}_update(){super._update(),queueMicrotask(()=>this._renderKeys())}_renderKeys(){let e=this.shadowRoot?.querySelector("slot");if(!e)return;let t=this._getSlotText(e).trim();if(!t)return;let i=this.shadowRoot?.querySelector(".key-container");if(!i)return;let r=this._separator||"+",o=t.split(/\s*\+\s*/);i.innerHTML=o.map((a,l)=>{let h=l<o.length-1?`<span class="sep">${r.replace(/&/g,"&amp;").replace(/</g,"&lt;")}</span>`:"";return`<span class="key">${a.replace(/&/g,"&amp;").replace(/</g,"&lt;")}</span>${h}`}).join("")}_getSlotText(e){return e.assignedNodes({flatten:!0}).map(t=>t.textContent||"").join("")}render(){return`
      <span class="key-container"></span>
      <slot style="display:none"></slot>
    `}};customElements.define("ui-kbd",tt);var it=class extends c{static properties={size:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},lineColor:{type:String,default:"",reflect:!0,attribute:"line-color"},alternate:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        position: relative;
        font-family: inherit;
      }

      .line {
        position: absolute;
        left: calc(0.55em + 1px);
        top: 0;
        bottom: 1.5em;
        width: 2px;
        transform: translateX(-50%);
        background: var(--_line-color, var(--ui-border-color, #d1d5db));
      }

      :host([alternate]) .line {
        left: 50%;
      }
    `}connectedCallback(){super.connectedCallback(),this._applyStyles(),requestAnimationFrame(()=>this._applyAlternate()),this._childObserver=new MutationObserver(()=>this._applyAlternate()),this._childObserver.observe(this,{childList:!0})}disconnectedCallback(){super.disconnectedCallback?.(),this._childObserver?.disconnect()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&(this._applyStyles(),e==="alternate"&&this._applyAlternate())}_applyStyles(){let e={};this._lineColor?e["--_line-color"]=n(this._lineColor):this._color&&(e["--_line-color"]=n(this._color)),this._color&&(e["--_timeline-color"]=n(this._color));let t=d(this._size);t&&(e["font-size"]=t),this._setDynamicVars(e)}_applyAlternate(){[...this.querySelectorAll(":scope > ui-timeline-item")].forEach((t,i)=>{this._alternate?t.setAttribute("_alt",i%2===0?"left":"right"):t.removeAttribute("_alt")})}render(){return`
      <div class="line"></div>
      <slot></slot>
    `}},rt=class extends c{static properties={color:{type:String,default:"",reflect:!0},icon:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: block;
        position: relative;
        padding-left: 2em;
        padding-bottom: 1.5em;
        font-family: inherit;
        line-height: 1.5;
      }

      :host(:last-child) {
        padding-bottom: 0;
      }

      /* Alternate layout \u2014 attribute set by parent ui-timeline */
      :host([_alt="right"]) {
        margin-left: 50%;
        padding-left: 2em;
        padding-right: 0;
      }

      :host([_alt="left"]) {
        width: 50%;
        text-align: right;
        padding-left: 0;
        padding-right: 2em;
      }

      :host([_alt="left"]) .dot {
        left: auto;
        right: calc(-0.55em - 1px);
        transform: translateX(50%);
      }

      :host([_alt="right"]) .dot {
        left: calc(-0.55em - 1px);
        transform: translateX(-50%);
      }

      .dot {
        position: absolute;
        left: calc(0.55em + 1px);
        transform: translateX(-50%);
        top: 0.35em;
        width: 0.75em;
        height: 0.75em;
        border-radius: 50%;
        background: var(--_dot-color, var(--_timeline-color, var(--ui-indigo-500, #6366f1)));
        border: 2px solid var(--ui-bg, #fff);
        box-sizing: border-box;
        z-index: 1;
      }

      .dot.has-icon {
        width: 1.1em;
        height: 1.1em;
        top: 0.15em;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--_dot-color, var(--_timeline-color, var(--ui-indigo-500, #6366f1)));
        color: #fff;
      }
    `}connectedCallback(){super.connectedCallback(),this._applyStyles()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyStyles()}_applyStyles(){let e={};this._color&&(e["--_dot-color"]=n(this._color)),this._setDynamicVars(e)}render(){let e=r=>(r||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=this._icon?" has-icon":"",i=this._icon?`<ui-icon size="0.65em">${e(this._icon)}</ui-icon>`:"";return`
      <div class="dot${t}">${i}</div>
      <slot></slot>
    `}};customElements.define("ui-timeline",it);customElements.define("ui-timeline-item",rt);var ot=class extends c{static properties={current:{type:Number,default:0,reflect:!0},background:{type:String,default:"indigo-500",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},vertical:{type:Boolean,default:!1,reflect:!0},clickable:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        font-family: inherit;
      }

      .steps {
        display: flex;
        align-items: flex-start;
        gap: 0;
        counter-reset: step;
      }

      :host([vertical]) .steps {
        flex-direction: column;
      }

      ::slotted(ui-step) {
        flex: 1;
      }
    `}connectedCallback(){super.connectedCallback(),this._applyStyles(),this._syncSteps(),this.addEventListener("click",this._onClick.bind(this))}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&(this._applyStyles(),this._syncSteps())}_applyStyles(){let e={},t=d(this._size);t&&(e["font-size"]=t),this._setDynamicVars(e)}_syncSteps(){let e=[...this.querySelectorAll("ui-step")],t=n(this._background)||"var(--ui-indigo-500, #6366f1)",i=this._color?n(this._color):p(this._background);e.forEach((r,o)=>{r._index=o,r._state=o<this._current?"completed":o===this._current?"active":"upcoming",r._activeColor=t,r._activeTextColor=i,r._vertical=this._vertical,r._isLast=o===e.length-1,r._clickable=this._clickable,r._refresh()})}_onClick(e){if(!this._clickable)return;let t=e.target.closest("ui-step");t&&t._state==="completed"&&(this.current=t._index,this.emit("ui-change",{index:t._index}))}_update(){super._update(),queueMicrotask(()=>this._syncSteps())}render(){return`
      <div class="steps" role="list">
        <slot></slot>
      </div>
    `}},st=class extends c{static properties={label:{type:String,default:"",reflect:!0},description:{type:String,default:"",reflect:!0},icon:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: flex;
        align-items: flex-start;
        flex: 1;
        font-family: inherit;
      }

      .step {
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        flex: 1;
      }

      .header {
        display: flex;
        align-items: center;
        width: 100%;
      }

      .connector {
        flex: 1;
        height: 2px;
        background: var(--ui-border-color, #d1d5db);
        transition: background 0.3s ease;
      }

      .connector.completed {
        background: var(--_active-color, var(--ui-indigo-500, #6366f1));
      }

      .connector.hidden {
        visibility: hidden;
      }

      .circle {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 2em;
        height: 2em;
        border-radius: 50%;
        font-weight: 600;
        font-size: 0.85em;
        flex-shrink: 0;
        transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        box-sizing: border-box;
        border: 2px solid var(--ui-border-color, #d1d5db);
        background: var(--ui-bg, #fff);
        color: var(--ui-text-muted, #9ca3af);
      }

      .circle.active {
        border-color: var(--_active-color, var(--ui-indigo-500, #6366f1));
        background: var(--_active-color, var(--ui-indigo-500, #6366f1));
        color: var(--_active-text, #fff);
      }

      .circle.completed {
        border-color: var(--_active-color, var(--ui-indigo-500, #6366f1));
        background: var(--_active-color, var(--ui-indigo-500, #6366f1));
        color: var(--_active-text, #fff);
        cursor: pointer;
      }

      .circle.completed svg {
        width: 1em;
        height: 1em;
        fill: none;
        stroke: currentColor;
        stroke-width: 3;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .content {
        text-align: center;
        margin-top: 0.5em;
        padding: 0 0.25em;
      }

      .label {
        font-weight: 600;
        font-size: 0.85em;
        color: var(--ui-text-color, #1f2937);
      }

      .label.muted {
        color: var(--ui-text-muted, #9ca3af);
      }

      .desc {
        font-size: 0.75em;
        color: var(--ui-text-muted, #6b7280);
        margin-top: 0.15em;
      }

      /* Vertical mode */
      :host([data-vertical]) .step {
        flex-direction: row;
        align-items: flex-start;
      }

      :host([data-vertical]) .header {
        flex-direction: column;
        width: auto;
        align-items: center;
      }

      :host([data-vertical]) .connector {
        width: 2px;
        height: 2em;
        flex: none;
      }

      :host([data-vertical]) .content {
        text-align: left;
        margin-top: 0;
        margin-left: 0.75em;
        padding-bottom: 1.5em;
      }
    `}constructor(){super(),this._index=0,this._state="upcoming",this._activeColor="",this._activeTextColor="",this._vertical=!1,this._isLast=!1,this._clickable=!1}_refresh(){let e={};this._activeColor&&(e["--_active-color"]=this._activeColor),this._activeTextColor&&(e["--_active-text"]=this._activeTextColor),this._setDynamicVars(e),this._vertical?this.setAttribute("data-vertical",""):this.removeAttribute("data-vertical");let t=this.shadowRoot?.querySelector(".circle"),i=this.shadowRoot?.querySelector(".conn-left"),r=this.shadowRoot?.querySelector(".conn-right"),o=this.shadowRoot?.querySelector(".label");t&&(t.className=`circle ${this._state}`,this._state==="completed"?t.innerHTML='<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>':t.textContent=String(this._index+1)),i&&(i.className=`connector${this._index===0?" hidden":""}${this._state!=="upcoming"?" completed":""}`),r&&(r.className=`connector${this._isLast?" hidden":""}${this._state==="completed"?" completed":""}`),o&&(o.className=`label${this._state==="upcoming"?" muted":""}`)}render(){let e=i=>(i||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"),t=this._description?`<div class="desc">${e(this._description)}</div>`:"";return`
      <div class="step">
        <div class="header">
          <div class="connector conn-left hidden"></div>
          <div class="circle">${this._index+1}</div>
          <div class="connector conn-right hidden"></div>
        </div>
        <div class="content">
          <div class="label">${e(this._label)}</div>
          ${t}
          <slot></slot>
        </div>
      </div>
    `}};customElements.define("ui-steps",ot);customElements.define("ui-step",st);var at=class extends c{static properties={label:{type:String,default:"",reflect:!0},value:{type:String,default:"",reflect:!0},trend:{type:String,default:"",reflect:!0},icon:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},compact:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        padding: 1em 1.25em;
        border-radius: var(--ui-radius, 0.5em);
        border: 1px solid var(--_border-color, var(--ui-border-color, #e5e7eb));
        background: var(--_bg, var(--ui-bg, #fff));
        color: var(--_color, var(--ui-text-color, #1f2937));
        font-family: inherit;
        box-sizing: border-box;
      }

      .stat {
        display: flex;
        flex-direction: column;
        gap: 0.25em;
      }

      :host([compact]) .stat {
        flex-direction: row;
        align-items: center;
        gap: 1em;
      }

      .stat-icon {
        font-size: 1.5em;
        opacity: 0.7;
        margin-bottom: 0.25em;
      }

      :host([compact]) .stat-icon {
        margin-bottom: 0;
      }

      .label {
        font-size: 0.8em;
        font-weight: 500;
        color: var(--_label-color, var(--ui-text-muted, #6b7280));
        text-transform: uppercase;
        letter-spacing: 0.04em;
      }

      .value-row {
        display: flex;
        align-items: baseline;
        gap: 0.5em;
        flex-wrap: wrap;
      }

      .value {
        font-size: 1.75em;
        font-weight: 700;
        line-height: 1.2;
        letter-spacing: -0.02em;
      }

      .trend {
        display: inline-flex;
        align-items: center;
        gap: 0.2em;
        font-size: 0.8em;
        font-weight: 600;
        padding: 0.15em 0.45em;
        border-radius: 9999px;
        line-height: 1.3;
      }

      .trend.up {
        color: var(--ui-green-700, #15803d);
        background: var(--ui-green-50, #f0fdf4);
      }

      .trend.down {
        color: var(--ui-red-700, #b91c1c);
        background: var(--ui-red-50, #fef2f2);
      }

      .trend.neutral {
        color: var(--ui-gray-600, #4b5563);
        background: var(--ui-gray-100, #f3f4f6);
      }

      .trend svg {
        width: 0.9em;
        height: 0.9em;
        fill: none;
        stroke: currentColor;
        stroke-width: 2.5;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .extra {
        margin-top: 0.5em;
        font-size: 0.85em;
        color: var(--_label-color, var(--ui-text-muted, #6b7280));
      }

      .extra.empty { display: none; }

      :host([compact]) .main {
        flex: 1;
      }
    `}connectedCallback(){super.connectedCallback(),this._applyStyles();let e=this.shadowRoot?.querySelector(".extra slot");if(e){let t=()=>{let i=this.shadowRoot.querySelector(".extra");i&&i.classList.toggle("empty",e.assignedNodes({flatten:!0}).length===0)};e.addEventListener("slotchange",t),t()}}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyStyles()}_applyStyles(){let e={};if(this._background){let i=n(this._background);e["--_bg"]=i;let r=p(this._background);r&&(this._color||(e["--_color"]=r),e["--_label-color"]=r==="#ffffff"?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.5)",e["--_border-color"]="transparent")}this._color&&(e["--_color"]=n(this._color));let t=d(this._size);t&&(e["font-size"]=t),this._setDynamicVars(e)}render(){let e=h=>(h||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"),t='<svg viewBox="0 0 24 24"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>',i='<svg viewBox="0 0 24 24"><polyline points="22 17 13.5 8.5 8.5 13.5 2 7"/><polyline points="16 17 22 17 22 11"/></svg>',r='<svg viewBox="0 0 24 24"><line x1="2" y1="12" x2="22" y2="12"/><polyline points="16 6 22 12 16 18"/></svg>',o="";if(this._trend){let h=this._trend.trim().toLowerCase(),u=h==="up"||h.startsWith("+"),f=h==="down"||h.startsWith("-"),m=u?"up":f?"down":"neutral",v=m==="up"?t:m==="down"?i:r,k=h==="up"||h==="down"?"":e(this._trend);o=`<span class="trend ${m}">${v}${k}</span>`}let a=this._icon?`<div class="stat-icon"><ui-icon>${e(this._icon)}</ui-icon></div>`:"",l=this._label?`<div class="label">${e(this._label)}</div>`:"";return`
      <div class="stat">
        ${a}
        <div class="main">
          ${l}
          <div class="value-row">
            <span class="value">${e(this._value)}</span>
            ${o}
          </div>
          <div class="extra"><slot></slot></div>
        </div>
      </div>
    `}};customElements.define("ui-stat",at);var nt=class extends c{static properties={src:{type:String,default:"",reflect:!0},alt:{type:String,default:"",reflect:!0},width:{type:String,default:"",reflect:!0},height:{type:String,default:"",reflect:!0},fit:{type:String,default:"cover",reflect:!0},radius:{type:String,default:"",reflect:!0},fallback:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},lazy:{type:Boolean,default:!0,reflect:!0},lightbox:{type:Boolean,default:!1,reflect:!0},caption:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: inline-block;
        position: relative;
        overflow: hidden;
        border-radius: var(--_radius, 0);
        line-height: 0;
      }

      .container {
        position: relative;
        width: var(--_width, auto);
        height: var(--_height, auto);
        overflow: hidden;
      }

      img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: var(--_fit, cover);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      img.loaded {
        opacity: 1;
      }

      :host([lightbox]) img {
        cursor: zoom-in;
      }

      /* Loading skeleton */
      .skeleton {
        position: absolute;
        inset: 0;
        background: linear-gradient(90deg,
          var(--ui-gray-100, #f3f4f6) 25%,
          var(--ui-gray-200, #e5e7eb) 50%,
          var(--ui-gray-100, #f3f4f6) 75%
        );
        background-size: 200% 100%;
        animation: _shimmer 1.5s ease-in-out infinite;
        transition: opacity 0.3s ease;
      }

      .skeleton.hidden {
        opacity: 0;
        pointer-events: none;
      }

      @keyframes _shimmer {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
      }

      /* Error state */
      .error-state {
        position: absolute;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        gap: 0.4em;
        background: var(--ui-gray-50, #f9fafb);
        color: var(--ui-text-muted, #9ca3af);
        font-family: inherit;
        font-size: 0.8em;
      }

      .error-state.visible {
        display: flex;
      }

      .error-state svg {
        width: 2em;
        height: 2em;
        fill: none;
        stroke: currentColor;
        stroke-width: 1.5;
        stroke-linecap: round;
        stroke-linejoin: round;
        opacity: 0.5;
      }

      /* Caption */
      .caption {
        display: block;
        padding: 0.5em 0.25em;
        font-family: inherit;
        font-size: 0.8em;
        color: var(--ui-text-muted, #6b7280);
        line-height: 1.4;
        text-align: center;
      }

      /* \u2500\u2500 Lightbox overlay \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .lightbox {
        display: none;
        position: fixed;
        inset: 0;
        z-index: 10000;
        background: rgba(0,0,0,0.85);
        align-items: center;
        justify-content: center;
        cursor: zoom-out;
        padding: 2em;
      }

      .lightbox.visible {
        display: flex;
      }

      .lightbox img {
        max-width: 90vw;
        max-height: 90vh;
        width: auto;
        height: auto;
        object-fit: contain;
        opacity: 1;
        border-radius: 0.25em;
      }

      .lightbox-close {
        position: absolute;
        top: 1em;
        right: 1em;
        width: 2em;
        height: 2em;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255,255,255,0.15);
        border: none;
        border-radius: 50%;
        color: #fff;
        font-size: 1.2em;
        cursor: pointer;
        transition: background 0.15s;
      }

      .lightbox-close:hover {
        background: rgba(255,255,255,0.3);
      }
    `}connectedCallback(){super.connectedCallback(),this._applyStyles()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyStyles()}_applyStyles(){let e={};this._width&&(e["--_width"]=this._width),this._height&&(e["--_height"]=this._height),this._fit&&(e["--_fit"]=this._fit),this._radius&&(e["--_radius"]=this._radius);let t=d(this._size);t&&(e["font-size"]=t),this._setDynamicVars(e)}_update(){super._update();let e=this.shadowRoot?.querySelector(".main-img");if(!e)return;e.addEventListener("load",()=>{e.classList.add("loaded"),this.shadowRoot?.querySelector(".skeleton")?.classList.add("hidden"),this.emit("ui-load")}),e.addEventListener("error",()=>{if(this._fallback&&e.src!==this._fallback){e.src=this._fallback;return}this.shadowRoot?.querySelector(".skeleton")?.classList.add("hidden"),this.shadowRoot?.querySelector(".error-state")?.classList.add("visible"),this.emit("ui-error")}),this._lightbox&&e.addEventListener("click",()=>this._openLightbox());let t=this.shadowRoot?.querySelector(".lightbox");t&&t.addEventListener("click",()=>this._closeLightbox())}_openLightbox(){let e=this.shadowRoot?.querySelector(".lightbox");e&&e.classList.add("visible"),document.addEventListener("keydown",this._lbKeyHandler=t=>{t.key==="Escape"&&this._closeLightbox()})}_closeLightbox(){let e=this.shadowRoot?.querySelector(".lightbox");e&&e.classList.remove("visible"),this._lbKeyHandler&&(document.removeEventListener("keydown",this._lbKeyHandler),this._lbKeyHandler=null)}render(){let e=a=>(a||"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;"),t=this._lazy?' loading="lazy"':"",i='<svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>',r=this._caption?`<span class="caption">${e(this._caption)}</span>`:"",o=this._lightbox?`
      <div class="lightbox">
        <button class="lightbox-close" aria-label="Close">\u2715</button>
        <img src="${e(this._src)}" alt="${e(this._alt)}">
      </div>
    `:"";return`
      <div class="container">
        <div class="skeleton"></div>
        <img class="main-img" src="${e(this._src)}" alt="${e(this._alt)}"${t}>
        <div class="error-state">${i}<span>Failed to load</span></div>
      </div>
      ${r}
      ${o}
    `}};customElements.define("ui-image",nt);var lt=class extends c{static properties={height:{type:String,default:"",reflect:!0},maxHeight:{type:String,default:"",reflect:!0,attribute:"max-height"},width:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},direction:{type:String,default:"vertical",reflect:!0},scrollbar:{type:String,default:"thin",reflect:!0},padding:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: block;
        position: relative;
        overflow: hidden;
      }

      .scroll-container {
        width: var(--_width, 100%);
        height: var(--_height, auto);
        max-height: var(--_max-height, none);
        padding: var(--_padding, 0);
        box-sizing: border-box;
      }

      /* \u2500\u2500 Direction \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      :host([direction="vertical"]) .scroll-container,
      :host(:not([direction])) .scroll-container {
        overflow-x: hidden;
        overflow-y: auto;
      }

      :host([direction="horizontal"]) .scroll-container {
        overflow-x: auto;
        overflow-y: hidden;
        white-space: nowrap;
      }

      :host([direction="both"]) .scroll-container {
        overflow: auto;
      }

      /* \u2500\u2500 Scroll shadows \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .shadow {
        position: absolute;
        pointer-events: none;
        z-index: 1;
        opacity: 0;
        transition: opacity 0.2s ease;
      }

      .shadow-top {
        top: 0; left: 0; right: 0;
        height: var(--ui-scroll-shadow-size, 1.5em);
        background: linear-gradient(to bottom, var(--ui-scroll-shadow-color, rgba(0,0,0,0.07)), transparent);
      }

      .shadow-bottom {
        bottom: 0; left: 0; right: 0;
        height: var(--ui-scroll-shadow-size, 1.5em);
        background: linear-gradient(to top, var(--ui-scroll-shadow-color, rgba(0,0,0,0.07)), transparent);
      }

      :host([data-scroll-up]) .shadow-top { opacity: 1; }
      :host([data-scroll-down]) .shadow-bottom { opacity: 1; }

      /* \u2500\u2500 Thin scrollbar (default) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      :host([scrollbar="thin"]) .scroll-container {
        scrollbar-width: thin;
        scrollbar-color: transparent transparent;
      }

      :host([scrollbar="thin"]) .scroll-container:hover {
        scrollbar-color: rgba(0,0,0,0.25) transparent;
      }

      :host([scrollbar="thin"]) .scroll-container::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }

      :host([scrollbar="thin"]) .scroll-container::-webkit-scrollbar-track {
        background: transparent;
      }

      :host([scrollbar="thin"]) .scroll-container::-webkit-scrollbar-thumb {
        background: transparent;
        border-radius: 3px;
        transition: background 0.2s;
      }

      :host([scrollbar="thin"]) .scroll-container:hover::-webkit-scrollbar-thumb {
        background: rgba(0,0,0,0.25);
      }

      :host([scrollbar="thin"]) .scroll-container::-webkit-scrollbar-thumb:hover {
        background: rgba(0,0,0,0.4);
      }

      /* \u2500\u2500 Hidden scrollbar \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      :host([scrollbar="hidden"]) .scroll-container {
        scrollbar-width: none;
      }

      :host([scrollbar="hidden"]) .scroll-container::-webkit-scrollbar {
        display: none;
      }

      /* \u2500\u2500 Auto scrollbar \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      :host([scrollbar="auto"]) .scroll-container {
        scrollbar-width: auto;
      }
    `}connectedCallback(){this._atBottom=!1,this._scrollRAF=null,super.connectedCallback(),this._applyStyles()}disconnectedCallback(){super.disconnectedCallback(),this._scrollRAF&&(cancelAnimationFrame(this._scrollRAF),this._scrollRAF=null)}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&this._applyStyles()}_update(){this._scrollRAF&&(cancelAnimationFrame(this._scrollRAF),this._scrollRAF=null),super._update(),this._initialised&&this._attachScrollListener()}_attachScrollListener(){let e=this.shadowRoot?.querySelector(".scroll-container");if(!e)return;e.addEventListener("scroll",()=>{this._scrollRAF||(this._scrollRAF=requestAnimationFrame(()=>{this._scrollRAF=null,this._updateScrollIndicators()}))},{passive:!0});let t=e.querySelector("slot");t&&t.addEventListener("slotchange",()=>{requestAnimationFrame(()=>this._updateScrollIndicators())}),typeof requestAnimationFrame<"u"&&requestAnimationFrame(()=>this._updateScrollIndicators())}_updateScrollIndicators(){let e=this.shadowRoot?.querySelector(".scroll-container");if(!e)return;let t=e.scrollTop>1,i=e.scrollTop<e.scrollHeight-e.clientHeight-1;this.toggleAttribute("data-scroll-up",t),this.toggleAttribute("data-scroll-down",i),!i&&e.scrollHeight>e.clientHeight?this._atBottom||(this._atBottom=!0,this.emit("ui-scroll-end")):this._atBottom=!1}_applyStyles(){let e={};this._height&&(e["--_height"]=this._height),this._maxHeight&&(e["--_max-height"]=this._maxHeight),this._width&&(e["--_width"]=this._width),this._padding&&(e["--_padding"]=d(this._padding)||this._padding);let t=d(this._size);t&&(e["font-size"]=t),this._setDynamicVars(e)}scrollToTop(e="smooth"){this.shadowRoot?.querySelector(".scroll-container")?.scrollTo({top:0,behavior:e})}scrollToBottom(e="smooth"){let t=this.shadowRoot?.querySelector(".scroll-container");t&&t.scrollTo({top:t.scrollHeight,behavior:e})}scrollToLeft(e="smooth"){this.shadowRoot?.querySelector(".scroll-container")?.scrollTo({left:0,behavior:e})}scrollToRight(e="smooth"){let t=this.shadowRoot?.querySelector(".scroll-container");t&&t.scrollTo({left:t.scrollWidth,behavior:e})}render(){return'<div class="scroll-container"><slot></slot></div><div class="shadow shadow-top"></div><div class="shadow shadow-bottom"></div>'}};customElements.define("ui-scroll-area",lt);var ct=class extends c{static properties={value:{type:String,default:"",reflect:!0},min:{type:String,default:"",reflect:!0},max:{type:String,default:"",reflect:!0},background:{type:String,default:"indigo-500",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},locale:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: inline-block;
        font-family: inherit;
        min-width: 16em;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.5;
      }

      .calendar {
        border: 1px solid var(--ui-border-color, #e5e7eb);
        border-radius: var(--ui-radius, 0.5em);
        background: var(--ui-bg, #fff);
        padding: 0.75em;
        box-sizing: border-box;
      }

      /* \u2500\u2500 Header \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 0.75em;
      }

      .month-label {
        font-weight: 600;
        font-size: 0.95em;
        user-select: none;
      }

      .nav-btn {
        all: unset;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 1.75em;
        height: 1.75em;
        border-radius: var(--ui-button-radius, 0.375em);
        cursor: pointer;
        color: var(--ui-text-color, #374151);
        transition: background 0.12s ease;
      }

      .nav-btn:hover {
        background: var(--ui-bg-subtle, rgba(0,0,0,0.06));
      }

      .nav-btn:focus-visible {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: 0.125em;
      }

      .nav-btn svg {
        width: 1em;
        height: 1em;
        fill: none;
        stroke: currentColor;
        stroke-width: 2.5;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      /* \u2500\u2500 Grid \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 1px;
        text-align: center;
      }

      .day-header {
        font-size: 0.7em;
        font-weight: 600;
        color: var(--ui-text-muted, #9ca3af);
        text-transform: uppercase;
        padding: 0.3em 0;
        user-select: none;
      }

      .day {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 2em;
        height: 2em;
        margin: 0 auto;
        border-radius: 50%;
        cursor: pointer;
        font-size: 0.85em;
        transition: background 0.12s ease, color 0.12s ease;
        user-select: none;
        box-sizing: border-box;
      }

      .day:hover:not(.selected):not(.disabled):not(.outside) {
        background: var(--ui-bg-subtle, rgba(0,0,0,0.06));
      }

      .day.today:not(.selected) {
        font-weight: 700;
        border: 1.5px solid var(--_accent, var(--ui-indigo-500, #6366f1));
        color: var(--_accent, var(--ui-indigo-500, #6366f1));
      }

      .day.selected {
        background: var(--_accent, var(--ui-indigo-500, #6366f1));
        color: var(--_accent-text, #fff);
        font-weight: 600;
      }

      .day.disabled {
        opacity: 0.3;
        cursor: default;
      }

      .day.outside {
        color: var(--ui-text-muted, #d1d5db);
        cursor: default;
      }
    `}constructor(){super();let e=new Date;this._viewYear=e.getFullYear(),this._viewMonth=e.getMonth()}_update(){this._syncViewFromValue(),this._applyStyles(),super._update(),this._attachListeners()}_syncViewFromValue(){if(this.value){let e=new Date(this.value+"T00:00:00");isNaN(e.getTime())||(this._viewYear=e.getFullYear(),this._viewMonth=e.getMonth())}}_applyStyles(){let e={};this.background&&(e["--_accent"]=n(this.background),e["--_accent-text"]=this.color?n(this.color):p(this.background));let t=d(this.size);t&&(e["font-size"]=t),this._setDynamicVars(e)}_attachListeners(){this.shadowRoot?.querySelector(".prev")?.addEventListener("click",()=>{this._viewMonth--,this._viewMonth<0&&(this._viewMonth=11,this._viewYear--),this._update()}),this.shadowRoot?.querySelector(".next")?.addEventListener("click",()=>{this._viewMonth++,this._viewMonth>11&&(this._viewMonth=0,this._viewYear++),this._update()}),this.shadowRoot?.querySelectorAll(".day:not(.disabled):not(.outside)").forEach(e=>{e.addEventListener("click",()=>{let t=e.dataset.date;t&&(this.value=t,this.emit("ui-change",{value:t,date:new Date(t+"T00:00:00")}))})})}render(){let e=this.locale||void 0,t=this._viewYear,i=this._viewMonth,r=new Date,o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,a=this.value||"",l=this.min?new Date(this.min+"T00:00:00"):null,h=this.max?new Date(this.max+"T00:00:00"):null,u=new Date(t,i).toLocaleDateString(e,{month:"long",year:"numeric"}),f=[];for(let y=0;y<7;y++){let S=new Date(2024,0,y+1);f.push(S.toLocaleDateString(e,{weekday:"narrow"}))}let v=(new Date(t,i,1).getDay()+6)%7,k=new Date(t,i+1,0).getDate(),g=new Date(t,i,0).getDate(),_=[];for(let y=v-1;y>=0;y--)_.push({day:g-y,outside:!0});for(let y=1;y<=k;y++){let S=`${t}-${String(i+1).padStart(2,"0")}-${String(y).padStart(2,"0")}`,gt=new Date(S+"T00:00:00"),At=l&&gt<l||h&&gt>h;_.push({day:y,iso:S,today:S===o,selected:S===a,disabled:At})}let x=7-_.length%7;if(x<7)for(let y=1;y<=x;y++)_.push({day:y,outside:!0});let w='<svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>',z='<svg viewBox="0 0 24 24"><polyline points="9 6 15 12 9 18"/></svg>',bt=f.map(y=>`<span class="day-header">${y}</span>`).join(""),$t=_.map(y=>{if(y.outside)return`<span class="day outside">${y.day}</span>`;let S=["day"];return y.today&&S.push("today"),y.selected&&S.push("selected"),y.disabled&&S.push("disabled"),`<span class="${S.join(" ")}" data-date="${y.iso}">${y.day}</span>`}).join("");return`
      <div class="calendar">
        <div class="header">
          <button class="nav-btn prev" aria-label="Previous month">${w}</button>
          <span class="month-label">${u}</span>
          <button class="nav-btn next" aria-label="Next month">${z}</button>
        </div>
        <div class="grid">
          ${bt}
          ${$t}
        </div>
      </div>
    `}};customElements.define("ui-calendar",ct);var dt=class extends c{static properties={open:{type:Boolean,default:!1,reflect:!0},placement:{type:String,default:"right",reflect:!0},width:{type:String,default:"320px",reflect:!0},height:{type:String,default:"320px",reflect:!0},elevation:{type:String,default:"4",reflect:!0},background:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},label:{type:String,default:"",reflect:!0},persistent:{type:Boolean,default:!1,reflect:!0},noHeader:{type:Boolean,default:!1,reflect:!0,attribute:"no-header"}};static styles(){return`
      :host {
        display: contents;
      }

      .backdrop {
        display: none;
        position: fixed;
        inset: 0;
        z-index: 9998;
        background: rgba(0,0,0,0.4);
        opacity: 0;
        transition: opacity 0.25s ease;
      }

      .backdrop.visible {
        display: block;
        opacity: 1;
      }

      .panel {
        position: fixed;
        z-index: 9999;
        background: var(--_bg, var(--ui-bg, #fff));
        box-shadow: var(--_elevation, 0 20px 25px rgba(0,0,0,0.1));
        display: flex;
        flex-direction: column;
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-sizing: border-box;
        font-family: inherit;
        overflow: hidden;
      }

      /* \u2500\u2500 Placement positions \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      :host([placement="right"]) .panel {
        top: 0; right: 0; bottom: 0;
        width: var(--_width, 320px);
        transform: translateX(100%);
      }
      :host([placement="left"]) .panel {
        top: 0; left: 0; bottom: 0;
        width: var(--_width, 320px);
        transform: translateX(-100%);
      }
      :host([placement="top"]) .panel {
        top: 0; left: 0; right: 0;
        height: var(--_height, 320px);
        transform: translateY(-100%);
      }
      :host([placement="bottom"]) .panel {
        bottom: 0; left: 0; right: 0;
        height: var(--_height, 320px);
        transform: translateY(100%);
      }

      .panel.visible,
      :host([placement="right"]) .panel.visible,
      :host([placement="left"]) .panel.visible,
      :host([placement="top"]) .panel.visible,
      :host([placement="bottom"]) .panel.visible {
        transform: translate(0, 0);
      }

      /* \u2500\u2500 Header \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.75em 1em;
        border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
        flex-shrink: 0;
      }

      .header-title {
        font-weight: 600;
        font-size: 1em;
      }

      .close-btn {
        all: unset;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 1.75em;
        height: 1.75em;
        border-radius: var(--ui-button-radius, 0.375em);
        cursor: pointer;
        color: var(--ui-text-muted, #6b7280);
        transition: background 0.12s ease, color 0.12s ease;
      }

      .close-btn:hover {
        background: var(--ui-bg-subtle, rgba(0,0,0,0.06));
        color: var(--ui-text-color, #1f2937);
      }

      .close-btn:focus-visible {
        outline: 0.125em solid var(--ui-focus-ring, #6366f1);
        outline-offset: 0.125em;
      }

      .close-btn svg {
        width: 1em;
        height: 1em;
        fill: none;
        stroke: currentColor;
        stroke-width: 2.5;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      /* \u2500\u2500 Body \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .body {
        flex: 1;
        overflow-y: auto;
        padding: 1em;
        scrollbar-width: thin;
      }
    `}connectedCallback(){super.connectedCallback(),this._applyStyles()}disconnectedCallback(){document.removeEventListener("keydown",this._escHandler),super.disconnectedCallback()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&(this._applyStyles(),e==="open"&&(this._open?this._doOpen():this._doClose("attribute")))}_applyStyles(){let e={};this._background&&(e["--_bg"]=n(this._background)),this._width&&(e["--_width"]=this._width),this._height&&(e["--_height"]=this._height);let t=b(this._elevation);t&&(e["--_elevation"]=t);let i=d(this._size);i&&(e["font-size"]=i),this._setDynamicVars(e)}_update(){super._update(),this.shadowRoot?.querySelector(".close-btn")?.addEventListener("click",()=>this.hide("close-button")),this.shadowRoot?.querySelector(".backdrop")?.addEventListener("click",()=>{this._persistent||this.hide("backdrop")}),this._escHandler=e=>{e.key==="Escape"&&!this._persistent&&this.hide("escape")},this._open&&this._doOpen()}show(){this.open=!0}hide(e="method"){this._doClose(e)}_doOpen(){let e=this.shadowRoot?.querySelector(".panel"),t=this.shadowRoot?.querySelector(".backdrop");e&&requestAnimationFrame(()=>e.classList.add("visible")),t&&t.classList.add("visible"),document.addEventListener("keydown",this._escHandler),this.emit("ui-open")}_doClose(e="method"){let t=this.shadowRoot?.querySelector(".panel"),i=this.shadowRoot?.querySelector(".backdrop");t&&t.classList.remove("visible"),i&&i.classList.remove("visible"),document.removeEventListener("keydown",this._escHandler),this.hasAttribute("open")&&this.removeAttribute("open"),this.emit("ui-close",{reason:e})}render(){let e=r=>(r||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"),i=this._noHeader?"":`
      <div class="header">
        <span class="header-title">${e(this._label)}</span>
        <button class="close-btn" aria-label="Close drawer"><svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
      </div>
    `;return`
      <div class="backdrop"></div>
      <div class="panel" role="dialog" aria-label="${e(this._label)}">
        ${i}
        <div class="body"><slot></slot></div>
      </div>
    `}};customElements.define("ui-drawer",dt);var ht=class extends c{static properties={open:{type:Boolean,default:!1,reflect:!0},placeholder:{type:String,default:"Type a command\u2026",reflect:!0},shortcut:{type:String,default:"k",reflect:!0},noShortcut:{type:Boolean,default:!1,reflect:!0,attribute:"no-shortcut"},elevation:{type:String,default:"5",reflect:!0},size:{type:String,default:"",reflect:!0},width:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: contents;
      }

      .backdrop {
        display: none;
        position: fixed;
        inset: 0;
        z-index: 10000;
        background: rgba(0,0,0,0.45);
        align-items: flex-start;
        justify-content: center;
        padding-top: min(20vh, 140px);
        opacity: 0;
        transition: opacity 0.15s ease;
      }

      .backdrop.visible {
        display: flex;
        opacity: 1;
      }

      .panel {
        width: var(--_width, min(90vw, 560px));
        max-height: 60vh;
        background: var(--ui-bg, #fff);
        border-radius: var(--ui-radius, 0.75em);
        box-shadow: var(--_elevation, 0 25px 50px rgba(0,0,0,0.15));
        display: flex;
        flex-direction: column;
        overflow: hidden;
        font-family: inherit;
        transform: scale(0.98) translateY(-8px);
        transition: transform 0.15s ease;
      }

      .backdrop.visible .panel {
        transform: scale(1) translateY(0);
      }

      /* \u2500\u2500 Search input \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .search-wrap {
        display: flex;
        align-items: center;
        gap: 0.6em;
        padding: 0.75em 1em;
        border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
      }

      .search-icon svg {
        width: 1.2em;
        height: 1.2em;
        fill: none;
        stroke: var(--ui-text-muted, #9ca3af);
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .search-input {
        all: unset;
        flex: 1;
        font-family: inherit;
        font-size: 1em;
        color: var(--ui-text-color, #1f2937);
      }

      .search-input::placeholder {
        color: var(--ui-text-muted, #9ca3af);
      }

      /* \u2500\u2500 Results list \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .results {
        overflow-y: auto;
        padding: 0.4em 0;
        scrollbar-width: thin;
      }

      .empty {
        padding: 2em 1em;
        text-align: center;
        color: var(--ui-text-muted, #9ca3af);
        font-size: 0.9em;
      }

      .group-label {
        font-size: 0.7em;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.06em;
        color: var(--ui-text-muted, #9ca3af);
        padding: 0.6em 1em 0.3em;
        user-select: none;
      }

      .item {
        display: flex;
        align-items: center;
        gap: 0.65em;
        padding: 0.5em 1em;
        cursor: pointer;
        transition: background 0.08s ease;
      }

      .item:hover, .item.active {
        background: var(--ui-bg-subtle, rgba(0,0,0,0.05));
      }

      .item-icon {
        flex-shrink: 0;
        width: 1.2em;
        height: 1.2em;
        color: var(--ui-text-muted, #6b7280);
      }

      .item-label {
        font-weight: 500;
        color: var(--ui-text-color, #1f2937);
      }

      .item-desc {
        font-size: 0.8em;
        color: var(--ui-text-muted, #9ca3af);
        margin-left: auto;
      }

      /* \u2500\u2500 Footer hint \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .footer {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 0.75em;
        padding: 0.4em 1em;
        border-top: 1px solid var(--ui-border-color, #e5e7eb);
        font-size: 0.7em;
        color: var(--ui-text-muted, #9ca3af);
      }

      .footer kbd {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 1.4em;
        height: 1.4em;
        padding: 0 0.3em;
        border-radius: 0.2em;
        border: 1px solid var(--ui-border-color, #d1d5db);
        font-family: inherit;
        font-size: 0.95em;
        background: var(--ui-bg-subtle, #f9fafb);
      }
    `}constructor(){super(),this.__items=[],this._query="",this._activeIndex=0,this._keyHandler=this._onGlobalKey.bind(this),this._onInput=this._onInput.bind(this),this._onInputKeydown=this._onInputKeydown.bind(this),this._onBackdropClick=this._onBackdropClick.bind(this)}set items(e){this.__items=Array.isArray(e)?e:[],this._initialised&&this._renderResults()}get items(){return this.__items}connectedCallback(){super.connectedCallback(),this.noShortcut||document.addEventListener("keydown",this._keyHandler),this._attachPanelListeners()}disconnectedCallback(){document.removeEventListener("keydown",this._keyHandler),this._detachPanelListeners(),super.disconnectedCallback()}_attachPanelListeners(){this._detachPanelListeners();let e=this.shadowRoot?.querySelector(".search-input"),t=this.shadowRoot?.querySelector(".backdrop");e&&(e.addEventListener("input",this._onInput),e.addEventListener("keydown",this._onInputKeydown)),t&&t.addEventListener("click",this._onBackdropClick)}_detachPanelListeners(){let e=this.shadowRoot?.querySelector(".search-input"),t=this.shadowRoot?.querySelector(".backdrop");e&&(e.removeEventListener("input",this._onInput),e.removeEventListener("keydown",this._onInputKeydown)),t&&t.removeEventListener("click",this._onBackdropClick)}_onInput(){let e=this.shadowRoot?.querySelector(".search-input");this._query=e?.value||"",this._activeIndex=0,this._renderResults()}_onInputKeydown(e){let t=this._filterItems();if(e.key==="ArrowDown")e.preventDefault(),this._activeIndex=Math.min(this._activeIndex+1,t.length-1),this._renderResults();else if(e.key==="ArrowUp")e.preventDefault(),this._activeIndex=Math.max(this._activeIndex-1,0),this._renderResults();else if(e.key==="Enter"){e.preventDefault();let i=t[this._activeIndex];i&&this._selectItem(i.value,i.label)}else e.key==="Escape"&&this.hide()}_onBackdropClick(e){e.target===e.currentTarget&&this.hide()}_applyStyles(){let e={},t=b(this.elevation);t&&(e["--_elevation"]=t),this.width&&(e["--_width"]=this.width);let i=d(this.size);i&&(e["font-size"]=i),this._setDynamicVars(e)}_onGlobalKey(e){(e.metaKey||e.ctrlKey)&&e.key.toLowerCase()===this.shortcut&&(e.preventDefault(),this.open?this.hide():this.show())}show(){this.open=!0,this._doOpen()}hide(){this._doClose()}_doOpen(){let e=this.shadowRoot?.querySelector(".backdrop");e&&e.classList.add("visible"),this._query="",this._activeIndex=0;let t=this.shadowRoot?.querySelector(".search-input");t&&(t.value="",requestAnimationFrame(()=>t.focus())),this._renderResults(),this.emit("ui-open")}_doClose(){let e=this.shadowRoot?.querySelector(".backdrop");e&&e.classList.remove("visible"),this.hasAttribute("open")&&this.removeAttribute("open"),this.emit("ui-close")}_getItems(){let e=this.__items||[],t=[...this.querySelectorAll("ui-command-item")].map(i=>({label:i.getAttribute("label")||i.textContent?.trim()||"",value:i.getAttribute("value")||"",description:i.getAttribute("description")||"",icon:i.getAttribute("icon")||"",group:i.getAttribute("group")||""}));return[...e,...t]}_filterItems(){let e=this._getItems();if(!this._query)return e;let t=this._query.toLowerCase();return e.filter(i=>(i.label||"").toLowerCase().includes(t)||(i.description||"").toLowerCase().includes(t)||(i.value||"").toLowerCase().includes(t))}_renderResults(){let e=this.shadowRoot?.querySelector(".results");if(!e)return;let t=this._filterItems();if(t.length===0){e.innerHTML='<div class="empty">No results found.</div>';return}let i={};t.forEach(l=>{let h=l.group||"";i[h]||(i[h]=[]),i[h].push(l)});let r=l=>String(l||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"),o="",a=0;for(let[l,h]of Object.entries(i)){l&&(o+=`<div class="group-label">${r(l)}</div>`);for(let u of h){let f=u.icon?`<span class="item-icon"><ui-icon>${r(u.icon)}</ui-icon></span>`:"",m=u.description?`<span class="item-desc">${r(u.description)}</span>`:"",v=a===this._activeIndex?" active":"";o+=`<div class="item${v}" data-index="${a}" data-value="${r(u.value)}" data-label="${r(u.label)}">
          ${f}
          <span class="item-label">${r(u.label)}</span>
          ${m}
        </div>`,a++}}e.innerHTML=o,e.querySelectorAll(".item").forEach(l=>{l.addEventListener("click",()=>{this._selectItem(l.dataset.value,l.dataset.label)})})}_selectItem(e,t){this.emit("ui-select",{value:e,label:t,item:this._filterItems().find(i=>i.value===e)}),this.hide()}_update(){this._applyStyles(),super._update(),this._attachPanelListeners(),this.open&&this._doOpen()}render(){return`
      <div class="backdrop">
        <div class="panel">
          <div class="search-wrap">
            <span class="search-icon"><svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></span>
            <input class="search-input" type="text" placeholder="${(i=>(i||"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;"))(this.placeholder)}" autocomplete="off" spellcheck="false">
          </div>
          <div class="results"></div>
          <div class="footer">
            <span><kbd>\u2191</kbd><kbd>\u2193</kbd> navigate</span>
            <span><kbd>\u21B5</kbd> select</span>
            <span><kbd>esc</kbd> close</span>
          </div>
        </div>
      </div>
      <slot style="display:none"></slot>
    `}},ut=class extends HTMLElement{static get observedAttributes(){return["value","label","description","icon","group"]}constructor(){super(),this.style.display="none"}};customElements.define("ui-command",ht);customElements.define("ui-command-item",ut);var pt=class extends c{static properties={size:{type:String,default:"",reflect:!0},dividers:{type:Boolean,default:!1,reflect:!0},hoverable:{type:Boolean,default:!1,reflect:!0},striped:{type:Boolean,default:!1,reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},bordered:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        font-family: inherit;
        background: var(--_bg, inherit);
        color: var(--_color, inherit);
      }

      :host([bordered]) {
        border: 1px solid var(--ui-border-color, #e5e7eb);
        border-radius: var(--ui-radius, 0.5em);
        overflow: hidden;
      }

      :host([dividers]) ::slotted(ui-list-item:not(:last-child)) {
        border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
      }

      /* hoverable \u2014 set an inherited CSS var that ui-list-item reads */
      :host([hoverable]) {
        --_list-hover-bg: var(--ui-gray-100, rgba(0,0,0,0.04));
      }
    `}connectedCallback(){super.connectedCallback(),this._applyStyles(),requestAnimationFrame(()=>this._applyStriped()),this._childObserver=new MutationObserver(()=>this._applyStriped()),this._childObserver.observe(this,{childList:!0})}disconnectedCallback(){super.disconnectedCallback?.(),this._childObserver?.disconnect()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this._initialised&&(this._applyStyles(),e==="striped"&&this._applyStriped())}_applyStyles(){let e={};this._background&&(e["--_bg"]=n(this._background)),this._color&&(e["--_color"]=n(this._color));let t=d(this._size);t&&(e["font-size"]=t),this._setDynamicVars(e)}_applyStriped(){[...this.querySelectorAll(":scope > ui-list-item")].forEach((t,i)=>{this._striped&&i%2===1?t.setAttribute("_striped",""):t.removeAttribute("_striped")})}render(){return'<div role="list"><slot></slot></div>'}},ft=class extends c{static properties={value:{type:String,default:"",reflect:!0},description:{type:String,default:"",reflect:!0},disabled:{type:Boolean,default:!1,reflect:!0},href:{type:String,default:"",reflect:!0},target:{type:String,default:"",reflect:!0}};static styles(){return`
      :host {
        display: block;
        font-family: inherit;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.5;
      }

      /* hoverable \u2014 read inherited var from ui-list */
      :host(:hover) .item {
        background: var(--_list-hover-bg);
      }

      /* striped \u2014 attribute set by parent ui-list */
      :host([_striped]) .item {
        background: var(--ui-gray-100, rgba(0,0,0,0.04));
      }

      .item {
        display: flex;
        align-items: center;
        gap: 0.75em;
        padding: 0.65em 0.85em;
        cursor: default;
        transition: background 0.1s ease;
        text-decoration: none;
        color: inherit;
      }

      a.item {
        cursor: pointer;
      }

      a.item:hover {
        text-decoration: none;
      }

      .leading {
        display: flex;
        align-items: center;
        flex-shrink: 0;
      }

      .content {
        flex: 1;
        min-width: 0;
      }

      .label {
        font-weight: 500;
        line-height: 1.4;
      }

      .desc {
        font-size: 0.8em;
        color: var(--ui-text-muted, #6b7280);
        line-height: 1.3;
        margin-top: 0.1em;
      }

      .trailing {
        display: flex;
        align-items: center;
        flex-shrink: 0;
        margin-left: auto;
      }

      /* Hide empty slots */
      .leading:empty, .trailing:empty { display: none; }
    `}_update(){super._update();let e=this.shadowRoot?.querySelector(".item");e&&!this._href&&e.addEventListener("click",()=>{this._disabled||this.emit("ui-click",{value:this._value})})}render(){let e=a=>(a||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"),t=this._description?`<div class="desc">${e(this._description)}</div>`:"",i=this._href?"a":"div",r=this._href?` href="${e(this._href)}"`:"",o=this._target?` target="${e(this._target)}"`:"";return`
      <${i} class="item" role="listitem"${r}${o}>
        <span class="leading"><slot name="leading"></slot></span>
        <span class="content">
          <span class="label"><slot></slot></span>
          ${t}
        </span>
        <span class="trailing"><slot name="trailing"></slot></span>
      </${i}>
    `}};customElements.define("ui-list",pt);customElements.define("ui-list-item",ft);var R=new Map,mt=class s extends c{static properties={src:{type:String,default:"",reflect:!0},background:{type:String,default:"",reflect:!0},color:{type:String,default:"",reflect:!0},size:{type:String,default:"",reflect:!0},padding:{type:String,default:"",reflect:!0},nocache:{type:Boolean,default:!1,reflect:!0},toc:{type:Boolean,default:!1,reflect:!0}};static styles(){return`
      :host {
        display: block;
        line-height: 1.7;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }

      .wiki {
        font-family: var(--ui-font, system-ui, -apple-system, sans-serif);
      }

      /* \u2500\u2500 Layout: TOC + content \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .wiki--toc {
        display: grid;
        grid-template-columns: 15em 1fr;
        gap: 2em;
        align-items: start;
      }

      .toc {
        position: sticky;
        top: 1em;
        max-height: calc(100vh - 2em);
        overflow-y: auto;
        padding: 1em;
        border-right: 1px solid var(--ui-border-color, #e5e7eb);
        font-size: 0.85em;
      }

      .toc-title {
        font-weight: 700;
        margin-bottom: 0.5em;
        font-size: 0.8em;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--ui-text-muted, #6b7280);
      }

      .toc a {
        display: block;
        text-decoration: none;
        color: var(--ui-text-muted, #6b7280);
        padding: 0.2em 0;
        transition: color 0.15s;
      }
      .toc a:hover {
        color: var(--ui-text-color, #111827);
      }

      .toc .toc-h2 { padding-left: 0; }
      .toc .toc-h3 { padding-left: 1em; }
      .toc .toc-h4 { padding-left: 2em; }

      /* \u2500\u2500 Content styles \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .content h1,
      .content h2,
      .content h3,
      .content h4,
      .content h5,
      .content h6 {
        margin: 1.25em 0 0.5em;
        line-height: 1.3;
        font-weight: 600;
      }

      .content h1 { font-size: 2em; border-bottom: 1px solid var(--ui-border-color, #e5e7eb); padding-bottom: 0.3em; }
      .content h2 { font-size: 1.5em; border-bottom: 1px solid var(--ui-border-color, #e5e7eb); padding-bottom: 0.25em; }
      .content h3 { font-size: 1.25em; }
      .content h4 { font-size: 1em; }
      .content h5 { font-size: 0.875em; }
      .content h6 { font-size: 0.85em; color: var(--ui-text-muted, #6b7280); }

      .content p {
        margin: 0 0 1em;
      }

      .content a {
        color: var(--ui-indigo-600, #4f46e5);
        text-decoration: none;
      }
      .content a:hover {
        text-decoration: underline;
      }

      .content img {
        max-width: 100%;
        height: auto;
        border-radius: var(--ui-radius, 0.375em);
      }

      /* Inline code */
      .content code {
        background: var(--ui-gray-100, #f3f4f6);
        color: var(--ui-rose-600, #e11d48);
        padding: 0.15em 0.4em;
        border-radius: 0.25em;
        font-size: 0.875em;
        font-family: var(--ui-font-mono, "SF Mono", "Fira Code", monospace);
      }

      /* Fenced code blocks */
      .content pre {
        background: var(--ui-gray-900, #111827);
        color: var(--ui-gray-100, #f3f4f6);
        padding: 1em 1.25em;
        border-radius: var(--ui-radius, 0.375em);
        overflow-x: auto;
        font-size: 0.85em;
        line-height: 1.6;
        margin: 0 0 1em;
      }

      .content pre code {
        background: none;
        color: inherit;
        padding: 0;
        border-radius: 0;
        font-size: inherit;
      }

      /* Block quotes */
      .content blockquote {
        border-left: 4px solid var(--ui-indigo-400, #818cf8);
        margin: 0 0 1em;
        padding: 0.5em 1em;
        color: var(--ui-text-muted, #6b7280);
        background: var(--ui-gray-50, #f9fafb);
        border-radius: 0 var(--ui-radius, 0.375em) var(--ui-radius, 0.375em) 0;
      }

      .content blockquote p:last-child {
        margin-bottom: 0;
      }

      /* Lists */
      .content ul,
      .content ol {
        margin: 0 0 1em;
        padding-left: 1.5em;
      }

      .content li {
        margin-bottom: 0.25em;
      }

      .content li > ul,
      .content li > ol {
        margin-bottom: 0;
        margin-top: 0.25em;
      }

      /* Task list */
      .content li.task-item {
        list-style: none;
        margin-left: -1.5em;
      }

      .content li.task-item input[type="checkbox"] {
        margin-right: 0.5em;
        pointer-events: none;
      }

      /* Tables */
      .content table {
        width: 100%;
        border-collapse: collapse;
        margin: 0 0 1em;
        font-size: 0.9em;
      }

      .content th,
      .content td {
        border: 1px solid var(--ui-border-color, #e5e7eb);
        padding: 0.5em 0.75em;
        text-align: left;
      }

      .content th {
        background: var(--ui-gray-100, #f3f4f6);
        font-weight: 600;
      }

      .content tr:nth-child(even) {
        background: var(--ui-gray-50, #f9fafb);
      }

      /* Horizontal rule */
      .content hr {
        border: none;
        border-top: 1px solid var(--ui-border-color, #e5e7eb);
        margin: 2em 0;
      }

      /* \u2500\u2500 Loading state \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */
      .wiki--loading .content { display: none; }
      .wiki--loaded  ::slotted(*) { display: none; }
      .wiki--error   .content { display: none; }

      @media (max-width: 768px) {
        .wiki--toc {
          grid-template-columns: 1fr;
        }
        .toc {
          position: static;
          max-height: none;
          border-right: none;
          border-bottom: 1px solid var(--ui-border-color, #e5e7eb);
          padding: 0 0 0.75em;
          margin-bottom: 1em;
        }
      }
    `}constructor(){super(),this._markdown="",this._headings=[]}render(){let e=this.toc?" wiki--toc":"",t=this.toc?'<nav class="toc" part="toc"><div class="toc-title">Contents</div></nav>':"";return`<div class="wiki${e}">${t}<div class="content" part="content"></div></div><slot></slot>`}connectedCallback(){super.connectedCallback(),this.src&&this._startLoad()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),e==="src"&&this._initialised&&t!==i&&this._startLoad(),this._initialised&&["background","color","size","padding"].includes(e)&&this._applyStyles()}_update(){super._update(),this._applyStyles(),this._markdown&&this._renderMarkdown()}_applyStyles(){let e={};if(this._background&&(e["--_bg"]=n(this._background)||this._background,e.background="var(--_bg)"),this._color&&(e["--_color"]=n(this._color)||this._color,e.color="var(--_color)"),this._size){let t=d(this._size);t&&(e["font-size"]=t)}if(this._padding){let t=d(this._padding);e.padding=t||this._padding}this._setDynamicVars(e)}_startLoad(){let e=this.src;e&&this._fetchContent(e)}async _fetchContent(e){let t=this.shadowRoot?.querySelector(".wiki");t&&(t.classList.remove("wiki--loaded","wiki--error"),t.classList.add("wiki--loading"));try{let i;!this.nocache&&R.has(e)?i=R.get(e):(i=fetch(e).then(o=>{if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);return o.text()}),this.nocache||R.set(e,i));let r=await i;if(this.src!==e)return;this._markdown=r,this._renderMarkdown(),t&&(t.classList.remove("wiki--loading"),t.classList.add("wiki--loaded")),this.emit("ui-load",{src:e,markdown:r})}catch(i){R.delete(e),t&&(t.classList.remove("wiki--loading"),t.classList.add("wiki--error")),this.emit("ui-error",{src:e,error:i})}}_renderMarkdown(){let e=this.shadowRoot?.querySelector(".content");if(!e)return;let t=s.parseMarkdown(this._markdown);e.innerHTML=t,this.toc&&this._buildTOC(e)}_buildTOC(e){let t=this.shadowRoot?.querySelector(".toc");if(!t)return;let i=e.querySelectorAll("h1, h2, h3, h4");this._headings=[];let r=[];i.forEach((o,a)=>{let l=parseInt(o.tagName[1],10),h=o.textContent,u=`heading-${a}`;o.id=u,this._headings.push({level:l,text:h,id:u}),r.push(`<a href="#${u}" class="toc-h${l}">${this._esc(h)}</a>`)}),t.innerHTML=`<div class="toc-title">Contents</div>${r.join("")}`,t.addEventListener("click",o=>{let a=o.target.closest("a");if(!a)return;o.preventDefault();let l=a.getAttribute("href")?.slice(1),h=e.querySelector(`#${l}`);h&&h.scrollIntoView({behavior:"smooth",block:"start"})})}_esc(e){return String(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}reload(){R.delete(this.src),this._fetchContent(this.src)}static clearCache(){R.clear()}static parseMarkdown(e){if(!e)return"";let t=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`),i=[],r=0;for(;r<t.length;){let o=t[r],a=o.match(/^(`{3,}|~{3,})\s*(.*)?$/);if(a){let u=a[1][0],f=a[1].length,m=(a[2]||"").trim(),v=[];for(r++;r<t.length;){if(t[r].match(new RegExp(`^${u==="`"?"`":"~"}{${f},}\\s*$`))){r++;break}v.push(t[r]),r++}let k=s._escHtml(v.join(`
`)),g=m?` class="language-${m}"`:"";i.push(`<pre><code${g}>${k}</code></pre>`);continue}if(/^(\*{3,}|-{3,}|_{3,})\s*$/.test(o)){i.push("<hr>"),r++;continue}let l=o.match(/^(#{1,6})\s+(.+?)(?:\s+#+)?\s*$/);if(l){let u=l[1].length,f=s._inlineFormat(l[2]);i.push(`<h${u}>${f}</h${u}>`),r++;continue}if(o.match(/^>\s?/)){let u=[];for(;r<t.length&&t[r].match(/^>\s?/);)u.push(t[r].replace(/^>\s?/,"")),r++;let f=s.parseMarkdown(u.join(`
`));i.push(`<blockquote>${f}</blockquote>`);continue}if(r+1<t.length&&/^\|/.test(o)&&/^\|[\s-:|]+\|/.test(t[r+1])){let u=[];for(;r<t.length&&/^\|/.test(t[r]);)u.push(t[r]),r++;i.push(s._parseTable(u));continue}if(/^(\s*)([-*+])\s/.test(o)){let u=s._parseList(t,r,"ul");i.push(u.html),r=u.end;continue}if(/^(\s*)\d+[.)]\s/.test(o)){let u=s._parseList(t,r,"ol");i.push(u.html),r=u.end;continue}if(o.trim()===""){r++;continue}let h=[];for(;r<t.length&&t[r].trim()!==""&&!s._isBlockStart(t,r);)h.push(t[r]),r++;h.length>0&&i.push(`<p>${s._inlineFormat(h.join(`
`))}</p>`)}return i.join(`
`)}static _isBlockStart(e,t){let i=e[t];return!!(/^#{1,6}\s/.test(i)||/^(\*{3,}|-{3,}|_{3,})\s*$/.test(i)||/^(`{3,}|~{3,})/.test(i)||/^>\s?/.test(i)||/^\s*[-*+]\s/.test(i)||/^\s*\d+[.)]\s/.test(i)||/^\|/.test(i)&&t+1<e.length&&/^\|[\s-:|]+\|/.test(e[t+1]))}static _parseTable(e){let t=l=>l.replace(/^\|/,"").replace(/\|$/,"").split("|").map(h=>h.trim()),i=t(e[0]),r=e.slice(2).map(t),o=i.map(l=>`<th>${s._inlineFormat(l)}</th>`).join(""),a=r.map(l=>`<tr>${l.map(u=>`<td>${s._inlineFormat(u)}</td>`).join("")}</tr>`).join(`
`);return`<table><thead><tr>${o}</tr></thead><tbody>${a}</tbody></table>`}static _parseList(e,t,i){let r=[],o=t,a=(e[t].match(/^(\s*)/)?.[1]??"").length,l=i==="ul"?/^(\s*)([-*+])\s(.*)$/:/^(\s*)(\d+[.)])\s(.*)$/;for(;o<e.length;){let h=e[o];if(h.trim()===""){o++;continue}let u=(h.match(/^(\s*)/)?.[1]??"").length;if(u<a)break;let f=h.match(l);if(f&&u===a){let m=f[3],v=m.match(/^\[([xX ])\]\s(.*)/),k="",g="";if(v){let w=v[1].toLowerCase()==="x";k=' class="task-item"',g=`<input type="checkbox"${w?" checked":""}>`,m=v[2]}o++;let _=[];for(;o<e.length;){let w=e[o];if(w.trim()===""){if(o+1<e.length&&(e[o+1].match(/^(\s*)/)?.[1]??"").length>a){_.push(w),o++;continue}break}if((w.match(/^(\s*)/)?.[1]??"").length<=a)break;_.push(w),o++}let x="";if(_.length>0){let w=_.find(z=>z.trim()!=="");if(w&&(/^\s*[-*+]\s/.test(w)||/^\s*\d+[.)]\s/.test(w))){let z=/^\s*\d+[.)]\s/.test(w)?"ol":"ul";x=s._parseList(_,0,z).html}else x=s._inlineFormat(_.map(z=>z.trim()).join(" "))}r.push(`<li${k}>${g}${s._inlineFormat(m)}${x}</li>`);continue}if(u<=a)break;o++}return{html:`<${i}>${r.join(`
`)}</${i}>`,end:o}}static _inlineFormat(e){if(!e)return"";let t=s._escHtml(e);return t=t.replace(/`([^`]+?)`/g,"<code>$1</code>"),t=t.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1">'),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener">$1</a>'),t=t.replace(/(\*{3}|_{3})(?!\s)(.+?)(?<!\s)\1/g,"<strong><em>$2</em></strong>"),t=t.replace(/(\*{2}|_{2})(?!\s)(.+?)(?<!\s)\1/g,"<strong>$2</strong>"),t=t.replace(/(\*|_)(?!\s)(.+?)(?<!\s)\1/g,"<em>$2</em>"),t=t.replace(/~~(.+?)~~/g,"<del>$1</del>"),t=t.replace(/ {2,}\n/g,"<br>"),t=t.replace(/\n/g," "),t}static _escHtml(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}};customElements.define("ui-wiki",mt);export{Rt as NAMED_SIZES,B as UIApp,P as UIAppBanner,j as UIAppDrawer,W as UIAppFooter,O as UIAppHeader,V as UIAppMain,N as UIAppMainFooter,F as UIAppMainHeader,K as UIAppNav,Y as UIAppNavFooter,U as UIAppNavHeader,H as UIAppSubheader,G as UIAvatar,X as UIBadge,J as UIBreadcrumb,Z as UIBreadcrumbItem,Q as UIButton,ee as UIButtonGroup,ct as UICalendar,te as UICallout,ie as UICard,se as UICardBody,ae as UICardFooter,re as UICardHeader,oe as UICardMedia,ce as UICarousel,de as UICarouselSlide,ne as UIChart,et as UIClipboard,ht as UICommand,ut as UICommandItem,c as UIComponent,he as UIDetails,ue as UIDialog,pe as UIDivider,dt as UIDrawer,fe as UIDropdown,me as UIDropdownItem,Re as UIForm,L as UIIcon,nt as UIImage,be as UIInclude,ge as UIInput,ye as UIInputCheckbox,ve as UIInputCode,Ee as UIInputColor,Le as UIInputDate,ze as UIInputFile,$e as UIInputNumber,De as UIInputOTP,ke as UIInputRadio,we as UIInputRadioGroup,Ae as UIInputRating,Se as UIInputSelect,Ce as UIInputSlider,xe as UIInputSwitch,qe as UIInputTags,_e as UIInputTextarea,tt as UIKbd,Me as UILayoutContainer,Te as UILayoutGrid,Pe as UILayoutSpacer,Be as UILayoutSplit,Ie as UILayoutStack,pt as UIList,ft as UIListItem,le as UIMap,Je as UIMenu,Ze as UIMenuItem,Xe as UIPagination,Qe as UIPopover,Oe as UIProgress,lt as UIScrollArea,He as UISkeleton,je as UISpinner,at as UIStat,st as UIStep,ot as UISteps,Ne as UITab,Fe as UITable,Ve as UITabs,Ue as UIText,it as UITimeline,rt as UITimelineItem,Ke as UIToast,Ye as UITooltip,We as UITree,Ge as UITreeItem,mt as UIWiki,p as contrastColorFor,_t as installTheme,qt as isNamedSize,It as isPaletteToken,wt as luminance,n as resolveColor,C as resolveColorHover,kt as resolveRGB,d as resolveSize};
