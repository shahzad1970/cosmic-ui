<!-- ============================================================
     OTP — Component Documentation
     ============================================================ -->

<ui-layout-stack gap="0.25em" style="margin-bottom:2em;">
  <ui-text type="heading" size="xx-large">OTP</ui-text>
  <ui-text type="paragraph" color="gray-500">
    <code>&lt;ui-input-otp&gt;</code> renders a one-time password input with
    separate digit boxes, auto-advance, paste support, and arrow-key navigation.
  </ui-text>
</ui-layout-stack>

<!-- ── Basic Usage ────────────────────────────────────────── -->
<ui-text type="heading" size="large">Basic Usage</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  Set <code>length</code> to control the number of boxes. Focus auto-advances
  on entry and the <code>ui-complete</code> event fires when all digits are filled.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="demo-card">
  <div class="demo-preview" style="display:flex;gap:1.5em;flex-wrap:wrap;">
    <ui-input-otp label="6-digit code" length="6"></ui-input-otp>
    <ui-input-otp label="4-digit PIN" length="4"></ui-input-otp>
  </div>
  <ui-input-code language="html" readonly height="auto">&lt;ui-input-otp label="6-digit code" length="6"&gt;&lt;/ui-input-otp&gt;
&lt;ui-input-otp label="4-digit PIN" length="4"&gt;&lt;/ui-input-otp&gt;</ui-input-code>
</div>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Help & Error ───────────────────────────────────────── -->
<ui-text type="heading" size="large">Help &amp; Error</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  Use <code>help</code> for guidance and <code>error</code> for validation messages.
  Error state turns box borders red.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="demo-card">
  <div class="demo-preview" style="display:flex;gap:1.5em;flex-wrap:wrap;">
    <ui-input-otp label="With help" help="Check your email for the code" length="6"></ui-input-otp>
    <ui-input-otp label="With error" error="Invalid code" length="6"></ui-input-otp>
  </div>
  <ui-input-code language="html" readonly height="auto">&lt;ui-input-otp label="With help" help="Check your email for the code" length="6"&gt;&lt;/ui-input-otp&gt;
&lt;ui-input-otp label="With error" error="Invalid code" length="6"&gt;&lt;/ui-input-otp&gt;</ui-input-code>
</div>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Masked ─────────────────────────────────────────────── -->
<ui-text type="heading" size="large">Masked</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  Add the <code>masked</code> attribute to show dots instead of digits.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="demo-card">
  <div class="demo-preview">
    <ui-input-otp label="Secret code" length="6" masked></ui-input-otp>
  </div>
  <ui-input-code language="html" readonly height="auto">&lt;ui-input-otp label="Secret code" length="6" masked&gt;&lt;/ui-input-otp&gt;</ui-input-code>
</div>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Sizes ──────────────────────────────────────────────── -->
<ui-text type="heading" size="large">Sizes</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  Use <code>size</code> with CSS named sizes or any CSS length.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="demo-card">
  <div class="demo-preview" style="display:flex;gap:1.5em;flex-wrap:wrap;align-items:flex-end;">
    <ui-input-otp label="Small" size="small" length="4"></ui-input-otp>
    <ui-input-otp label="Default" length="4"></ui-input-otp>
    <ui-input-otp label="Large" size="large" length="4"></ui-input-otp>
  </div>
  <ui-input-code language="html" readonly height="auto">&lt;ui-input-otp label="Small" size="small" length="4"&gt;&lt;/ui-input-otp&gt;
&lt;ui-input-otp label="Default" length="4"&gt;&lt;/ui-input-otp&gt;
&lt;ui-input-otp label="Large" size="large" length="4"&gt;&lt;/ui-input-otp&gt;</ui-input-code>
</div>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Disabled ────────────────────────────────────────────── -->
<ui-text type="heading" size="large">Disabled</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  The <code>disabled</code> attribute dims the component and prevents input.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="demo-card">
  <div class="demo-preview">
    <ui-input-otp label="Disabled" length="6" value="123456" disabled></ui-input-otp>
  </div>
  <ui-input-code language="html" readonly height="auto">&lt;ui-input-otp label="Disabled" length="6" value="123456" disabled&gt;&lt;/ui-input-otp&gt;</ui-input-code>
</div>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Playground ─────────────────────────────────────────── -->
<ui-text type="heading" size="large">
  <ui-icon color="indigo-500">play-circle</ui-icon>
  Playground
</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  Interactively configure every property.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="playground">
  <div class="playground-controls">
    <ui-card elevation="1">
      <ui-card-body>
        <ui-text type="heading" size="small">Controls</ui-text>
        <ui-layout-spacer size="0.5em"></ui-layout-spacer>
        <ui-input id="otp-label" label="Label" size="small" value="Verification"></ui-input>
        <ui-layout-spacer size="0.5em"></ui-layout-spacer>
        <ui-input id="otp-help" label="Help" size="small"></ui-input>
        <ui-layout-spacer size="0.5em"></ui-layout-spacer>
        <ui-input id="otp-error" label="Error" size="small"></ui-input>
        <ui-layout-spacer size="0.5em"></ui-layout-spacer>
        <ui-input id="otp-length" label="Length" size="small" value="6"></ui-input>
        <ui-layout-spacer size="0.5em"></ui-layout-spacer>
        <ui-input id="otp-value" label="Value" size="small"></ui-input>
        <ui-layout-spacer size="0.5em"></ui-layout-spacer>
        <ui-input-select id="otp-size" label="Size" size="small">
          <option value="">Default</option>
          <option value="small">Small</option>
          <option value="large">Large</option>
          <option value="x-large">X-Large</option>
        </ui-input-select>
        <ui-layout-spacer size="0.5em"></ui-layout-spacer>
        <ui-input-color id="otp-bg" label="Background" size="small"></ui-input-color>
        <ui-layout-spacer size="0.75em"></ui-layout-spacer>
        <ui-layout-stack direction="horizontal" gap="1em">
          <ui-input-checkbox id="otp-masked" label="Masked"></ui-input-checkbox>
          <ui-input-checkbox id="otp-disabled" label="Disabled"></ui-input-checkbox>
          <ui-input-checkbox id="otp-required" label="Required"></ui-input-checkbox>
        </ui-layout-stack>
      </ui-card-body>
    </ui-card>
  </div>

  <div class="playground-preview">
    <div class="demo-card">
      <div class="demo-preview">
        <ui-input-otp id="otp-playground" label="Verification" length="6"></ui-input-otp>
      </div>
    </div>
  </div>
</div>

<script>
(function() {
  const el     = document.getElementById('otp-playground');
  const label  = document.getElementById('otp-label');
  const help   = document.getElementById('otp-help');
  const error  = document.getElementById('otp-error');
  const length = document.getElementById('otp-length');
  const value  = document.getElementById('otp-value');
  const size   = document.getElementById('otp-size');
  const bg     = document.getElementById('otp-bg');
  const masked = document.getElementById('otp-masked');
  const dis    = document.getElementById('otp-disabled');
  const req    = document.getElementById('otp-required');

  if (!el || !label || !help || !error || !length || !value || !size || !bg || !masked || !dis || !req) return;

  const setOrRemove = (attr, v) => v ? el.setAttribute(attr, v) : el.removeAttribute(attr);
  const listen = (ctrl, fn) => { ctrl.addEventListener('ui-input', fn); ctrl.addEventListener('ui-change', fn); };

  listen(label,  () => setOrRemove('label',  label.value));
  listen(help,   () => setOrRemove('help',   help.value));
  listen(error,  () => setOrRemove('error',  error.value));
  listen(length, () => setOrRemove('length', length.value));
  listen(value,  () => setOrRemove('value',  value.value));
  listen(size,   () => setOrRemove('size',   size.value));
  listen(bg,     () => setOrRemove('background', bg.value));

  masked.addEventListener('ui-change', () => { if (masked.checked) el.setAttribute('masked', ''); else el.removeAttribute('masked'); });
  dis.addEventListener('ui-change',    () => { if (dis.checked) el.setAttribute('disabled', '');    else el.removeAttribute('disabled'); });
  req.addEventListener('ui-change',    () => { if (req.checked) el.setAttribute('required', '');    else el.removeAttribute('required'); });
})();
</script>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── API Reference ──────────────────────────────────────── -->
<ui-text type="heading" size="large">API Reference</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<ui-table size="small">
  <table>
    <thead>
      <tr><th>Attribute</th><th>Type</th><th>Default</th><th>Description</th></tr>
    </thead>
    <tbody>
      <tr><td><code>length</code></td><td>Number</td><td><code>6</code></td><td>Number of digit boxes</td></tr>
      <tr><td><code>value</code></td><td>String</td><td>—</td><td>Current OTP value string</td></tr>
      <tr><td><code>name</code></td><td>String</td><td>—</td><td>Form field name</td></tr>
      <tr><td><code>label</code></td><td>String</td><td>—</td><td>Label text above the boxes</td></tr>
      <tr><td><code>help</code></td><td>String</td><td>—</td><td>Help text below the boxes</td></tr>
      <tr><td><code>error</code></td><td>String</td><td>—</td><td>Error message (turns borders red)</td></tr>
      <tr><td><code>size</code></td><td>String</td><td>—</td><td>Size keyword or CSS length</td></tr>
      <tr><td><code>background</code></td><td>String</td><td>—</td><td>Background colour (palette token or CSS)</td></tr>
      <tr><td><code>masked</code></td><td>Boolean</td><td><code>false</code></td><td>Show dots instead of digits</td></tr>
      <tr><td><code>disabled</code></td><td>Boolean</td><td><code>false</code></td><td>Dims the component and prevents input</td></tr>
      <tr><td><code>required</code></td><td>Boolean</td><td><code>false</code></td><td>Marks field as required</td></tr>
    </tbody>
  </table>
</ui-table>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Events ──────────────────────────────────────────────── -->
<ui-text type="heading" size="large">Events</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<ui-table size="small">
  <table>
    <thead>
      <tr><th>Event</th><th>Detail</th><th>Description</th></tr>
    </thead>
    <tbody>
      <tr><td><code>ui-input</code></td><td><code>{ value }</code></td><td>Fires on each digit entry or removal</td></tr>
      <tr><td><code>ui-complete</code></td><td><code>{ value }</code></td><td>Fires when all digit boxes are filled</td></tr>
    </tbody>
  </table>
</ui-table>

<ui-layout-spacer size="2em"></ui-layout-spacer>
