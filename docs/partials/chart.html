<!-- ============================================================
     Chart (Chart.js) — Component Documentation
     ============================================================ -->

<ui-layout-stack gap="0.25em" style="margin-bottom:2em;">
  <ui-text type="heading" size="xx-large">Chart (Chart.js)</ui-text>
  <ui-text type="paragraph" color="gray-500">
    <code>&lt;ui-chart&gt;</code> renders a Chart.js chart. Provide a JSON config
    via <code>src</code> or set a <code>config</code> object in JavaScript. If Chart.js
    is not present, the component loads it from the CDN automatically.
  </ui-text>
</ui-layout-stack>

<!-- ── Basic Usage ───────────────────────────────────────── -->
<ui-text type="heading" size="large">Basic Usage</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  Point <code>src</code> at a Chart.js config JSON file (type, data, options).
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="demo-card">
  <div class="demo-preview">
    <ui-chart id="chart-basic" src="../assets/chart-line-config.json" height="12em"></ui-chart>
  </div>
  <ui-input-code language="html" readonly height="auto">&lt;ui-chart src=&quot;../assets/chart-line-config.json&quot; height=&quot;12em&quot;&gt;&lt;/ui-chart&gt;</ui-input-code>
</div>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Supported Chart Types ─────────────────────────────── -->
<ui-text type="heading" size="large">Supported Chart Types</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  Chart.js built-in types supported via <code>type</code> in the config.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<ui-layout-grid min-col-width="10rem" gap="0.75em">
  <ui-card elevation="1"><ui-card-body><ui-text size="small">line</ui-text></ui-card-body></ui-card>
  <ui-card elevation="1"><ui-card-body><ui-text size="small">bar</ui-text></ui-card-body></ui-card>
  <ui-card elevation="1"><ui-card-body><ui-text size="small">bubble</ui-text></ui-card-body></ui-card>
  <ui-card elevation="1"><ui-card-body><ui-text size="small">doughnut</ui-text></ui-card-body></ui-card>
  <ui-card elevation="1"><ui-card-body><ui-text size="small">pie</ui-text></ui-card-body></ui-card>
  <ui-card elevation="1"><ui-card-body><ui-text size="small">polarArea</ui-text></ui-card-body></ui-card>
  <ui-card elevation="1"><ui-card-body><ui-text size="small">radar</ui-text></ui-card-body></ui-card>
  <ui-card elevation="1"><ui-card-body><ui-text size="small">scatter</ui-text></ui-card-body></ui-card>
</ui-layout-grid>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Chart Types Gallery ───────────────────────────────── -->
<ui-text type="heading" size="large">Chart Types Gallery</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  The same <code>&lt;ui-chart&gt;</code> supports any Chart.js type via its config.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<ui-layout-grid min-col-width="16rem" gap="1em">
  <ui-card elevation="1">
    <ui-card-body>
      <ui-text size="small" color="gray-500">Line</ui-text>
      <ui-layout-spacer size="0.35em"></ui-layout-spacer>
      <ui-chart src="../assets/chart-line-config.json" height="10em"></ui-chart>
    </ui-card-body>
  </ui-card>
  <ui-card elevation="1">
    <ui-card-body>
      <ui-text size="small" color="gray-500">Bar</ui-text>
      <ui-layout-spacer size="0.35em"></ui-layout-spacer>
      <ui-chart src="../assets/chart-bar-config.json" height="10em"></ui-chart>
    </ui-card-body>
  </ui-card>
  <ui-card elevation="1">
    <ui-card-body>
      <ui-text size="small" color="gray-500">Bubble</ui-text>
      <ui-layout-spacer size="0.35em"></ui-layout-spacer>
      <ui-chart src="../assets/chart-bubble-config.json" height="10em"></ui-chart>
    </ui-card-body>
  </ui-card>
  <ui-card elevation="1">
    <ui-card-body>
      <ui-text size="small" color="gray-500">Doughnut</ui-text>
      <ui-layout-spacer size="0.35em"></ui-layout-spacer>
      <ui-chart src="../assets/chart-doughnut-config.json" height="10em"></ui-chart>
    </ui-card-body>
  </ui-card>
  <ui-card elevation="1">
    <ui-card-body>
      <ui-text size="small" color="gray-500">Pie</ui-text>
      <ui-layout-spacer size="0.35em"></ui-layout-spacer>
      <ui-chart src="../assets/chart-pie-config.json" height="10em"></ui-chart>
    </ui-card-body>
  </ui-card>
  <ui-card elevation="1">
    <ui-card-body>
      <ui-text size="small" color="gray-500">Polar Area</ui-text>
      <ui-layout-spacer size="0.35em"></ui-layout-spacer>
      <ui-chart src="../assets/chart-polar-area-config.json" height="10em"></ui-chart>
    </ui-card-body>
  </ui-card>
  <ui-card elevation="1">
    <ui-card-body>
      <ui-text size="small" color="gray-500">Radar</ui-text>
      <ui-layout-spacer size="0.35em"></ui-layout-spacer>
      <ui-chart src="../assets/chart-radar-config.json" height="10em"></ui-chart>
    </ui-card-body>
  </ui-card>
  <ui-card elevation="1">
    <ui-card-body>
      <ui-text size="small" color="gray-500">Scatter</ui-text>
      <ui-layout-spacer size="0.35em"></ui-layout-spacer>
      <ui-chart src="../assets/chart-scatter-config.json" height="10em"></ui-chart>
    </ui-card-body>
  </ui-card>
</ui-layout-grid>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Multi-Axis Example ────────────────────────────────── -->
<ui-text type="heading" size="large">Multi-Axis Example</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  A more complex config with multiple datasets and a secondary y-axis.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="demo-card">
  <div class="demo-preview">
    <ui-chart id="chart-multi" src="../assets/chart-line-multi-axis.json" height="14em"></ui-chart>
  </div>
  <ui-input-code language="html" readonly height="auto">&lt;ui-chart src=&quot;../assets/chart-line-multi-axis.json&quot; height=&quot;14em&quot;&gt;&lt;/ui-chart&gt;</ui-input-code>
</div>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── JavaScript Config ─────────────────────────────────── -->
<ui-text type="heading" size="large">JavaScript Config</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  Set <code>config</code> directly for full Chart.js power — including callbacks,
  custom formatters, and <code>onClick</code> handlers that JSON cannot express.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="demo-card">
  <div class="demo-preview">
    <ui-chart id="chart-config" height="10em"></ui-chart>
  </div>
  <ui-input-code language="javascript" readonly height="auto">const chart = document.getElementById('chart-config');
chart.config = {
  type: 'line',
  data: {
    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'],
    datasets: [{ data: [6, 12, 8, 16, 10], borderColor: '#6366f1', tension: 0.35 }]
  },
  options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
};</ui-input-code>
</div>

<script>
(function() {
  const chart = document.getElementById('chart-config');
  if (!chart) return;
  chart.config = {
    type: 'line',
    data: {
      labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'],
      datasets: [{
        data: [6, 12, 8, 16, 10],
        borderColor: '#6366f1',
        tension: 0.35,
        fill: true,
        backgroundColor: '#6366f133'
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display: false } }
    }
  };
})();
</script>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── No Animation ──────────────────────────────────────── -->
<ui-text type="heading" size="large">No Animation</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  Add <code>no-animate</code> to disable all Chart.js transitions. Useful for
  static reports, server-rendered snapshots, or reduced-motion preferences.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="demo-card">
  <div class="demo-preview">
    <ui-chart src="../assets/chart-bar-config.json" height="10em" no-animate></ui-chart>
  </div>
  <ui-input-code language="html" readonly height="auto">&lt;ui-chart src=&quot;../assets/chart-bar-config.json&quot; height=&quot;10em&quot; no-animate&gt;&lt;/ui-chart&gt;</ui-input-code>
</div>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Background & Styling ──────────────────────────────── -->
<ui-text type="heading" size="large">Background &amp; Styling</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  Use <code>background</code> to give the chart frame a coloured backdrop.
  Combine with <code>size</code> to scale the whole component.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="demo-card">
  <div class="demo-preview" style="display: flex; gap: 1em; flex-wrap: wrap;">
    <ui-chart id="chart-styled-1" background="gray-100" height="10em" style="flex:1; min-width:12em;"></ui-chart>
    <ui-chart id="chart-styled-2" background="indigo-50" height="10em" style="flex:1; min-width:12em;"></ui-chart>
  </div>
  <ui-input-code language="html" readonly height="auto">&lt;ui-chart background=&quot;gray-100&quot; height=&quot;10em&quot;&gt;&lt;/ui-chart&gt;
&lt;ui-chart background=&quot;indigo-50&quot; height=&quot;10em&quot;&gt;&lt;/ui-chart&gt;</ui-input-code>
</div>

<script>
(function() {
  const barCfg = {
    type: 'bar',
    data: {
      labels: ['Q1', 'Q2', 'Q3', 'Q4'],
      datasets: [{ data: [30, 45, 28, 52], backgroundColor: '#6366f1cc', borderRadius: 4 }]
    },
    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
  };
  const lineCfg = {
    type: 'line',
    data: {
      labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
      datasets: [{ data: [10, 22, 18, 30, 25], borderColor: '#6366f1', tension: 0.4, fill: true, backgroundColor: '#6366f122' }]
    },
    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
  };
  const el1 = document.getElementById('chart-styled-1');
  const el2 = document.getElementById('chart-styled-2');
  if (el1) el1.config = barCfg;
  if (el2) el2.config = lineCfg;
})();
</script>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Sizes ─────────────────────────────────────────────── -->
<ui-text type="heading" size="large">Sizes</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  The <code>size</code> attribute sets the component font-size, which scales all
  <code>em</code>-based dimensions (height, spinner, text).
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="demo-card">
  <div class="demo-preview" style="display: flex; flex-direction: column; gap: 1em;">
    <ui-chart id="chart-size-sm" size="small" height="10em"></ui-chart>
    <ui-chart id="chart-size-lg" size="large" height="10em"></ui-chart>
  </div>
  <ui-input-code language="html" readonly height="auto">&lt;ui-chart size=&quot;small&quot; height=&quot;10em&quot;&gt;&lt;/ui-chart&gt;
&lt;ui-chart size=&quot;large&quot; height=&quot;10em&quot;&gt;&lt;/ui-chart&gt;</ui-input-code>
</div>

<script>
(function() {
  var cfg = {
    type: 'line',
    data: {
      labels: ['A', 'B', 'C', 'D', 'E'],
      datasets: [{ data: [3, 7, 5, 9, 6], borderColor: '#6366f1', tension: 0.3 }]
    },
    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
  };
  var sm = document.getElementById('chart-size-sm');
  var lg = document.getElementById('chart-size-lg');
  if (sm) sm.config = JSON.parse(JSON.stringify(cfg));
  if (lg) lg.config = JSON.parse(JSON.stringify(cfg));
})();
</script>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Playground ─────────────────────────────────────────── -->
<ui-text type="heading" size="large">
  <ui-icon color="indigo-500">play-circle</ui-icon>
  Playground
</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  Paste a Chart.js config JSON or tweak visual controls to preview live.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<div class="playground">
  <div class="playground-controls">
    <ui-card elevation="1">
      <ui-card-body>
        <ui-text type="heading" size="small">Controls</ui-text>
        <ui-layout-spacer size="0.5em"></ui-layout-spacer>

        <ui-input-textarea id="pg-chart-json" label="Chart.js Config (JSON)" rows="10" size="small"></ui-input-textarea>
        <ui-layout-spacer size="0.5em"></ui-layout-spacer>

        <ui-input id="pg-chart-height" label="Height" size="small" value="14em"></ui-input>
        <ui-layout-spacer size="0.35em"></ui-layout-spacer>

        <ui-input-select id="pg-chart-bg" label="Background" size="small">
          <option value="" selected>none</option>
          <option value="gray-100">gray-100</option>
          <option value="gray-50">gray-50</option>
          <option value="indigo-50">indigo-50</option>
          <option value="blue-50">blue-50</option>
          <option value="emerald-50">emerald-50</option>
          <option value="rose-50">rose-50</option>
        </ui-input-select>
        <ui-layout-spacer size="0.35em"></ui-layout-spacer>

        <ui-input-select id="pg-chart-size" label="Size" size="small">
          <option value="" selected>default</option>
          <option value="small">small</option>
          <option value="medium">medium</option>
          <option value="large">large</option>
          <option value="x-large">x-large</option>
        </ui-input-select>
        <ui-layout-spacer size="0.35em"></ui-layout-spacer>

        <ui-input-checkbox id="pg-chart-noanim" label="No animation" size="small"></ui-input-checkbox>
      </ui-card-body>
    </ui-card>
  </div>

  <div class="playground-preview">
    <div class="demo-card">
      <div class="demo-preview">
        <ui-chart id="pg-chart" height="14em"></ui-chart>
      </div>
    </div>
  </div>
</div>

<script>
(function() {
  var chart     = document.getElementById('pg-chart');
  var jsonInput = document.getElementById('pg-chart-json');
  var heightIn  = document.getElementById('pg-chart-height');
  var bgIn      = document.getElementById('pg-chart-bg');
  var sizeIn    = document.getElementById('pg-chart-size');
  var noAnimIn  = document.getElementById('pg-chart-noanim');

  if (!chart || !jsonInput) return;

  var defaultConfig = '{\n  "type": "line",\n  "data": {\n    "labels": ["Mon", "Tue", "Wed", "Thu", "Fri"],\n    "datasets": [\n      {\n        "label": "Sales",\n        "data": [6, 12, 8, 16, 10],\n        "borderColor": "#6366f1",\n        "backgroundColor": "#6366f133",\n        "tension": 0.35,\n        "fill": true\n      }\n    ]\n  },\n  "options": {\n    "responsive": true,\n    "maintainAspectRatio": false,\n    "plugins": { "legend": { "display": false } }\n  }\n}';

  function applyConfig() {
    var raw = (jsonInput.value || '').trim();
    if (!raw) { jsonInput.setAttribute('error', 'Config JSON is required.'); return; }
    try {
      chart.config = JSON.parse(raw);
      jsonInput.removeAttribute('error');
    } catch (e) { jsonInput.setAttribute('error', 'Invalid JSON.'); }
  }

  function applyAttr(el, attr) {
    var v = (el.value || '').trim();
    if (v) chart.setAttribute(attr, v); else chart.removeAttribute(attr);
  }

  if (!jsonInput.value) jsonInput.value = defaultConfig;
  applyConfig();

  jsonInput.addEventListener('ui-input', applyConfig);
  jsonInput.addEventListener('ui-change', applyConfig);

  if (heightIn) {
    heightIn.addEventListener('ui-input', function() { applyAttr(heightIn, 'height'); });
    heightIn.addEventListener('ui-change', function() { applyAttr(heightIn, 'height'); });
  }

  if (bgIn) bgIn.addEventListener('ui-change', function() { applyAttr(bgIn, 'background'); });
  if (sizeIn) sizeIn.addEventListener('ui-change', function() { applyAttr(sizeIn, 'size'); });

  if (noAnimIn) noAnimIn.addEventListener('ui-change', function() {
    if (noAnimIn.checked) chart.setAttribute('no-animate', '');
    else chart.removeAttribute('no-animate');
    applyConfig();
  });
})();
</script>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── Chart.js Config (JSON) ────────────────────────────── -->
<ui-text type="heading" size="large">Chart.js Config (JSON)</ui-text>
<ui-text type="paragraph" color="gray-500" size="small">
  JSON configs must be valid JSON (no functions). For callbacks, tooltips, or
  <code>onClick</code> handlers, set <code>config</code> via JavaScript instead.
</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<ui-table size="small">
  <table>
    <thead>
      <tr><th>Key</th><th>Type</th><th>Description</th></tr>
    </thead>
    <tbody>
      <tr><td><code>type</code></td><td>String</td><td>Chart type — <code>line</code>, <code>bar</code>, <code>doughnut</code>, <code>radar</code>, <code>scatter</code>, etc. Defaults to <code>line</code>.</td></tr>
      <tr><td><code>data</code></td><td>Object</td><td>Data payload: <code>labels</code> array + <code>datasets</code> array.</td></tr>
      <tr><td><code>data.labels</code></td><td>Array</td><td>Tick labels for the category axis.</td></tr>
      <tr><td><code>data.datasets</code></td><td>Array</td><td>Series objects — each with <code>data</code>, colours, and rendering options.</td></tr>
      <tr><td><code>options</code></td><td>Object</td><td>Chart.js options — scales, layout, interaction, and plugin configs.</td></tr>
      <tr><td><code>options.scales</code></td><td>Object</td><td>Axis definitions keyed by id (<code>x</code>, <code>y</code>, <code>y1</code>, …).</td></tr>
      <tr><td><code>options.plugins</code></td><td>Object</td><td>Plugin configuration — <code>legend</code>, <code>tooltip</code>, <code>title</code>, etc.</td></tr>
    </tbody>
  </table>
</ui-table>

<ui-layout-spacer size="1em"></ui-layout-spacer>

<ui-input-code language="json" readonly height="auto">{
  "type": "bar",
  "data": {
    "labels": ["A", "B", "C"],
    "datasets": [
      { "label": "Series", "data": [12, 18, 9], "backgroundColor": "#6366f1" }
    ]
  },
  "options": {
    "responsive": true,
    "maintainAspectRatio": false,
    "plugins": { "legend": { "display": false } }
  }
}</ui-input-code>

<ui-layout-spacer size="2em"></ui-layout-spacer>

<!-- ── API Reference ─────────────────────────────────────── -->
<ui-text type="heading" size="large">API Reference</ui-text>
<ui-layout-spacer size="0.75em"></ui-layout-spacer>

<ui-text type="heading" size="medium">Attributes</ui-text>
<ui-layout-spacer size="0.5em"></ui-layout-spacer>

<ui-table size="small">
  <table>
    <thead>
      <tr><th>Attribute</th><th>Type</th><th>Default</th><th>Description</th></tr>
    </thead>
    <tbody>
      <tr><td><code>src</code></td><td>String</td><td><code>""</code></td><td>URL pointing to a Chart.js config JSON file. The file is fetched with <code>cache: "no-cache"</code>. Takes priority over the <code>config</code> JS property.</td></tr>
      <tr><td><code>height</code></td><td>String</td><td><code>"8em"</code></td><td>CSS height of the chart frame. Accepts any CSS length or keyword (e.g. <code>200px</code>, <code>50vh</code>, <code>12em</code>).</td></tr>
      <tr><td><code>background</code></td><td>String</td><td><code>""</code></td><td>Background colour for the chart container. Accepts palette tokens (<code>gray-100</code>) or raw CSS colours.</td></tr>
      <tr><td><code>color</code></td><td>String</td><td><code>""</code></td><td>Text colour for the empty-state and overlay text. Accepts palette tokens or raw CSS colours.</td></tr>
      <tr><td><code>size</code></td><td>String</td><td><code>""</code></td><td>Component font-size — CSS keyword (<code>small</code> … <code>x-large</code>) or length. Scales all <code>em</code>-based dimensions.</td></tr>
      <tr><td><code>no-animate</code></td><td>Boolean</td><td><code>false</code></td><td>When present, disables all Chart.js animations. Useful for static renders or reduced-motion preferences.</td></tr>
    </tbody>
  </table>
</ui-table>

<ui-layout-spacer size="1.5em"></ui-layout-spacer>

<ui-text type="heading" size="medium">JS-only Properties</ui-text>
<ui-layout-spacer size="0.5em"></ui-layout-spacer>

<ui-table size="small">
  <table>
    <thead>
      <tr><th>Property</th><th>Type</th><th>Description</th></tr>
    </thead>
    <tbody>
      <tr><td><code>.config</code></td><td>Object</td><td>Chart.js configuration object. Supports functions (callbacks, formatters) that JSON cannot express. Setting this triggers a debounced re-render.</td></tr>
      <tr><td><code>.chart</code></td><td>Object | null</td><td>Read-only live <code>Chart</code> instance. Use for programmatic control — e.g. <code>el.chart.toBase64Image()</code>. Returns <code>null</code> before first render.</td></tr>
    </tbody>
  </table>
</ui-table>

<ui-layout-spacer size="1.5em"></ui-layout-spacer>

<ui-text type="heading" size="medium">Events</ui-text>
<ui-layout-spacer size="0.5em"></ui-layout-spacer>

<ui-table size="small">
  <table>
    <thead>
      <tr><th>Event</th><th>Detail</th><th>Description</th></tr>
    </thead>
    <tbody>
      <tr><td><code>ui-load</code></td><td>—</td><td>Fired each time the chart renders or updates successfully.</td></tr>
      <tr><td><code>ui-error</code></td><td><code>{ message }</code></td><td>Fired when chart rendering fails — <code>detail.message</code> contains the error description.</td></tr>
    </tbody>
  </table>
</ui-table>

<ui-layout-spacer size="1.5em"></ui-layout-spacer>

<ui-text type="heading" size="medium">CSS Parts</ui-text>
<ui-layout-spacer size="0.5em"></ui-layout-spacer>

<ui-table size="small">
  <table>
    <thead>
      <tr><th>Part</th><th>Description</th></tr>
    </thead>
    <tbody>
      <tr><td><code>canvas</code></td><td>The <code>&lt;canvas&gt;</code> element where Chart.js draws.</td></tr>
      <tr><td><code>loading</code></td><td>The loading-spinner overlay.</td></tr>
      <tr><td><code>error</code></td><td>The error-message overlay.</td></tr>
    </tbody>
  </table>
</ui-table>

<ui-layout-spacer size="2em"></ui-layout-spacer>
